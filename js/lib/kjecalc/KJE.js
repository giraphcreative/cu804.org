
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}document.documentElement.setAttribute("KJE-useragent",navigator.userAgent);var KJE={lang:"EN",initFired:false,reportTest:false,CalcDelay:100,CalculatorWidthMax:850,CalculatorWidthMin:285,CalculatorWidthNoMargin:false,bLockDown:false,ShowDefinitions:true,ShowCalculateButton:true,ShowReportButton:true,ShowPrintButton:true,ShowExtraClientInputs:false,ShowRequiredMessage:true,KeepCalculatorOnPage:false,KeepCalculatorOnPageAutoReport:false,closeCalculatorDroppersForReport:false,ExtraClientInputs:"<div id=KJE-D-EXTRA><div id=KJE-P-EXTRA>Input information:</div></div><div id=KJE-E-EXTRA ><div id='KJE-C-EXTRA_CLIENTNAME'><input id='KJE-EXTRA_CLIENTNAME' /></div><div id='KJE-C-EXTRA_NOTES'><input id='KJE-EXTRA_NOTES' /></div><div id='KJE-C-EXTRA_DATE'><input id='KJE-EXTRA_DATE' /></div><div style=\"height:10px\"></div></div>",DivDataPoint:"<div id='KJEGuiDataPoint' style='top: 0; left: 0;' aria-hidden='true'></div>",IncludeDefinitions:true,PopupDefinitions:true,InlineDefinitions:false,SliderWidthAdjust:0,bNativeSlider:true,ErrorBackground:"#FF7777",IncompleteBackground:"#FFFF77",CalculatorName:"Calculator Title",bUseInputForm:false,CommandButtons:"<div id='KJEFixed'><div id='KJECommandButtons'><input type=button class=KJECommandButton  name=KJECalculate id=KJECalculate value='**LBL_CALCULATE**' /><input **VIEWREPORT** class=KJECommandButton  id=KJEViewReport name=KJEViewReport value='**LBL_VIEWREPORT**' /></div>**FLOAT_TITLE**</div>",CommandMoreButtons:"<div id='#KJEMoreButtons**MORE_BUTTON_COUNT**'><input type='button' class='KJEMoreButton' id='KJEAddMore**MORE_BUTTON_COUNT**' name='KJEAddMore' value='**LBL_MORE**'></div>",CommandButtonsFloatTitle:"<div id='KJEScrollSticky' **STICKY_DISPLAY_STYLE**></div>",ReportButtons:"<div style='width:100%'><div id='KJEReportButtons'><input type=button class=KJECommandButton  name=KJEPrint id=KJEPrintReport value='**LBL_PRINTREPORT**' /><input type=button  class=KJECommandButton  id=KJEHideReport name=KJEHideReport value='**LBL_HIDEREPORT**' /></div></div>",CommandButtonsFixed:false,CommandButtonsTop:true,CommandButtonOffset:22,CommandButtonHeader:0,FixedHeaderHeight:0,CommandButtonPosition:"relative",Scroll:true,ScrollMinimum:23,ReportHeader:"<div class='KJEReportTitleHeader'>**REPORT_TITLE**</div>",ReportStyleDefault:"<style>  BODY, TABLE, TD, TH, UL, OL, DD, DL, P, BR { font-family: arial, sans-serif; font-size: 10pt; } H1 { font-family: arial, sans-serif; font-size: 13pt; font-weight: bold; }DT { font-family: arial, sans-serif; font-size: 10pt; font-weight: bold;  }P.footer { font-family: arial, sans-serif; font-size: 9pt; } DIV.large { font-family: arial, sans-serif; font-size: 13pt; font-weight: bold; }</style>",ReportGraphContainer:'<div id=KJE-C-REPORTGRAPH**COUNT** style="page-break-inside: avoid; margin: 0 auto; margin-top:15px; **ADDITIONAL** ">',iDecimal:2,ReportShowGraphs:true,ReportFooter:"<div class=KJECenter><p></p><strong>&copy; 1998-2020 KJE Computer Solutions, Inc.</strong><br/>Financial Calculators at <a src='http://www.dinkytown.net'>www.dinkytown.net</a><br/>(612) 331-2291 <br/>1730 New Brighton Blvd. PMB #111<br/>Minneapolis, MN 55413<p class='KJEReportFooter KJECenter'>KJE Computer Solutions, Inc.'s information and interactive calculators are made available to you as self-help tools for your independent use and are not intended to provide investment advice. We cannot and do not guarantee their applicability or accuracy in regards to your individual circumstances. All examples are hypothetical and are for illustrative purposes.  We encourage you to seek personalized advice from qualified professionals regarding all personal finance issues. More <a href='http://www.dinkytown.net/money/information.html'>Information</a>.</p></div>",ReportExtraFooter:"",ReportStyleSheet:null,ReportStyleSheet2:null,KJEReportBodyClass:"class=KJEReportBody",ReportOKToOpen:true,ReportDocumentEnd:"**FOOTER** <script>setTimeout(function() {window.print(), window.close();}, 1000)<\/script></body></html>\n",CalculatorTitleTemplate:null,CalclatorTitle:null,CalculatorTableClass:"KJECalculatorTable",CalculatorTableReportClass:"KJECalculatorReportTable",CalculatorTitleClass:"KJETitle",CalculatorTitle:"KJEFontHeading KJETitleExtra",CalculatorTitleError:"KJEError",CalculatorTitleErrorCalculation:"KJEErrorCalculation",CalculatorTitleMissing:"KJEMissing",CalculatorStickyTitleClass:"KJEFontHeading KJETitleExtra",CalcTitlePadding:25,CalcTitlePaddingMenu:15,ClearColor:"#FFFFFF",colorList:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],colorRGBackground:"#FFFFFF",DefinitionsH1:"<h2 class='KJEDefinitionsHeader KJEFontHeading'>**LBL_DEFINITIONS**</h2>",LBL_DEFINITIONS:"Definitions",Colon:":",CalculatorTitleEntry:"Please enter or select a value in all required fields.",CalculatorTitleCalc:"Press &ldquo;Calculate&rdquo; to view your results.",ButtonMore:"More +",ButtonCalculate:"Calculate",ButtonViewReport:"View Report",ButtonHideReport:"Hide Report",ButtonPrintReport:"Print",sCurrency:"Dollars",MSG_YEARS_LBL:"years",MSG_YEAR_LBL:"year",MSG_MONTHS_LBL:"months",MSG_MONTH_LBL:"month",MSG_AND_LBL:"and",MSG_YES:"Yes",MSG_NO:"No",YES:"yes",NO:"no",MSG_EXCEEDS_LIMIT_OF_RANGE:"KJE1 is limited to KJE2",MSG_UNDER_LIMIT_OF_RANGE:"KJE1 can't be less than KJE2",MSG_VALID_RANGE:"Enter an amount between KJE1 and KJE2",MSG_INVALID_DATE:"Please enter a valid date for KJE1",MSG_MISSING_ITEM:"Please enter a value for KJE1",MSG_REQUIRED_NOTICE:"<div id='KJERequiredNote' class=KJEFooter><span class='KJERequired'>KJE1</span>KJE2</div>",MSG_REQUIRED_SYMBOL:"*<span class='KJERequiredShowHover'>This entry is required.</span>",MSG_REQUIRED_SYMBOL_BARE:"*",REQUIRED_SYMBOL_CLASS:"KJERequired",REQUIRED_HOVER_CLASS:"KJERequiredShowHover",MSG_NOTREQUIRED_SYMBOL:"",MSG_GRAPH:"**GRAPH**",SplashContent:"Financial Calculators from<br />Dinkytown.net",SplashContentFooter:"Financial Calculators &copy;1998-2020 KJE Computer Solutions, Inc.",Default:{RORMarket:7,RORRetire:4,RORSave:0.25,RateCard:16,RatePersonal:7.5,RateFix15:4,RateFix30:4.5,RateAdj:4,RateAuto:7,RateAutoLow:1.9,MortgageAmt:200000,HomePrice:220000,StateTaxRate:8,InflationRate:2.9,RateCardMax:48,MortgageMin:0,MortgageMax:250000000,MortgageRateMin:0,MortgageRateMax:25,MortgageTerm:30,MortgageTermMin:1,MortgageTermMax:40,MortgageTermIncrement:5,MortgageShowAll:true,MortgageShowAllMax:25,InvestRateMin:0,InvestRateMax:20,InvestSliderRateMax:12,InflationRateMin:0,InflationRateMax:20,InflationSliderRateMax:12},initializing:0,InTask:false,calcCleared:false,CalculatorDiv:"KJECalculatorDiv",AllContent:"KJEAllContent",CalcTimeout:0,CalcTitleHeight:0,Error:false,InComplete:false,bValidateIncomplete:true,Calculating:false,gGraphs:new Array(0),gReportGraphs:new Array(0),iOldWidth:-1,bSizeInitialized:false,ResizeTimeOut:null,iUrekau:[-1625252314,1332498680,0,1505998205,380075612,-1435395332],InputScreenText:false,DefinitionText:false,ReportText:false,MSG_ADA_TABLE:"role='presentation'",TypedArray:(typeof Float64Array!="undefined"),showInputsFirst:false,showSliderTitle:true,ShowScrollTitle:true,URLValueParm:"KJEData",replace:function(c,b,a){return(a?a.split(c).join(b):"")},getKJEReplaced:function(a){if(a||a==""){for(var b=1;b<arguments.length;b++){a=a.replace("KJE"+(b),arguments[b])}}else{a="";for(b=0;b<arguments.length;b++){a+=arguments[b]+(b==arguments.length-1?"":", ")}}return a},dateFormat:function(d,a){if(d==null){return a}var b="/",c=d.getMonth()+1;return(d==null?"":c+b+d.getDate()+b+d.getFullYear())},chjilap:function(d){var b=0;var e="";if(d.length==0){}else{for(var a=0;a<d.length;a++){e=d.charCodeAt(a);b=((b<<5)-b)+e;b=b&b}}return b},getTermLabel:function(f,c){var n=KJE;var j=Math.floor(f/12),b=(f%12),d=n.MSG_AND_LBL,g=n.MSG_MONTH_LBL,l=n.MSG_MONTHS_LBL,e=n.MSG_YEAR_LBL,k=n.MSG_YEARS_LBL,h=" ",a="";return(c||j>0?j+h+(j==1?e:k):a)+(c||(j>0&&b>0)?h+d+h:a)+(c||b>0?b+h+(b==1?g:l):a)},setOrientation:function(){var a=KJE;switch(window.orientation){case -90:case 90:default:a.resize(true);break}},resize:function(b){var a=KJE;if(!a.device.iphone||b){if(a.bSizeInitialized){if(a.ResizeTimeOut!=null){clearTimeout(a.ResizeTimeOut)}a.ResizeTimeOut=setTimeout(a.calcResize,500)}a.bSizeInitialized=true}},InputSetupMoreButtons:function(a){return KJE.replace("**MORE_BUTTON_COUNT**",a+"",(KJE.CommandMoreButtons.replace("**LBL_MORE**",KJE.ButtonMore)))},InputSetup:function(a,q,o){var t=KJE;var l=t.bUseInputForm&&!t.IE7and8;var h="**COMMAND_BUTTONS**";var p="**REPORT_BUTTONS**";var d="**MORE_BUTTONS**";var m=(t.IE7and8||t.deviceMobile||t.CommandButtonsFixed)&&t.CommandButtonsTop;var k=a.indexOf(h);var j=o.indexOf(p);var n="<div id='KJETitle' aria-live='polite' class='"+t.CalculatorTitleClass+" "+t.CalculatorTitle+"'>"+t.CalculatorTitleShow+"</div>";var f="**TITLE_BAR**";var g=a.indexOf(f);for(var e=1;e<10;e++){a=t.replace("**GRAPH"+e+"**",t.getGraphCode(e),a)}var r="<!--KJEMAIN-->"+t.DivDataPoint;if(t.MSG_SR_HEADER){r+=t.MSG_SR_HEADER}if(t.SRExtraHeader){r+=t.SRExtraHeader}if(l){r+="<form title='"+(t.CalcName?t.CalcName:t.CalculatorTitleShow)+"' name=KJECalcForm id=KJECalcForm'>"}r+="<div id=KJECalculatorScreenSize class='KJECenter' style='position:relative; width:100%'>";r+=(k<0&&m?h:"");r+="<div id='KJEWaitContainer'><div id='KJEWait' class=KJEWait></div></div>";r+="<div id=KJECalculatorTable style='margin: 0 auto;'>";r+="<div id=KJECalculatorTableCell class='KJECalculator KJEEase' style='width:100%'>";r+="<span id=KJESplash class=KJEBold style='color:#333333'><br /><br /><br />"+t.SplashContent+"<p class=KJEFooter>"+t.SplashContentFooter+"</p><br /><br /><br /><br /><br /><br /><br /><br /></span>";r+="<div id='KJEMain' class=KJEMain >";r+="<div id='KJEMenuContainer'><button id='KJEMenu' type='button' class=KJEMenu tabindex='0' aria-label='"+KJE.MSG_MENU_TITLE_SOME+"'></button><div role='region' aria-label='"+KJE.MSG_MENU_TITLE_SOME+"' id='KJEMenuWindow'></div></div>";r+=(g<0?n:"");r+=(t.ShowRequiredMessage?t.getKJEReplaced(KJE.MSG_REQUIRED_NOTICE,KJE.MSG_REQUIRED_SYMBOL_BARE,KJE.parameters.get("MSG_INDICATES_REQUIRED","indicates required.")):"");r+="<div id='KJEInputs' class='KJEInputs'>"+(t.ShowExtraClientInputs?t.ExtraClientInputs:"")+a+"</div>";r+="</div>";r+="</div>";r+="</div>";r+=(k<0&&!m?h:"");r+="</div>";if(l){r+="</form>"}r+="<!--KJEMAINEND-->";r+="<div id=KJEReport class=KJEReport>";r+=(k>=0&&j<0?p:"");r+="<div id=KJEReportTop></div>";if(t.ExtraFooter){r+=t.ExtraFooter(q)}r+="</div>";if(t.IncludeDefinitions&&!t.InlineDefinitions){r+=t.formatDefinitions(q)}t.fmtReportButtons=t.ReportButtons.replace("**LBL_HIDEREPORT**",t.ButtonHideReport).replace("**LBL_PRINTREPORT**",t.ButtonPrintReport);t.fmtCommandButtons=t.CommandButtons.replace("**LBL_VIEWREPORT**",t.ButtonViewReport).replace("**LBL_CALCULATE**",t.ButtonCalculate).replace("**VIEWREPORT**",(l?"type=submit":"type=button"));t.fmtCommandButtons=t.fmtCommandButtons.replace("**FLOAT_TITLE**",t.CommandButtonsFloatTitle).replace("**STICKY_DISPLAY_STYLE**",t.ShowScrollTitle?"":"style='display:none;'");o=o.replace(p,t.fmtReportButtons);r=((r.replace(f,n)).replace(h,t.fmtCommandButtons)).replace(p,t.fmtReportButtons);var e=0;while(r.indexOf(d)>-1){r=r.replace(d,this.InputSetupMoreButtons(++e))}return{sInputs:r,sReport:o,bReportAddButtonEvents:j>=0}},formatDefinitions:function(d,c){var a=KJE;c=(c?c:a.LBL_DEFINITIONS);var b="";b+="<div id=KJEDefinitions class=KJEDefinitions>"+a.DefinitionsH1.replace("**LBL_DEFINITIONS**",a.LBL_DEFINITIONS).replace("**LBL_DEFINITIONS**",a.LBL_DEFINITIONS);b+="<div id='KJEDefinitionsDL'>"+d+"</div>";b+="</div>";return b},inCommandTask:function(c){var a=KJE;var b="inline-block";var d="none";if(a.InTask&&c){return true}a.Wait.style.display=(c?b:d);a.InTask=c;return false},setTitle:function(c,g){var j=KJE;var h=j.subheader;var i=j.kujiae;var a=j.CalcTitle;var b=j.kujaleip;var d=j.UKuejna;if(!j.CalcTitleWidth){j.CalcTitleWidth=a.offsetWidth-j.CalcTitlePadding*2-(KJE.ShowMenu?j.CalcTitlePaddingMenu:0)}if(b){a.innerHTML=d+i+h;a.className=j.CalculatorTitleError}else{KJE.TrialReplace1=1;var f=c+h;if(f!=a.innerHTML){a.innerHTML=f}if(g){a.className=j.CalculatorTitleClass+" "+g}else{a.className=j.CalculatorTitleClass+" "+j.CalculatorTitle}if(j.KJEScrollSticky){var e=j.KJEScrollSticky;if(j.Error||j.InComplete||(j.ShowScrollTitle&&!j.reportViewable)){KJE.scrolled();if(f!=e.innerHTML){e.innerHTML=f}e.className=(g?g:"")}else{e.style.display="none";if(""!=e.innerHTML){e.innerHTML=""}}}}j.Calculator.style.height=j.Main.offsetHeight+"px"},setTitleTemplate:function(){var a=KJE;var c="";if(a.CalculatorTitleTemplate){c=a.CalculatorTitleTemplate;for(var b=0;b<arguments.length;b++){c=c.replace("KJE"+(b+1),arguments[b])}a.CalculatorTitleShow=c}else{a.CalculatorTitleShow=a.CalculatorTitle}},results:function(g,j,f){var l=KJE;l.calcCleared=false;if(l.IE7and8){l.Wait.style.display="block"}if(l.CalcTimeout){clearTimeout(l.CalcTimeout)}if(g||f==true){if(l.inCommandTask(true)){return}if(g){l.showInputs()}}KJE.bCalculationModuleError=false;try{l.Error=false;l.InComplete=false;l.DataPointHide();var a=l.CalcControl;a.clear();l.GuiControl.setValues(a);if(l.setValuesAdditional){l.setValuesAdditional(a)}if(l.ShowExtraClientInputs){l.setExtraClientInputs(a)}var k=0;var d="";var h=l.inputs.items;for(var e in h){if(!h[e].validate()){k++;l.InComplete=true;d=(d?d+", ":"")+h[e]._sLabel}}d=l.getKJEReplaced(l.MSG_MISSING_ITEM,d);if(!l.InComplete){if(j&&a.initReport){a.initReport()}try{a.calculate(j?true:false)}catch(b){KJE.bCalculationModuleError=true;throw b}if(KJE.calculateAdditional){KJE.calculateAdditional(a,j?true:false)}l.GuiControl.refresh(a);if(KJE.refreshAdditional){KJE.refreshAdditional(l.GuiControl,a)}for(var e in l.droppers.items){l.droppers.items[e].setText()}l.setTitle(l.CalculatorTitleShow)}if(l.InComplete&&l.bValidateIncomplete){l.calcClear(k>3||d==l.getKJEReplaced(l.MSG_MISSING_ITEM,"")?l.CalculatorTitleEntry:d,l.CalculatorTitleMissingClass)}}catch(b){l.Error=true;var c=(b.err?b.err:b)+" ";if(b.oInputElement){b.oInputElement.setCalculationError(b)}if(c.indexOf("NS_ERROR_FAILURE")<1){l.calcClear(c,l.CalculatorTitleError+(KJE.bCalculationModuleError?" "+l.CalculatorTitleErrorCalculation:""))}}if(l.IE7and8){l.Wait.style.display="none"}if(g||f){setTimeout(function(){l.inCommandTask(false)},400)}if(KJE.StorageSet){KJE.StorageSet()}l.initializing=2;KJE.bCalculationModuleError=false},calcClear:function(c,f){var a=KJE;var d=a.gGraphs;if(!c){c=a.CalculatorTitleEntry}if(!f){f=null}for(var e=0;e<d.length;e++){if(d[e]){d[e].blank()}}for(var b in a.inputs.items){if(a.inputs.items[b]._inputType==a.TypeLabel){a.inputs.items[b].setText("")}}if(a.GuiControl.clear){a.GuiControl.clear()}a.setTitle(c,f)},calcResize:function(){var a=KJE;if(a.setWidth()){var c=a.gGraphs;for(var b in a.inputs.items){a.inputs.items[b].newWidth()}for(var d=0;d<c.length;d++){if(c[d]){c[d].setWidth(true)}}}if(a.reportViewable){var c=a.gReportGraphs;for(var d=0;d<c.length;d++){if(c[d]){c[d].setWidth(true)}}}if(a.resizeMenu){a.resizeMenu()}a.scrolled()},dataChanged:function(b){var a=KJE;if(a.CalcTimeout){clearTimeout(a.CalcTimeout)}if(a.CalcShowReportTimeout){clearTimeout(a.CalcShowReportTimeout)}a.CalcTimeout=setTimeout(a.results,a.CalcDelay);if(KJE.KeepCalculatorOnPage&&a.Report.style.display!="none"){a.showInputs();if(KJE.KeepCalculatorOnPageAutoReport){a.CalcShowReportTimeout=setTimeout(function(){a.showReportFinal()},1000)}}},completeFade:function(){var a=KJE;if(a.fade<100){a.fade+=(a.device.iphone?100:4);a.Buttons.style.opacity=(a.fade/100);a.Main.style.opacity=(a.fade/100)}else{clearInterval(a.pace);KJE.Calculator.style.transition=a.DropeeTransition;if(KJE.reportTest){a.showReport()}}},Startfade:function(){var a=KJE;if(a.fade<100){a.fade+=4;a.Splash.style.opacity=(1-a.fade/100)}else{clearInterval(a.pace);a.Splash.style.display="none";a.fade=0;a.pace=setInterval(a.completeFade,10)}},showCalculator:function(){var a=KJE;a.results(true);a.ms=(a.Main.style.opacity!=0||a.Main.style.opacity=="");if(a.ms){setTimeout(function(){a.Buttons.style.visibility="visible";a.Main.style.visibility="visible";a.Splash.style.display="none"},500)}else{a.Buttons.style.opacity=0;a.Main.style.opacity=0;a.Splash.style.opacity=1}a.fade=0;a.pace=setInterval(a.Startfade,10);a.initializing=1},getOffset:function(c){var b=0;var a=0;while(c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop)){b+=c.offsetLeft-c.scrollLeft;a+=c.offsetTop-c.scrollTop;c=c.offsetParent}return{top:a,left:b}},setWidth:function(b){var a=KJE;a.CalculatorTable.style.width="100%";var c=a.ScreenSize.clientWidth;if(KJE.CalculatorWidthNoMargin){}else{c-=(c<=400?0:10);c=(a.CalculatorWidthMax<c?a.CalculatorWidthMax:c);c=(c<a.CalculatorWidthMin?a.CalculatorWidthMin:c)}a.oldClientWidth=c;a.CalculatorTable.style.width=c+"px";a.Calculator.style.height=a.Main.offsetHeight+"px";a.DataPoint.style.maxWidth=c-37+"px";a.CalculatorWidth=c-10;if(b){a.Splash.style.width=c;a.oldClientWidth=0}return true},FloatArray:function(d){var a=KJE;if(a.TypedArray){return new Float64Array(d)}var b=new Array(d);for(var c=0;c<d;c++){b[c]=0}return b},IntArray:function(d){var a=KJE;if(a.TypedArray){return new Int16Array(d)}var b=new Array(d);for(var c=0;c<d;c++){b[c]=0}return b},init:function(){var a=KJE;if(a.initFired){return}a.initFired=true;KJE.closeCalculatorDroppersForReport=a.parameters.get("CLOSE_DROPPERS_FOR_REPORT",KJE.KeepCalculatorOnPage);if(a.IE7and8){setTimeout(a.initAfterLoad,100)}else{a.initAfterLoad()}if(a.ShowMenu){a.displayMenu(true);KJE.sMenuHelp=a.parameters.get("MSG_MENU_HELP","<dt><span class='KJEDefinitionsHeader KJEFontHeading'>Additional Functions</span></dt><dd>Click this menu to access the additional functions including:<p><span class=KJEBold>Reset to Defaults:</span>Click the &quot;Reset to defaults&quot; button to reload the default values for this calculator.</p><p><span class=KJEBold>Clear all Fields:</span>Click the &quot;Clear all fields&quot; button to clear all entry fields and reset any radio buttons or drop downs to their default values.</p></dd>");if(a.parseMenuDefn){KJE.sMenuHelp=a.parseMenuDefn(KJE.sMenuHelp)}a.AddDefinitionEvents(document.getElementById("KJEMenuContainer"),a.formatDefinitionEntry(a.sMenuHelp),a.parameters.get("MSG_MENU_HELP_TITLE","Additional functions"),"MSG_MENU",1,KJE.Menu,"KJEDefinitionIconMenu","KJEGuiDefnPopupRight KJEMenuDefinitions",true)}},initAfterLoad:function(){var Z=KJE;Z.InputClass="KJEInput"+(KJE.InputModern?" KJEInputModern":"");var I=navigator.userAgent;Z.device={iphone:I.match(/(iPhone|iPod|iPad)/),android:I.match(/Android/)};Z.deviceUseNumberType=false;Z.deviceInputPad=(Z.deviceUseNumberType?KJE.parameters.get("DEVICE_INPUT_PAD",10):0);if(Z.bNativeSlider==true){var T=document.createElement("input");T.setAttribute("type","range");Z.bNativeSlider=T.type!=="text"}Z.bUseStorage=false;if(Z.bStorageInit){Z.bUseStorage=Z.bStorageInit()}var N=Z.ReportStyleSheet,W=Z.ReportStyleSheet2,l="KJE.css",k="KJESiteSpecific.css",D=document.getElementsByTagName("link");for(var G=0;G<D.length;++G){var Q=D[G].href;if(Q.indexOf(l)>=0&&N==null){N=Q;Z.hRefPath=Q.substring(0,Q.lastIndexOf("/")+1)}if(Q.indexOf(k)>=0&&W==null){W=Q}}if(N==null){N=l}if(W==null){W=k}Z.ReportStyleSheet=N;Z.ReportStyleSheet2=W;var R=Z.iUrekau;var ab=R.length,t=location.hostname,P=Z.kujiae=t.replace(/^www\./i,""),c=Z.parameters,g=document;var V=Z.chjilap(P);Z.kujaleip=true;for(var T=ab-1;T>=0;T--){if(V==R[T]){Z.kujaleip=false}}KJE.TrialReplace1=2;Z.CalculatorTitleShow=Z.CalculatorTitle=(c.get("TITLE_TEMPLATE",Z.CalculatorTitle?Z.CalculatorTitle:document.title));Z.AllContent=g.getElementById(Z.AllContent);if(Z.InlineDefinitions){Z.DefinitionTextContainer=g.getElementById("KJEDefinitionText");Z.DefinitionText=Z.DefinitionTextContainer.innerHTML}var o=g.getElementById("KJEReportText");if(o){Z.ReportText=o.innerHTML;o.innerHTML=""}Z.DefinitionText=Z.formatDefinitionEntry(Z.DefinitionText);if(Z.DefinitionTextContainer){Z.DefinitionTextContainer.innerHTML=Z.DefinitionText}var O=Z.ReportText;if(Z.ReportProcess){O=Z.ReportProcess(O)}O=Z.replace("KJE_CURRENTDATE",Z.dateFormat(new Date()),O);Z.ReportGraphCount=0;if(!Z.ReportShowGraphs){O=Z.replace(Z.MSG_GRAPH,"",O)}else{if(O){var e=0;while(true){e=O.indexOf(Z.MSG_GRAPH,e);if(e>=0){Z.ReportGraphCount++;e+=Z.MSG_GRAPH.length}else{break}}}}Z.ReportText=O;if(Z.parseInputs){Z.InputScreenText=Z.parseInputs(Z.InputScreenText)}var r=Z.InputSetup(Z.InputScreenText,Z.DefinitionText,Z.ReportText);Z.AllContent.innerHTML=r.sInputs;Z.ReportText=r.sReport;Z.bReportAddButtonEvents=r.bReportAddButtonEvents;Z.Splash=g.getElementById("KJESplash");Z.inputsViewable=true;Z.Wait=g.getElementById("KJEWait");Z.Report=g.getElementById("KJEReport");Z.ReportTop=g.getElementById("KJEReportTop");var b=Z.Fixed=g.getElementById("KJEFixed");var C=Z.Buttons=g.getElementById("KJECommandButtons");var L=Z.Calculate=g.getElementById("KJECalculate");var F=Z.PrintReport=g.getElementById("KJEPrintReport");var m=Z.ViewReport=g.getElementById("KJEViewReport");var j=Z.HideReport=g.getElementById("KJEHideReport");var X=Z.Inputs=g.getElementById("KJEInputs");var u=Z.DataPoint=g.getElementById("KJEGuiDataPoint");var z=Z.KJEScrollSticky=g.getElementById("KJEScrollSticky");var M=Z.Calculator=g.getElementById("KJECalculatorTableCell");Z.H1Title=g.getElementById("KJETitleH1");Z.ScreenSize=g.getElementById("KJECalculatorScreenSize");var K=g.getElementById("KJECalcForm");var S=Z.CalcTitle=g.getElementById("KJETitle");S.style.padding=Z.CalcTitlePadding+"px";var Y=Z.Main=g.getElementById("KJEMain");var p=Z.Definitions=g.getElementById("KJEDefinitions");if(p&&p.lastChild){var x=p.lastChild.childNodes;var aa=x.length;for(T=0;T<aa;T++){var f=x[T];if(f.id&&f.id.substr(0,6)=="KJE-D-"){var s=f.id.substr(6).trim();var E=c.get("DFN_"+s,null);if(E=="REMOVE"){f.innerHTML="";f.style.visibility="hidden";f.style.display="none";f.id=null}else{if(E){if(f.lastChild){f.lastChild.innerHTML=E}}var E=c.get("DFN_NAME_"+s,c.get("MSG_"+s,null));if(E){if(f.firstChild){f.firstChild.innerHTML=E}}}}}}X.style.display="block";Z.CalculatorTable=g.getElementById("KJECalculatorTable");Z.menuInit(S);var J="click";L.addEventListener(J,Z.calculateButtonAction,false);u.addEventListener(J,Z.DataPointHide,false);if(m){m.addEventListener(J,Z.showReport,false)}if(K){K.addEventListener("submit",function(h){h.preventDefault()})}Z.addReportButtonEvents();M.style.height=M.offsetHeight+"px";if(Z.IE7and8){C.style.visibility="hidden";Y.style.visibility="hidden";Z.Splash.style.visibility="visible"}else{C.style.opacity=0;Y.style.opacity=0;Z.Splash.style.opacity=1}if(b){}else{b=Z.Fixed=Z.Buttons;Z.CommandButtonsFixed=true}if(Z.CommandButtonsFixed){b.style.position=KJE.CommandButtonPosition;Z.FixedTop=Z.CommandButtonOffset}else{b.style.position="absolute";Z.FixedTop=M.offsetTop-Z.CommandButtonOffset}b.style.top=Z.FixedTop+"px";window.addEventListener("scroll",Z.scrolled,false);window.addEventListener("resize",Z.resize,false);window.addEventListener("orientationchange",Z.setOrientation,false);Z.oldClientWidth=0;Z.setWidth(true);Z.CalculatorTitleTemplate=c.get("TITLE_TEMPLATE",Z.CalculatorTitleTemplate);var a=Z.HeaderTitle=c.get("CALC_HEADER_TITLE","");var y=Z.HeaderDesc=c.get("CALC_HEADER_DESC","");Z.initialize();if(Z.ShowExtraClientInputs){Z.parameters.getSet("EXTRA_CLIENTNAME","");Z.parameters.getSet("EXTRA_NOTES","");Z.parameters.set("USFD_EXTRA_CLIENTNAME",false);Z.parameters.set("USFD_EXTRA_NOTES",false);Z.parameters.set("USFD_EXTRA_DATE",true);KJE.InputItem.AltNotRequired=true;Z.StringInput("EXTRA_CLIENTNAME","Name");Z.StringInput("EXTRA_NOTES","Notes");Z.Date("EXTRA_DATE","Date").bIncompleteCheck=false;KJE.InputItem.AltNotRequired=null;var d=Z.parameters.get("MSG_DROPPER_EXTRATITLE","Name, notes and date for report:");Z.addDropper(new Z.Dropper("EXTRA",true,d,d),Z.colorList[0])}var B=g.getElementById("KJEHeaderContent");if(B){var n=c.get("CALC_HEADER_DIV","<div id=KJECalculatorTitle><h1>CALC_HEADER_TITLE</h1></div><div id=KJECalculatorDescription>CALC_HEADER_DESC</div>");B.innerHTML=n.replace("CALC_HEADER_TITLE",a).replace("CALC_HEADER_DESC",y)}var A=Z.inputs.items;var q=KJE.INIT;var U=KJE.INIT_NOCHANGE;var H=KJE.INIT_ACTION;for(var T in A){var w=H[A[T]._inputType];if(w!=U){if(A[T].bShow&&!A[T]._inputField.disabled){if(A[T]._inputType==KJE.TypeNumber&&w!=""&&w<A[T]._minimum){w=A[T]._minimum}else{if(A[T]._inputType==KJE.TypeNumber&&w==""&&A[T].vDefault==0){w=0}}KJE.InputItem.InputSetValues(A[T],w,H[A[T]._inputTypeAdditional],false)}}}if(Z.customInit){Z.customInit(this)}Z.showTimer()},showTimer:function(){var a=KJE;setTimeout(a.showCalculator,250)},scrolled:function(){var a=KJE;if(!a.CommandButtonsFixed){if(a.ScrollTimeOut!=null){clearTimeout(a.ScrollTimeOut)}a.ScrollTimeOut=setTimeout(a.buttonPosition,10)}},buttonPosition:function(){var a=KJE;var c=a.util.findPosRelativeToViewport(a.CalculatorTable);var b=a.KJEButtonYPoint=c[1];if(a.FixedTop+a.FixedHeaderHeight<b){a.Fixed.className="KJEButtonIsScrolling";a.Fixed.style.position="absolute";if(a.KJEScrollSticky){a.KJEScrollSticky.style.display="none"}a.Fixed.style.top=a.FixedTop+"px";a.Fixed.style.left="0";a.Fixed.style.marginRight="auto";a.Fixed.style.marginLeft="auto";a.Fixed.style.width="auto"}else{a.Fixed.className="KJEButtonIsFixed";a.Fixed.style.position="fixed";a.Fixed.style.top=a.FixedHeaderHeight+"px";a.Fixed.style.left=c[0]+"px";a.Fixed.style.width=a.CalculatorTable.clientWidth-10+"px";a.Fixed.style.marginRight="5px";a.Fixed.style.marginLeft="5px";if(a.Error||a.InComplete||a.ShowScrollTitle){if(a.KJEScrollSticky){a.KJEScrollSticky.style.display="block"}}}},goScroll:function(){var a=KJE;if(a.Scroll){var b=a.util.findPos(a.H1Title?a.H1Title:a.Calculator);window.scrollTo(b[0],b[1]-a.ScrollMinimum)}},showInputs:function(){var a=KJE;if(a.CalcControl.initInputs){a.CalcControl.initInputs()}var b=a.Report.style.display="none";var c="inline-block";var e="block";a.CalculatorTable.className=a.CalculatorTableClass;a.Calculate.value=a.ButtonCalculate;if(a.ViewReport){a.ViewReport.value=a.ButtonViewReport}a.Calculate.style.display=a.ShowCalculateButton?c:b;a.ViewReport.style.display=a.ShowReportButton?c:b;var d=a.Definitions;if(d){d.style.display=a.ShowDefinitions?e:b}a.Calculator.style.overflow="hidden";a.Main.style.display=e;a.Calculator.style.height=a.Main.offsetHeight+"px";a.reportViewable=false;if(a.showInputsFirst){a.goScroll()}else{a.showInputsFirst=true}a.calcResize();setTimeout(function(){KJE.Main.style.overflow="visible";KJE.Calculator.style.overflow="visible"},500)},calculateInputInitiatizing:function(b){var a=KJE;if(a.initializing==1||b){a.initializing=2;a.results(!a.reportViewable)}},calculateButtonAction:function(){var a=KJE;if(a.MenuWindowHide){a.MenuWindowHide()}a.calculateInputInitiatizing(true);if(a.KeepCalculatorOnPage){a.goScroll()}if(a.reportViewable){a.printTheReport()}else{if(!a.Error&&!a.InComplete){a.CalcTimeout=setTimeout(a.resultsCalcButton,50)}}},reportButtonExtraAction:function(){if(KJE.closeCalculatorDroppersForReport){for(var a in KJE.droppers.items){if(KJE.reportViewable){KJE.droppers.items[a].doOpen(10)}else{KJE.droppers.items[a].doClose(10)}}setTimeout(function(){KJE.Calculator.style.height=KJE.Main.offsetHeight+"px"},500)}},resultsCalcButton:function(){KJE.calculateInputInitiatizing(true);KJE.results(false,false,true)},printOpenReport:function(j){var t=KJE;var h=document.getElementById("KJEAllContent");var e=t.replace;var a=t.gReportGraphs;var b=h.innerHTML;var r=t.ReportDocumentStart+b+t.ReportDocumentEnd;var p=r.indexOf("<!--KJEDEFINITIONS-->");var o=r.indexOf("<!--KJEDEFINITIONSEND-->",p);r=r.substring(0,p)+r.substring(o);p=r.indexOf("<!--KJEMAIN-->");o=r.indexOf("<!--KJEMAINEND-->",p);r=r.substring(0,p)+r.substring(o);r=e("<!--KJEDEFINITIONSEND-->","",r);r=e("<!--REPORT_DEFINED_END-->","",r);r=e("<!--KJEMAINEND-->","",r);r=e("**REPORT_STYLE_SHEET**",t.ReportStyleSheet,r);r=e("**REPORT_STYLE_SHEET2**",t.ReportStyleSheet2,r);r=e("**REPORT_DEFAULT_STYLE**",t.ReportStyleDefault,r);var q=t.replace("<img src='logo.png'","<img src='"+t.hRefPath+"logo.png'",t.ReportHeader);q=t.replace("**REPORT_TITLE**",document.title,q);r=e("**HEADER**",q,r);r=e("**FOOTER**",e("<!--EXTRA_FOOTER-->",KJE.parameters.get(t.lang+"ReportExtraFooter",t.ReportExtraFooter),KJE.parameters.get(t.lang+"ReportFooter",t.ReportFooter)),r);r=e("**REPORT_TITLE**",t.CalcName?t.CalcName:t.CalculatorTitleShow,r);r=e("**TITLE**",t.CalcName?t.CalcName:"Financial Calculator",r);r=e("Calculator Calculator","Calculator",r);if(t.reportViewable){var n=0;for(var l=0;l<a.length;l++){if(a[l]){n=Math.round(parseFloat(t.strip(a[l].wContainer.style.width)));a[l].setWidth(true,KJE.gWidthReport)}}}var d="<!--GRAPHEND-->";for(var k=0;k<t.ReportGraphCount;k++){var f='<img src="'+a[k].wCanvas.toDataURL()+'" height='+a[k].wCanvas.offsetHeight+" width="+a[k].wCanvas.offsetWidth+">";var c="<div class='KJEGraphTitle'>"+e('"',"&quote",a[k]._titleGraph.s)+"</div>";p=r.indexOf("<!--GRAPH"+k+"-->");o=r.indexOf(d,p);r=r.substring(0,p)+t.ReportGraphContainer.replace("**COUNT**",k+"").replace("**ADDITIONAL**","width:"+a[k].wCanvas.offsetWidth+"px;")+c+f+"</div>"+r.substring(o+d.length)}j.document.write(r);j.document.close();j.focus();if(t.reportViewable){var m=t.gReportGraphs;for(var l=0;l<m.length;l++){if(m[l]){m[l].setWidth(true,n)}}}},printTheReport:function(){var a=KJE;var c=0;if(screen){c=screen.width/2-480}var b=window.open("","_blank","toolbar=yes,menubar=yes,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=960,height="+(screen.height-170)+",left="+c+",top=5");if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){setTimeout(function(){a.printOpenReport(b)},100)}else{a.printOpenReport(b)}},showReport:function(){var a=KJE;a.InTask=false;if(a.Error||a.InComplete){a.calculateInputInitiatizing(true);return}if(a.ReportOKToOpen){if(a.inCommandTask(true)){return}setTimeout(a.showReportFinal,200)}},showReportFinal:function(){var a=KJE;a.DataPointHide();if(KJE.KeepCalculatorOnPage==false){if(KJE.MenuWindowHide){KJE.MenuWindowHide()}}if(a.reportButtonExtraAction){a.reportButtonExtraAction()}if(!a.reportViewable){if(a.displayMenu){a.displayMenu(false)}if(KJE.KeepCalculatorOnPage==false){a.CalculatorTable.className=a.CalculatorTableReportClass}a.results(false,true);if(a.Error||a.InComplete){a.inCommandTask(false);return}a.reportViewable=true;if(a.ViewReport){a.Calculate.value=a.ButtonPrintReport}a.Calculate.style.display=(a.ShowPrintButton?"inline-block":"none");if(!a.KeepCalculatorOnPage){a.Calculator.style.height="0px";a.Main.style.overflow="hidden";a.Main.style.display="none"}if(a.Definitions){a.Definitions.style.display="none"}a.Report.style.display="block";if(a.ViewReport){a.ViewReport.value=a.ButtonHideReport}if(a.reportPreprocess){a.sReport=a.reportPreprocess(a.CalcControl,a.ReportText)}else{a.sReport=a.ReportText}if(a.ShowExtraClientInputs){a.sReport=a.setExtraClientReport(a.CalcControl,a.ReportText)}a.sReport=a.CalcControl.formatReport(a.sReport);setTimeout(a.fireReport,50)}else{a.showInputs();if(a.KeepCalculatorOnPage){a.Calculate.style.display="none"}else{setTimeout(a.results,400)}if(a.displayMenu){a.displayMenu(true)}setTimeout(function(){a.inCommandTask(false)},400)}if(a.CalcShowReportTimeout){clearTimeout(a.CalcShowReportTimeout)}},fireReport:function(){var b=KJE;var e=b.sReport;for(var d=0;d<b.ReportGraphCount;d++){var h="<!--GRAPH"+d+"-->"+b.ReportGraphContainer.replace("**COUNT**",d+"").replace("**ADDITIONAL**","height:"+b.gHeight+"px;")+"<canvas id=KJE-G-REPORTGRAPH"+d+"> </canvas></div><!--GRAPHEND-->";e=e.replace(b.MSG_GRAPH,h)}b.ReportTop.innerHTML=e;if(b.ReportGraphCount>0){for(var f=0;f<b.ReportGraphCount;f++){var a=b.gNewGraph(b.gGraphs[f]._gtGraphType._iGraphType,"REPORTGRAPH"+(f),true,false,false,b.sgv(b.gGraphs[f]._titleGraph.getProperty(),""),true);if(a){b.gReportGraphs[f]=a}}}var c=null;for(f=0;f<b.gReportGraphs.length;f++){c=b.gReportGraphs[f];c.setAriaRole(b.gGraphs[f].getFigureTitle());c.setProperty(b.gGraphs[f].getProperty());c._legend.setProperty(b.gGraphs[f]._legend.getProperty());c._grid.setProperty(b.gGraphs[f]._grid.getProperty());c._axisY.setProperty(b.gGraphs[f]._axisY.getProperty());c._axisX.setProperty(b.gGraphs[f]._axisX.getProperty());c.setTitle(b.sgv(b.gGraphs[f]._titleGraph.getProperty(),""));c._titleXAxis.setProperty(b.gGraphs[f]._titleXAxis.getProperty());c._titleYAxis.setProperty(b.gGraphs[f]._titleYAxis.getProperty());c.add(b.gGraphs[f].getDataProperties());c.setBackground(b.parameters.get("PAGEBACKGROUND_COLOR",b.colorRGBackground));c.setWidth(true)}var j=b.CalcControl;if(j.formatGraph){j.formatGraph(j,b.gReportGraphs)}if(j.reportComplete){j.reportComplete(b.GuiControl)}if(b.reportComplete){b.reportComplete(b.CalcControl,b.ReportText)}if(b.bReportAddButtonEvents){b.addReportButtonEvents()}if(b.addReportExtraEvents){b.addReportExtraEvents()}if(!b.KeepCalculatorOnPage){b.ViewReport.focus();b.goScroll()}setTimeout(function(){b.inCommandTask(false)},400)},formatDefinitionEntry:function(d){var a=KJE;var c=a.definitions.items;for(var b in c){d=a.replace(b,c[b],d)}d=a.replace("<dt>","<h3 class='KJEDefinition'>",d);d=a.replace("</dt>","</h3>",d);d=a.replace("</dd>","</p>",d);d=a.replace("<dd>","<p>",d);d=a.replace("<p>","<p class='KJEDefinition'>",d);if(a.parseDefinitions){d=a.parseDefinitions(d)}return d},addReportButtonEvents:function(){var b=KJE;var a=b.PrintReport=document.getElementById("KJEPrintReport");var c=b.HideReport=document.getElementById("KJEHideReport");var d="click";if(a){a.addEventListener(d,b.printTheReport,false)}if(c){c.addEventListener(d,b.showReport,false)}}};KJE.util={findPos:function(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}return[b,curtop]},getPageScroll:function(){var b,a;if(self.pageYOffset){a=self.pageYOffset;b=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}else{if(document.body){a=document.body.scrollTop;b=document.body.scrollLeft}}}return[b,a]},findPosRelativeToViewport:function(c){var b=this.findPos(c);var a=this.getPageScroll();return[b[0]-a[0],b[1]-a[1]]}};KJE.stripDate=function(a){if(!a){return""}var c=a.length;var d="";while(c>0){var b=a.charAt(c-1);switch(b){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":d=b+d;break;case"-":d=b+"/";break;default:break}c--}return d};KJE.strip=function(a,f){if(!a){return"0"}var c=a.length;var e="";var g=0;var h=0;while(c>0){var b=a.charAt(c-1);switch(b){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e=b+e;break;case".":if(!g){e=b+e}g++;break;case"-":case"(":h++;break;default:break}c--}if(e==""){return"0"}return(h&&!f?"-"+e:e)};KJE.InputModern=(navigator.userAgent.match(/(iPhone|iPod)/)?false:true);KJE.WindowsOS=(navigator.userAgent.indexOf("Windows")!=-1);KJE.IE7=(navigator.appVersion.indexOf("MSIE 7.")!=-1);KJE.IE8=(navigator.appVersion.indexOf("MSIE 8.")!=-1);KJE.IE9=(navigator.appVersion.indexOf("MSIE 9.")!=-1);KJE.IE7and8=(KJE.IE7||KJE.IE8)&&(!window.addEventListener);KJE.IEOld=KJE.IE9||KJE.IE7and8;KJE.Safari=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1);if(!KJE.IE7and8){KJE.IE7=false}KJE.VML=false;KJE.List=function(){this.length=0;this.items={};this.bLock={}};KJE.List.prototype.getSet=function(b,a){if(this.exists(b)){return this.items[b]}return this.set(b,a)};KJE.List.prototype.get=function(b,a){if(typeof(this.items[b])=="undefined"){return a}else{return this.items[b]}};KJE.List.prototype.exists=function(a){return !(typeof(this.items[a])=="undefined")};KJE.List.prototype.locked=function(a){return !(typeof(this.bLock[a])=="undefined")};KJE.List.prototype.set=function(b,c,a){if(typeof(c)!="undefined"){if(typeof(this.items[b])=="undefined"){this.length++}if(this.locked(b)){return this.items[b]}else{if(a){this.bLock[b]=true}this.items[b]=c}}return c};KJE.setExtraClientInputs=function(b){var a=KJE.inputs.items;b.EXTRA_CLIENTNAME=a.EXTRA_CLIENTNAME.getValue();b.EXTRA_NOTES=a.EXTRA_NOTES.getValue();b.EXTRA_DATE=a.EXTRA_DATE.getValue()};KJE.setExtraClientReport=function(d,e){var c=KJE;var f=KJE.parameters.get("EXTRA_CLIENT_BLOCK","<div class='KJEReportExtraClientBlock'>"+(d.EXTRA_CLIENTNAME?"<strong>Prepared for: EXTRA_CLIENTNAME</strong> ":"")+(d.EXTRA_NOTES?"<br>EXTRA_NOTES<br>":"")+(d.EXTRA_DATE?"EXTRA_DATE":"")+"</div>");var a=e.indexOf("**EXTRA_CLIENT_BLOCK**");if(a<0){e="**EXTRA_CLIENT_BLOCK**"+e}if(d.EXTRA_CLIENTNAME||d.EXTRA_NOTES||d.EXTRA_DATE){e=c.replace("**EXTRA_CLIENT_BLOCK**",f,e)}else{e=c.replace("**EXTRA_CLIENT_BLOCK**","",e)}e=c.replace("EXTRA_CLIENTNAME",d.EXTRA_CLIENTNAME,e);e=c.replace("EXTRA_NOTES",d.EXTRA_NOTES,e);e=c.replace("EXTRA_DATE",c.dateFormat(d.EXTRA_DATE,""),e);return e};KJE.CalculatorWidth=KJE.CalculatorWidthMax;KJE.ReportDocumentStart='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>**REPORT_TITLE**</title><meta name="viewport" content="height=device-height,width=device-width,initial-scale=1">**REPORT_DEFAULT_STYLE**<link type="text/css" rel="StyleSheet" href="**REPORT_STYLE_SHEET**" /><link type="text/css" rel="StyleSheet" href="**REPORT_STYLE_SHEET2**" /></head><body '+KJE.KJEReportBodyClass+">**HEADER**",KJE.MSG_SR_HEADER="<span class='KJEAccessible'>By changing any value in the following form fields, calculated values are immediately provided for displayed output values. Click the view report button to see all of your results.</span>";KJE.parameters=new KJE.List();KJE.inputs=new KJE.List();KJE.droppers=new KJE.List();KJE.definitions=new KJE.List();KJE.UKuejna="KJE Calculator License Not Found for: ";KJE.subheader="";KJE.iStorageTime=1000;KJE.STORAGE_NONE=0;KJE.STORAGE_AUTO=1;KJE.bStorageNonsupportWarning=true;KJE.bStorageOK=function(){if(typeof(Storage)!=="undefined"){try{localStorage.setItem("localStorage",1);localStorage.removeItem("localStorage")}catch(a){KJE.bUseStorage=KJE.STORAGE_NONE;return false}return true}return false};KJE.bStorageInit=function(){KJE.oStorageItems=null;KJE.bUseStorage=KJE.parameters.get("LOCAL_STORAGE",KJE.STORAGE_AUTO);KJE.sStorageKey=(typeof KJE.CalcType!="undefined"?KJE.CalcType:"TEMP");if(KJE.bStorageOK()){try{var b=localStorage.getItem(KJE.sStorageKey);if(KJE.LZString){b=KJE.LZString.decompressFromEncodedURIComponent(b)}KJE.oStorageItems=JSON.parse(b)}catch(c){KJE.oStorageItems={}}if(KJE.oStorageItems==null){KJE.oStorageItems={}}localStorage.setItem(KJE.sStorageKey+"_href",KJE.formatHref());localStorage.setItem(KJE.sStorageKey+"_title",document.title)}else{KJE.bUseStorage=KJE.STORAGE_NONE}if(KJE.getURLValueParam){var a=KJE.getURLValueParam();if(a){KJE.oStorageItems=a}}return KJE.bUseStorage};KJE.StorageSet=function(){if(KJE.bUseStorage){if(KJE.bStorageTimeout){clearTimeout(KJE.bStorageTimeout)}KJE.bStorageTimeout=setTimeout(KJE.bStorageSet,KJE.iStorageTime)}};KJE.getJSONFromInputs=function(){var b=KJE.inputs.items;var a={};for(var c in b){if(b.hasOwnProperty(c)){if(b[c]._inputType!=KJE.TypeLabel&&b[c]._inputType!=KJE.TypeNone){a[c]=b[c]._value}if(b[c]._inputTypeAdditional==KJE.TypeDropBox){a[b[c]._Additional.name]=b[c]._Additional.value}}}var d=JSON.stringify(a);return d};KJE.bStorageSet=function(c,b){var a=KJE.getJSONFromInputs();if(KJE.LZString){a=KJE.LZString.compressToEncodedURIComponent(a)}if(KJE.bUseStorage){localStorage.setItem(KJE.sStorageKey+(c?"#"+c:""),a);if(b){localStorage.setItem(KJE.sStorageKey+"#"+c+"_name",b)}}return a};KJE.bStoragePopulate=function(c){var b=KJE.inputs.items;for(var d in b){var a=false;if(c.hasOwnProperty(d)){a=c[d]}else{if(b.hasOwnProperty(d)){a=b[d].vDefault}}var e=null;if(b[d]._inputTypeAdditional!=KJE.TypeNone){if(c.hasOwnProperty(b[d]._Additional.name)){e=c[b[d]._Additional.name]}else{e=b[d].vDefault2}}KJE.InputItem.InputSetValues(b[d],a,e,false)}KJE.results(true)};KJE.StorageGet=function(b,a){var d=KJE.parameters.get(b,a);if(KJE.oStorageItems&&KJE.bUseStorage){var c=KJE.oStorageItems[b];if(c!=null){d=c}}return d};KJE.bHrefTrimURL=true;KJE.formatHref=function(){var a=document.location.href;if(KJE.bHrefTrimURL){var b=a.indexOf("?");if(b>0){a=a.substr(0,b)}}return a};KJE.MenuResizeTimeOut=null;KJE.MenuWindowVisible=false;KJE.MenuSelectedRow=-1;KJE.menuInit=function(b){KJE.sMenuRESET="<div class='KJEMenuGroupRow'><input type=button class='KJEMenuButton KJEMenuButtonWide' id=KJEReset value='"+KJE.parameters.get("MSG_MENU_RESET","Reset to Defaults")+"'/></div>";KJE.sMenuCLEAR="<div class='KJEMenuGroupRow'><input type=button class='KJEMenuButton KJEMenuButtonWide' id=KJEClear value='"+KJE.parameters.get("MSG_MENU_CLEAR","Clear all Fields")+"'/></div>";KJE.sMenuHTMLAuto="**RESET****CALCCLEAR**";KJE.MenuHeader='<div class="KJEMenuHeader"><button id="KJE-MENUCLOSE" class="KJECloseButton" type="button" aria-label="**MSG_MENU_CLOSE**" tabindex="0">X</button><span id="KJEMenuWindowTitle">**MSG_MENU_TITLE**</span></div>';KJE.ShowMenu=KJE.parameters.get("SHOW_MENU",KJE.ShowExtraClientInputs);if(KJE.ShowMenu){if(b){b.style.paddingRight=KJE.CalcTitlePadding+KJE.CalcTitlePaddingMenu+"px"}var a=KJE.Menu=document.getElementById("KJEMenu");if(a){a.addEventListener("click",KJE.showMenu,false)}}};KJE.MenuResize=function(){if(KJE.ShowMenu){var a=KJE;clearTimeout(a.MenuResizeTimeOut);a.MenuResizeTimeOut=setTimeout(a.resizeMenu,50)}};KJE.displayMenu=function(a){if(KJE.ShowMenu){var b=KJE.Menu.style;b.display=(a&&KJE.ShowMenu?"Inline-Block":"None")}};KJE.resizeMenu=function(){var a=KJE;if(a.reportViewable||!a.ShowMenu){return false}if(a.MenuWindowVisible){a.MenuWindowShow()}};KJE.showMenu=function(){if(KJE.MenuWindowVisible){setTimeout(KJE.MenuWindowHide,1)}else{setTimeout(KJE.MenuWindowShow,1)}};KJE.MenuWindowHide=function(){if(KJE.ShowMenu&&KJE.MenuWindow){var a=KJE;a.MenuWindow.style.display="none";try{KJE.Menu.focus()}catch(b){}a.MenuWindowVisible=null}};KJE.MenuWindowOffset=function(){var a=KJE.MenuWindow.offsetParent;if(a){var b=KJE.getScreenCoord(0,0,a);return{x:-b.x,y:-b.y}}else{return{x:0,y:0}}};KJE.MSG_MENU_TITLE_SOME="Additional Functions ";KJE.MenuWindowShow=function(){var b=KJE;b.DataPointHide();if(b.MenuWindow==null){b.MenuWindow=document.getElementById("KJEMenuWindow");KJE.MenuHeader=b.replace("**MSG_MENU_CLOSE**",KJE.MSG_DEFN_CLOSE_LABEL,KJE.MenuHeader);var f=false;if(KJE.initMenuMulti&&KJE.bUseStorage==KJE.STORAGE_MULTI){f=KJE.initMenuMulti()}if(!f||KJE.bUseStorage==KJE.STORAGE_NONE){KJE.MenuHeader=b.replace("**MSG_MENU_TITLE**",KJE.MSG_MENU_TITLE_SOME,KJE.MenuHeader);b.MenuWindow.innerHTML=KJE.MenuHeader+b.replace("**CALCCLEAR**",KJE.sMenuCLEAR,b.replace("**RESET**",KJE.sMenuRESET,b.replace("**EMAIL**",b.replace("**EMAIL_DEFAULT**",KJE.sEmailDefault,KJE.sMenuEMAIL),b.sMenuHTMLAuto)))}}b.MenuWindow.style.display="block";b.MenuWindowVisible=true;var a=b.MenuWindow.buttonReset=document.getElementById("KJEReset");var e=b.MenuWindow.buttonClear=document.getElementById("KJEClear");var d=b.MenuWindow.buttonClose=document.getElementById("KJE-MENUCLOSE");var g=b.MenuWindow.buttonEmail=document.getElementById("KJEEmail");if(a){a.addEventListener("click",KJE.resetPage,false)}if(e){e.addEventListener("click",KJE.clearPage,false)}if(d){d.addEventListener("click",KJE.MenuWindowHide,false)}if(g){g.addEventListener("click",KJE.emailpage,false)}try{document.getElementById("KJE-MENUCLOSE").focus()}catch(c){}};KJE.resetPage=function(){if(KJE.MenuColorRows&&KJE.bUseStorage){KJE.MenuColorRows(-1)}KJE.bStoragePopulate({})};KJE.clearPage=function(){var a=KJE;var b=a.inputs.items;if(a.MenuColorRows&&a.bUseStorage){a.MenuColorRows(-1)}a.bStoragePopulate({});for(var c in b){if(b[c]._inputType==a.TypeNumber){var d=b[c]._minimum<0?0:b[c]._minimum;b[c].setValue(d,true)}else{if(b[c]._inputType==a.TypeDate){b[c].setText("")}else{if(b[c]._inputType==a.TypeString){b[c].setText("")}}}}a.calcClear()};if(document.addEventListener){document.addEventListener("DOMContentLoaded",KJE.init,false)}KJE.INIT_BLANK=1;KJE.INIT_ZERO=2;KJE.INIT_NORMAL=0;KJE.INIT=KJE.INIT_NORMAL;KJE.INIT_NOCHANGE="NOCHANGE";KJE.INIT_DEFAULT_NORMAL=[KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE];KJE.INIT_DEFAULT_ZERO=[KJE.INIT_NOCHANGE,0,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE];KJE.INIT_DEFAULT_BLANK=[KJE.INIT_NOCHANGE,"","","",KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE,KJE.INIT_NOCHANGE];KJE.INIT_ACTION=KJE.INIT_DEFAULT_NORMAL;KJE.errorObject=function(a,b){this.err=a;this.oInputElement=b};KJE.getURLValueParam=function(){var g={};var f=window.location.href;var a=f.indexOf(KJE.URLValueParm);if(a>0){var c=f.substring(a+KJE.URLValueParm.length+1);if(c){var b=null;try{b="{"+KJE.replace("*",'"',KJE.replace("(","",KJE.replace(")","",KJE.replace(";","",KJE.replace("EMPTY",'""',c)))))+"}";b=JSON.parse(b)}catch(d){b=null}}if(b==""||b==null){alert("There was an error in the data sent to this calculator. This can be caused by editing or changing a calculator link. We were unable to populate the calculator with the sent values. Calculator will appear with default values.");return false}return b}return false};KJE.iAddMoreCount=0;KJE.iAddMoreDropperCount=0;KJE.initializeMore=function(d,c,a,b){if(d.addMoreInit){}else{d.oAddMores=new Array();d.addMoreInit=function(f,h,m,j){var g=new Object();g.sRows=h;var k=g.oRowsToShow=new Array(h.length);g.visibleMax=f;g.visibleCount=KJE.parameters.get("VISIBLE_COUNT"+j,KJE.parameters.get("VISIBLE_COUNT",1));g.AddMore=document.getElementById("KJEAddMore"+(j+1));this.oAddMores[KJE.iAddMoreCount]=g;var i=this;if(g.AddMore){g.AddMore.addEventListener("click",function(n){i.addMore(j)});for(var l=0;l<h.length;l++){k[l]=new Array(f);if(Array.isArray(h[l])){for(var e=0;e<f;e++){k[l][e]=h[l][e]._container;if(m[l]){if(h[l][e].getValue()>0){g.visibleCount=(g.visibleCount<=e?e+1:g.visibleCount)}}}}else{for(var e=0;e<f;e++){k[l][e]=this.getInputDivider(h[l],e)}}}for(var e=g.visibleCount;e<g.visibleMax;e++){if(g.visibleCount<=e){for(var l=0;l<h.length;l++){if(k[l][e]){k[l][e].style.display="none"}}}}}};d.getInputDivider=function(e,g){var f=document.getElementById("KJE-"+e+""+(g+1));return(f?f:false)};d.addMoreDropper=function(e,f){KJE.iAddMoreDropperCount++;f=(f?f:KJE.iAddMoreDropperCount);this.oAddMores[f-1].AddMoreDropper=e};d.addMore=function(k){var f=this.oAddMores[k].sRows;var e=this.oAddMores[k].oRowsToShow;var h=this.oAddMores[k].visibleCount;var j=this.oAddMores[k].visibleMax;if(h<j){for(var i=0;i<f.length;i++){if(e[i][h]){e[i][h].style.display="block"}}}else{document.getElementById("KJEAddMore"+(k+1)).style.display="none"}h++;this.oAddMores[k].visibleCount=h;var g=this.oAddMores[k].AddMoreDropper;var l=(g._iHeight?g._iHeight:0);g._idDroppee.style.height="100%";setTimeout(function(){g._iHeight=g._idDroppee.offsetHeight-KJE._idDroppeePadding;g._idDroppee.style.height=g._iHeight+"px";if(KJE.InputFieldPosition=="static"){KJE.Calculator.style.height="auto"}else{KJE.Calculator.style.height=KJE.Main.offsetHeight+"px"}},250)}}d.addMoreInit(c,a,b,KJE.iAddMoreCount);KJE.iAddMoreCount++};KJE.getScreenCoord=function(g,a,b){var f=0;var e=0;do{f+=b.offsetLeft;e+=b.offsetTop}while(b=b.offsetParent);var d=f+g;var c=e+a;return{x:d,y:c}};KJE.getMouseCoord=function(a,j,c){var n=0;var m=0;do{n+=j.offsetLeft;m+=j.offsetTop}while(j=j.offsetParent);var h=0;var e=0;var g=a.pageX;if(g==null){var b=document.documentElement;var l=(b&&b.scrollLeft!=null)?b:document.body;h=a.clientX+l.scrollLeft;e=a.clientY+l.scrollTop}else{if(c){var k=a.touches[0];h=k.pageX;e=k.pageY}else{h=g;e=a.pageY}}var i=h-n;var f=e-m;return{x:i,y:f}};KJE.sIncomplete="?";KJE.DropperColors=false;KJE.iDropperCount=0;KJE.sToggleTitle="<span class='KJEAccessible'>**TITLE_TEXT**</span><table **EXPANDED** class='KJEToggleTable' "+KJE.MSG_ADA_TABLE+"><tr><td class='**TITLE_CLASS** KJEToggleTitle99Cell'><h2 class='**TITLE_CLASS**'>**TITLE_TEXT**</h2><span class='KJEAccessibleInLine' aria-live='polite'><br>**IMG_TEXT**</span></td><td class='KJEToggleIcon **IMG**'>**ICON**</td></tr></table>";KJE.sToggleTitle1="<span class='KJEAccessible'>**TITLE_TEXT**</span><table **EXPANDED** class='KJEToggleTable' style='margin-left: 8px; margin-bottom: 8px;' "+KJE.MSG_ADA_TABLE+"><tr><td class='**TITLE_CLASS** KJEToggleTitle100Cell'><h2 class='**TITLE_CLASS**'>**TITLE_TEXT**</h2><span class='KJEAccessibleInLine' aria-live='polite'><br>**IMG_TEXT**</span></td></tr></table>";KJE.sToggleTitleH2Only="<div class='KJEToggleTitle100Cell' style='margin-left: 8px; margin-bottom:8px'><h2 class='**TITLE_CLASS**'>**TITLE_TEXT**</h2></div>";KJE.sToggleTitle2="<span class='KJEAccessible'>**TITLE_TEXT**</span><table **EXPANDED** class='KJEToggleTable' "+KJE.MSG_ADA_TABLE+"><tr><td class='**TITLE_CLASS** KJEToggleTitle49Cell'><h2 class='**TITLE_CLASS**'>**TITLE_TEXT**</h2><span class='KJEAccessibleInLine' aria-live='polite'><br>**IMG_TEXT**</span></td><td class='**TITLE_CLASS** KJEToggleTitle99Cell'>**TITLE_TEXT2**</td><td class='KJEToggleIcon **IMG**'>**ICON**</td></tr></table>";KJE.MSG_DEFINE_PREFIX="Define: ";KJE.MSG_DEFINE_HELPICON="?";KJE.MSG_DEFN_CLOSE_LABEL="Close definition";KJE.MSG_SLIDER="slider";KJE.ErrorsDisplayAfterInputField=false;KJE.POPUP_REQUIRED_MSG=true;KJE.HELP_ON_ICON_ONLY=false;KJE.sToggleAltTextClose="Press spacebar to show inputs";KJE.sToggleAltTextOpen="Press spacebar to hide inputs";KJE.sToggleTitleClass="KJEToggleTitle";KJE.sInputDescTextClass="KJESubTitle";KJE.sInputDescAlignDefault="KJERight";KJE.sToggleIcon="KJEInputIcon";KJE.sToggleOpen="<div class='KJEToggleOpen' aria-hidden='true'></div>";KJE.sToggleClose="<div class='KJEToggleClose' aria-hidden='true'></div>";KJE.sExpand="aria-expanded";KJE.sExpanded="";KJE.sCollapse="";KJE.DefinitionIconPosition=0;KJE.DefinitionIconPositionLeft=0;KJE.DefinitionIconPositionRight=1;KJE.DefinitionIconPositionLeftOut=2;KJE.DefinitionIconPositionRightOut=3;KJE.DefinitionIconPositionLeftNonDefn=4;KJE.DefinitionIconPosition5=5;KJE.DefinitionIconPositionAsIs=6;KJE.InputFieldPosition="absolute";KJE.InputFieldDisplay="inline-block";KJE.DropeeTransition="height 0.5s";KJE.bShowSliders=true;KJE.FMT_NUMBER=0;KJE.FMT_DOLLARS=1;KJE.FMT_PERCENT=2;KJE.FMT_INPUT=3;KJE.FMT_YESNO=4;KJE.FMT_STRING=5;KJE.FMT_SOCIALSECURITY=6;KJE.sCP="$";KJE.sCS="";KJE.sPP="";KJE.sPS="%";KJE.sNP="";KJE.sNS="";KJE.sPC=",";KJE.sPD=".";KJE.sCC=",";KJE.sCD=".";KJE.bEuropeDecimals=false;KJE.ACCOUNTING_NEGATIVE=false;KJE.format=new Array();KJE.iDPItemHeight=28;KJE.iDPDropHeight=KJE.iDPItemHeight;KJE.iDPInputHeight=22;KJE.iDPInputTop=2;KJE.iDPInputPad=5;KJE.iDPSliderPad=0;KJE.iDPDropBoxPad=4;KJE.iDPDropBoxModernPad=20;KJE.iDPDroppeeForceSize=false;KJE.DataPointX=0;KJE.DataPointY=0;KJE.bNoLabel=false;KJE.bPlusMinus=false;KJE.TwoLineEntry=false;KJE.RadioesTwoLineEntry=false;KJE.SetLabelLength=true;KJE.iDPRowHeight=32;KJE.iRadioPad=5;KJE.subText=function(a,c,b){c=KJE.sInputDescTextClass+" "+(c?c:KJE.sInputDescAlignDefault);b=(b?b:"div");return"<"+b+" class='"+c+"'>"+a+"</"+b+">"};KJE.nbr=function(p,e,b,m,c,q,o){var s=KJE;if(!p){p=0}q=q||false;c=c||false;b=b||"";m=m||"";e=e||0;if(e>10){e=10}var f=s.round(p,e);var j=(f<0);if(j){f*=-1}var h=(f+"").split(".");var g="";if(e>0){if(!h[1]){if(!c){g=("0000000000").substr(0,e)}}else{if(h[1].length==e){g=h[1]}else{g=h[1]+(c?"":("0000000000").substr(0,e-h[1].length))}}if(g.length>0){g=s.sPD+g}}var a="";if(!q&&(f>999)){var k=h[0].length;if(k%3>0){a=h[0].substr(0,k%3)+s.sPC}for(var d=k%3;d<k;d+=3){a+=h[0].substr(d,3)+(d+3<k?s.sPC:"")}}else{a=h[0]}if(a==""){a="0"}if(o&&o>a.length){a=("0000000000"+a);a=a.substring(a.length-o)}return(j?(s.ACCOUNTING_NEGATIVE?"(":"-"):"")+b+a+g+m+(s.ACCOUNTING_NEGATIVE&&j?")":"")};KJE.format[KJE.FMT_NUMBER]=function(a,b){return KJE.nbr(a,b,"","",true,false)};KJE.number=KJE.format[KJE.FMT_NUMBER];KJE.format[KJE.FMT_DOLLARS]=function(a,b){return KJE.nbr(a,b,KJE.sCP,KJE.sCS,false,false)};KJE.dollars=KJE.format[KJE.FMT_DOLLARS];KJE.format[KJE.FMT_PERCENT]=function(a,b){return KJE.nbr(a*100,b,KJE.sPP,KJE.sPS,true,false)};KJE.percent=KJE.format[KJE.FMT_PERCENT];KJE.format[KJE.FMT_SOCIALSECURITY]=function(a){var b=KJE.nbr(a,0,"","",true,true,9);return b.substr(0,3)+"-"+b.substr(3,2)+"-"+b.substr(5,4)};KJE.socialsecurity=KJE.format[KJE.FMT_SOCIALSECURITY];KJE.format[KJE.FMT_INPUT]=function(a,b,c){return KJE.nbr(a,b,"","",true,true,c)};KJE.input=KJE.format[KJE.FMT_INPUT];KJE.format[KJE.FMT_YESNO]=function(a){return(a?KJE.YES:KJE.NO)};KJE.yesno=KJE.format[KJE.FMT_YESNO];KJE.round=function(b,a){return(a?(Math.round(b*(Math.pow(10,a))))/(Math.pow(10,a)):Math.round(b))};KJE.appendSpan=function(e,b,a,d){var c=document.createElement("span");c.setAttribute("id",b);c.className=a;c.innerHTML=d;e.appendChild(c);return c};KJE.setLabelWrap=function(e,h,d,g,c,f,b){if(!g){if(b||e==KJE.TypeLabel||e==KJE.TypeRadios){h._oLabel=document.createElement("div")}else{h._oLabel=document.createElement("label");var a=document.createAttribute("for");a.value=d;h._oLabel.setAttributeNode(a)}if(f){h._oLabel.className=f}h.appendChild(h._oLabel)}if(c){KJE.setLabelText(h,c)}};KJE.setLabelText=function(b,a){if(b._oLabel){b._oLabel.innerHTML=a}else{b.innerHTML=a}};KJE.SliderKnobExtraClass=false;KJE.SliderKnobSize=12;KJE.SliderLeftMargin=12;KJE.SliderKnobVertAdj=-3;KJE.SliderLabelVertAdj=0;KJE.LabelLength=190;KJE.InputLength=80;KJE.RightPad=10;KJE.LabelLeftMargin=0;KJE.InputTotalLength=KJE.LabelLeftMargin+KJE.LabelLength+KJE.InputLength+KJE.RightPad;KJE.SliderMinLength=130;KJE.TypeNone=0;KJE.TypeNumber=1;KJE.TypeString=2;KJE.TypeDate=3;KJE.TypeRadio=4;KJE.TypeRadios=8;KJE.TypeCheckbox=5;KJE.TypeDropBox=6;KJE.TypeLabel=7;KJE.SliderScale=new Object();KJE.s_scale=new Array(10);KJE.s_scale[0]=[0,1000,5000,10000,10,50,100];KJE.s_scale[1]=[0,1000,5000,20000,10,50,200];KJE.s_scale[2]=[0,1000,10000,100000,50,100,1000];KJE.s_scale[3]=[0,10000,100000,500000,250,1000,5000];KJE.s_scale[4]=[0,10000,100000,1000000,250,1000,10000];KJE.s_scale[5]=[0,100000,1000000,10000000,500,10000,100000];KJE.s_scale[6]=[0,500,2500,5000,10,50,100];KJE.s_scale[7]=[0,100,500,1000,5,25,50];KJE.s_scale[8]=[0,24,48,72,6,6,6];KJE.s_scale[9]=[0,100,200,300,10,10,10];KJE.s_label=new Array(10);KJE.k="k";KJE.m="m";KJE.s_label[0]=["$0","$1k","$5k","$10k"];KJE.s_label[1]=["$0","$1k","$5k","$20k"];KJE.s_label[2]=["$0","$1k","$10k","$100k"];KJE.s_label[3]=["$0","$10k","$100k","$500k"];KJE.s_label[4]=["$0","$10k","$100k","$1m"];KJE.s_label[5]=["$0","$100k","$1m","$10m"];KJE.s_label[6]=["$0","$500","$2.5k","$5k"];KJE.s_label[7]=["$0","$100","$500","$1k"];KJE.s_label[8]=["0","24","48","72"];KJE.s_label[9]=["$0","$100","$200","$300"];KJE.MakeScale=function(a,e,c,f,h,g,d){var b=this;b._Min=a;b._Mid1=e;b._Mid2=c;b._Max=f;b._stepMin=h;b._stepMid=g;b._stepMax=d;b._range=100};KJE.useScale=function(b){var a=KJE;var c=a.s_scale[b];return new a.MakeScale(c[0],c[1],c[2],c[3],c[4],c[5],c[6])};KJE.s_Translate=function(a,b,h,g,f,c,j,i){var e=0;if(a>66.66){e=Math.round(((g+((a-66.66)/33.33)*(f-g))/i))*i}else{if(a>33.33){e=Math.round(((h+((a-33.33)/33.33)*(g-h))/j))*j}else{if(a>0){e=Math.round(((a/33.33)*(h-b)/c))*c+b}else{e=b}}}return(e>f?f:e)};KJE.s_Untranslate=function(b,a,e,c,f){var g=0;if(b>f){return 100}else{if(b>c){g=66.66+((b-c)*33.33)/(f-c)}else{if(b>e){g=33.33+((b-e)*33.33)/(c-e)}else{g=((b-a)*33.33)/(e-a)}}}return(g<0?0:g)};KJE.Slider=function(g,i,f,c,e,k,a,j,b,d,h){return new KJE.InputItem(d,KJE.TypeNumber,g,i,true,"KJE-"+g,f,c,0,e,k,a,(h?false:j),(h?null:b))};KJE.MortgageAmtSlider=function(f,e,b,d,c){var a=KJE;return a.Slider(f,e,a.Default.MortgageMin,a.Default.MortgageMax,d?d:0,a.FMT_DOLLARS,0,[a.dollars(a.Default.MortgageMin/1000)+a.k,a.dollars(200)+a.k,a.dollars(500)+a.k,a.dollars(1)+a.m],new a.MakeScale(0,200000,500000,1000000,5000,10000,20000),b,c)};KJE.LoanAmtSlider=function(e,d,b,c){var a=KJE;return a.Slider(e,d,a.Default.MortgageMin,a.Default.MortgageMax,0,a.FMT_DOLLARS,0,[a.dollars(a.Default.MortgageMin/1000)+a.k,a.dollars(5)+a.k,a.dollars(25)+a.k,a.dollars(100)+a.k],new a.MakeScale(0,5000,25000,100000,100,500,1000),b,c)};KJE.MortgageTermSlider=function(f,d,e,b,c){var a=KJE;return a.Slider(f,d,a.Default.MortgageTermMin,a.Default.MortgageTermMax,0,a.FMT_NUMBER,(e?e:a.Default.MortgageTermIncrement),[a.Default.MortgageTermMin,a.number(Math.floor((a.Default.MortgageTermMax-a.Default.MortgageTermMin)*0.334+a.Default.MortgageTermMin)),a.number(Math.floor((a.Default.MortgageTermMax-a.Default.MortgageTermMin)*0.667+a.Default.MortgageTermMin)),a.number(a.Default.MortgageTermMax)],null,b,c)};KJE.MortgageTermDropBoxSlider=function(e,d,c){var a=KJE;var b=a.getMortgageTermList().v;return a.DropBoxSlider(e,d,b)};KJE.NumberSlider=function(i,k,b,g,e,a,f,c,h,j){var d=(h?true:false);c=(c?c:b);h=(h?h:g);a=(a?a:1);var m=KJE;var l=[m.number(c),m.number(Math.floor((h-c)*0.334+c)),m.number(Math.floor((h-c)*0.667+c)),m.number(h)];return m.Slider(i,k,b,g,(e?e:0),m.FMT_NUMBER,a,l,(d?new m.MakeScale(c,Math.floor((h-c)*0.334+c),Math.floor((h-c)*0.667+c),h,a,a,a):null),f,j)};KJE.InputSlider=function(f,j,b,e,c,h,a,d,i){var k=KJE;var g=k.Slider(f,j,b,e,c?c:0,k.FMT_INPUT,(a?a:1),[b,k.input(Math.floor((e-b)*0.334+b)),k.input(Math.floor((e-b)*0.667+b)),k.input(e)],null,d,i);g._iPadding=h;g.setValue(g.getValue(),true);return g};KJE.DollarSlider=function(h,k,b,f,c,a,e,d,j){e=(e>=0&&e<=9?e:-1);var l=KJE;if(e==-1){for(var g=0;g<=7;g++){if(l.s_scale[g][3]==f){e=g;break}}}if(e!=-1){return l.Slider(h,k,b,f,(c?c:0),l.FMT_DOLLARS,1,l.s_label[e],l.useScale(e),d,j)}return l.Slider(h,k,b,f,(!c&&c!=0?2:c),l.FMT_DOLLARS,(a?a:10),[l.dollars(b),l.dollars(Math.floor((f-b)*0.334+b)),l.dollars(Math.floor((f-b)*0.667+b)),l.dollars(f)],null,d,j)};KJE.ZipcodeInput=function(e,d,b){var a=KJE;var c=new KJE.InputItem(b,KJE.TypeNumber,e,d,true,"KJE-"+e,0,99999,0,0,a.FMT_INPUT,0,false);c._iPadding=5;c.setValue(c.getValue(),true);return c};KJE.SocialSecurityInput=function(e,d,b){var a=KJE;var c=new KJE.InputItem(b,KJE.TypeNumber,e,d,true,"KJE-"+e,-999999999,999999999,0,0,a.FMT_SOCIALSECURITY,0,false);c._iPadding=9;c.bAbsoluteValue=true;c.setValue(c.getValue(),true);return c};KJE.DollarInput=function(g,f,d,a,e,c){var b=KJE;return new KJE.InputItem(c,KJE.TypeNumber,g,f,true,"KJE-"+g,d,a,0,(!e&&e!=0?2:e),b.FMT_DOLLARS,0,false)};KJE.PercentInput=function(g,f,d,a,e,c){var b=KJE;return new KJE.InputItem(c,KJE.TypeNumber,g,f,true,"KJE-"+g,d,a,0,(!e&&e!=0?2:e),b.FMT_PERCENT,0,false)};KJE.PercentSlider=function(f,h,b,e,c,a,d,g){var i=KJE;var b=i.parameters.get("SLIDER_MIN_"+f,b);var e=i.parameters.get("SLIDER_MAX_"+f,e);var a=i.parameters.get("SLIDER_INC_"+f,a);return i.Slider(f,h,b,e,(!c&&c!=0?2:c),i.FMT_PERCENT,(a?a:0.1),[i.percent(b/100),i.percent(Math.floor((e-b)*0.334+b)/100),i.percent(Math.floor((e-b)*0.667+b)/100),i.percent(e/100)],null,d,g)};KJE.MortgageRateSlider=function(e,d,b,c){var a=KJE;return a.RateSlider(e,d,a.Default.MortgageRateMin,a.Default.MortgageRateMax,a.Default.MortgageRateMax,null,b,c)};KJE.InvestRateSlider=function(e,d,b,c){var a=KJE;return a.RateSlider(e,d,a.Default.InvestRateMin,a.Default.InvestRateMax,a.Default.InvestSliderRateMax,null,b,c)};KJE.InflationRateSlider=function(e,d,b,c){var a=KJE;return a.RateSlider(e,d,a.Default.InflationRateMin,a.Default.InflationRateMax,a.Default.InflationSliderRateMax,null,b,c)};KJE.preKJE=function(a){return(a?"KJE-"+a:null)};KJE.suffix=function(b,a){return(a?b+a:null)};KJE.RateSlider=function(f,n,i,d,h,a,c,k){a=a?a:0.5;i=i?i:0;d=d?d:25;h=h?h:12;var o=KJE;var j=o.percent;var g=h-i;var m=Math.floor(g*0.337+i);var l=Math.floor(g*0.667+i);var e=[j(i/100),j(m/100),j(l/100),j(h/100)];var b=new o.MakeScale(i,m,l,h,a,a,a);return o.Slider(f,n,i,d,3,o.FMT_PERCENT,0,e,b,c,k)};KJE.Nbr=function(f,g,e,a,b,h,d,c){var i=KJE;return new i.InputItem(c,i.TypeNumber,f,g,true,"KJE-"+f,e,a,0,b,h,0,false,false,i.suffix(f,"_TRAIL"),i.suffix(i.preKJE(f),"_TRAIL"),d,null,null,i.TypeLabel)};KJE.NbrDropBox=function(e,g,d,a,c,i,f,h,b){var j=KJE;return new j.InputItem(b,j.TypeNumber,e,g,true,"KJE-"+e,d,a,0,c,i,0,false,false,f,j.preKJE(f),(h?h:g))};KJE.Checkbox=function(e,d,f,b,c){var a=KJE;return new a.InputItem(c,a.TypeCheckbox,e,d,true,"KJE-"+e,0,0,f,0,0,0,false,false,null,null,b)};KJE.DropBoxString=function(f,d,e,b,c){var a=KJE;return new a.InputItem(c,a.TypeDropBox,f,d,true,"KJE-"+f,0,0,0,0,a.FMT_STRING,0,false,false,e,a.preKJE(e),b)};KJE.DropBox=function(f,d,e,b,c){var a=KJE;return new a.InputItem(c,a.TypeDropBox,f,d,true,"KJE-"+f,0,0,a.parameters.get(f,0),0,0,0,false,false,e,a.preKJE(e),b)};KJE.DropBoxSlider=function(d,c,e,b){var a=KJE;var f=[e[0],e[Math.floor(e.length*0.333)],e[Math.floor(e.length*0.666)],e[e.length-1]];return new a.InputItem(b,a.TypeDropBox,d,c,true,"KJE-"+d,0,e.length-1,0,0,0,1,f,null)};KJE.Label=function(f,d,e,b,c){var a=KJE;return new a.InputItem(c,a.TypeLabel,f,d,true,"KJE-"+f,0,0,0,0,0,0,false,false,e,a.preKJE(e),b)};KJE.StringInput=function(f,d,e,b,c){var a=KJE;return new a.InputItem(c,a.TypeString,f,d,true,"KJE-"+f,0,0,0,0,0,0,false,false,e,a.preKJE(e),b)};KJE.Date=function(f,d,e,b,c){var a=KJE;return new a.InputItem(c,a.TypeDate,f,d,true,"KJE-"+f,0,0,"TODAY",0,0,0,false,false,e,a.preKJE(e),b)};KJE.Radiobox=function(f,e,d,g,b,c){var a=KJE;return new a.InputItem(c,a.TypeRadio,e,d,(b?false:true),"KJE-"+e,0,0,g,0,0,0,false,false,null,null,b,null,f)};KJE.Radioboxes=function(g,f,h,d,b,e,c){var a=KJE;return new a.InputItem(e,a.TypeRadios,g,f,true,"KJE-"+g+"1",0,0,h,0,0,0,false,false,g,a.suffix(a.preKJE(g),"2"),d,b,null,c)};KJE.InputItem=function(ar,i,g,h,a,at,ak,Y,m,A,N,H,aD,l,z,I,am,J,au,B){var F=this;var ay=KJE;var ax=ay.setLabelWrap;var aq=ay.parameters;var ag=KJE.TwoLineEntry;var ac=KJE.TwoLineEntry||KJE.RadioesTwoLineEntry;F._inputType=i;F._name=g;F._inputRequired=(F._inputType!=ay.TypeLabel&&F._inputType!=ay.TypeRadios&&F._inputType!=ay.TypeRadio&&F._inputType!=ay.TypeCheckbox&&F.inputType!=ay.TypeDropBox&&KJE.InputItem.AltNotRequired!=true);F._inputTypeAdditional=ay.TypeNone;F._inputTypeAdditionalRequired=false;F._increment=Math.abs(H);F._decimals=A;F._iPadding=0;F._format=N;F._minimum=ak;F._maximum=Y;F._range=Y-ak;F.bShow=true;F.bValidate=true;F.bIncompleteCheck=true;F.bNoLabel=KJE.bNoLabel;F.vDefault=aq.get(F._name,m);F.oAdditional=I;F.bUseStoredForDefault=aq.get("USFD_"+F._name,true);F.bAbsoluteValue=false;F.idRG=null;F.bValueBeenSet=false;var T=aq.get("MSG_"+g+"1",am);var W=aq.get("MSG_"+g+"2",J);var ap=typeof document.createElement!="undefined"&&typeof document.documentElement!="undefined"&&typeof document.documentElement.offsetWidth=="number";if(!ap){return}F._sError="";F._bError=false;F._InComplete=false;F._mouseDown=false;ay.inputs.set(g,this);var aw=F._container=document.getElementById("KJE-C-"+F._name);if(!aw){F._inputType=ay.TypeNone;F.setValue(F.vDefault,true);return}aw.className="KJEInputContainer";var f=aw.style;aw.backgroundColor=f.backgroundColor;var x=aw.offsetWidth;F.bSlider=(aD!=false&&KJE.bShowSliders==true&&KJE.bNativeSlider);if(l){F._oScale=l}var d=ay.iDPInputPad;var K=F._inputField=document.getElementById(at);var X=F._iInputFieldDiv=document.getElementById(at+"Div");if(X==null&&KJE.InputFieldPosition=="static"){X=document.createElement("div");X.className="KJEInputFieldContainer";K.parentNode.insertBefore(X,K);X.appendChild(K)}var ah=K.style;K.name=(au?au:F._name);K.className=ay.InputClass;if(F._inputType!=ay.TypeRadio&&F._inputType!=ay.TypeRadios&&F._inputType!=ay.TypeCheckbox){ah.height=ay.iDPInputHeight-KJE.iDPInputTop+"px"}if(F._inputType!=ay.TypeRadios){ah.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop+"px";ah.position=KJE.InputFieldPosition}ah.display=KJE.InputFieldDisplay;K.resize=false;F._sLabel=aq.get("MSG_"+F._name,h);var ae=F._fieldset=document.getElementById("KJE-FS-"+F._name);if(ae){ae.className="KJEAccessibleFieldSet";var E=document.createElement("legend");E.className="KJEAccessibleFieldSetLegend";E.innerText=F._sLabel;ae.insertBefore(E,ae.firstChild)}var D=0;var af=false;if(h!=null&&ay.LabelLength!=0){af=true;ar=(ar?" "+ar:"");var c="KJE-D-"+(ay.InputItem.AltHelpName?ay.InputItem.AltHelpName:F._name);var V=document.getElementById(c);F.className=(V&&KJE.PopupDefinitions&&!KJE.HELP_ON_ICON_ONLY?"KJEHelp ":"KJELabel ")+ar;var aB=F.getLabelForInput(i,at,a,K,ay.ErrorsDisplayAfterInputField);F.spanInputRangeDesc=aB._oRangeSpan;F.spanInputRangeDescInnerHtml=(aB._oRangeSpan?aB._oRangeSpan.innerHTML:null);F.spanInputRequiredDesc=aB._oRequiredSpan;F.spanInputRangeID=aB._oRangeSpanName;try{aw.insertBefore(aB,ae?ae:(X?X:K))}catch(M){}if(V&&KJE.PopupDefinitions){KJE.AddDefinitionEvents(aB,V,F._sLabel,F._name,KJE.DefinitionIconPosition,K,null,null,KJE.HELP_ON_ICON_ONLY)}if(ay.TwoLineEntry){D=0}else{D=aB.offsetWidth;if(!D){D=ay.LabelLength}}var S=aB.offsetHeight;if(S+6>ay.iDPRowHeight){f.height=S+10+(ay.TwoLineEntry?ay.iDPRowHeight:0)+"px";aB.style.top="0px"}else{if(ay.TwoLineEntry){f.height=ay.iDPRowHeight*2+"px"}}}var o=D;var ai=0;K.indent=(ay.deviceInputPad?ay.deviceInputPad:d)+D;if(F.bNoLabel){K.indent=0;D=0}if(F._inputType==ay.TypeCheckbox){F._sTrailingText=T;F._sTrailingText2=W;ah.left=D+"px";if(T){var u=document.createElement("div");var an=u.style;ax(af?ay.TypeLabel:ay.TypeCheckbox,u,at,false,F._sTrailingText);u.className="KJETrailingLabel";an.position=KJE.InputFieldPosition;an.display=KJE.InputFieldDisplay;D=D+d*1.5+(K.offsetWidth?K.offsetWidth:15);an.left=D+"px";aw.appendChild(u);an.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+(ay.iDPInputHeight/4)+ay.iDPInputTop+"px";var S=u.offsetHeight;if(S+6>ay.iDPRowHeight){f.height=S+10+"px";an.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+"px"}D+=u.offsetWidth;F._label2=u}}else{if(F._inputType==ay.TypeRadio){F._sTrailingText=T;ah.left=D+ay.iRadioPad+"px";if(T){var u=document.createElement("div");var an=u.style;ax(i,u,at,false,F._sTrailingText);u.className="KJETrailingLabel";an.position=KJE.InputFieldPosition;an.display=KJE.InputFieldDisplay;if(B){K.title=(h?h+ay.Colon+" ":"")+F._sTrailingText}D=D+d*1.5+(K.offsetWidth?K.offsetWidth:15)+ay.iRadioPad;an.left=D+"px";ay.insertAfter(u,K);an.top=(ay.RadioesTwoLineEntry?ay.iDPRowHeight:0)+(ay.iDPInputHeight/4)+ay.iDPInputTop+"px";var S=u.offsetHeight;if(S+6>ay.iDPRowHeight){f.height=S+10+"px";an.top=(ay.RadioesTwoLineEntry?ay.iDPRowHeight:0)+"px"}D+=u.offsetWidth;u=u}}else{if(F._inputType==ay.TypeRadios){var x=ay.CalculatorWidth-ay.iDPInputPad*2;var q=document.createElement("div");var aj=q.style;aj.left=D+ay.iRadioPad+"px";aj.position=KJE.InputFieldPosition;aj.display=KJE.InputFieldDisplay;q.className="KJERadioFieldContainer";f.height=ay.iDPRowHeight*2+"px";var ao=(x-D>480);F._sTrailingText=T;F._sTrailingText2=W;var u=document.createElement("div");var an=u.style;ax(ay.TypeRadio,u,at,false,ao?ay.replace(" ","&nbsp;",F._sTrailingText,1):F._sTrailingText);u.className="KJERadioTrailingLabel";K.title=(h?h+ay.Colon+" ":"")+F._sTrailingText;var j=F._Additional=document.getElementById(I);var aA=j.style;F._inputTypeAdditional=ay.TypeRadios;j.name=(au?au:F._name);j.className=KJE.InputClass;var s=F._label3=document.createElement("div");var az=s.style;ax(ay.TypeRadio,s,I,false,ao?ay.replace(" ","&nbsp;",F._sTrailingText2,1):F._sTrailingText2);s.className="KJERadioTrailingLabel";j.title=(h?h+ay.Colon+" ":"")+F._sTrailingText2;var ab=document.createElement("div");ab.className="KJERadioHolder";var aa=document.createElement("div");aa.className="KJERadioHolder";q.className="KJERadioes";K.parentNode.insertBefore(q,K);ab.appendChild(K);ab.appendChild(u);aa.appendChild(j);aa.appendChild(s);q.appendChild(ab);q.appendChild(aa);ab.style.width=u.offsetWidth+30+"px";aa.style.width=s.offsetWidth+30+"px";var aF=u.offsetHeight;var aE=s.offsetHeight;if(aF+6>ay.iDPRowHeight){ab.style.height=aF+(ay.RadioesTwoLineEntry?ay.iDPRowHeight:0)+"px"}if(aE+6>ay.iDPRowHeight){aa.style.height=aE+(ay.RadioesTwoLineEntry?ay.iDPRowHeight:0)+"px"}var O=ab.offsetHeight;if(u.offsetWidth+s.offsetWidth+80>x-D){f.height=ay.iDPRowHeight*2+(ay.RadioesTwoLineEntry?ay.iDPRowHeight:0)+"px"}else{if(ay.RadioesTwoLineEntry){f.height=ay.iDPRowHeight*2+"px"}else{f.height=ay.iDPRowHeight+"px"}}j.addEventListener("change",ay.dataChanged,false)}else{if(F._inputType==ay.TypeDropBox){K.className="KJEDropBox";var av=((ay.deviceInputPad?ay.deviceInputPad:d)+D);var P=ay.iDPDropHeight-ay.iDPInputTop;var p=ay.InputLength+KJE.iDPDropBoxPad;if(X){var C=X.style;X.className="KJEDropBoxDivModern";K.className="KJEDropBox KJEDropBoxModern";C.height=ay.iDPInputHeight-KJE.iDPInputTop-2+"px";C.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop-1+"px";C.position=KJE.InputFieldPosition;C.display=KJE.InputFieldDisplay;C.left=av+"px";C.height=P+"px";C.width=p+"px";ah.width=p+KJE.iDPDropBoxModernPad+"px";ah.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop+"px"}else{ah.width=p+"px";ah.left=av+"px";ah.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop+"px"}ah.height=P+"px";if(!T&&!F.bSlider){K.indent=((ay.deviceInputPad?ay.deviceInputPad:KJE.iDPDropBoxPad)+D)+d;K.resize=true}KJE.InputItem.bDropBoxRequired(g,K)}else{if(F._inputType==ay.TypeLabel){K.className="KJEOutputLabel "+ar;ah.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+(ay.iDPInputHeight/4)+ay.iDPInputTop+"px";ah.left=(D+d)+"px";K.indent+=ay.deviceInputPad;if(T){ah.width=ay.InputLength+d+"px"}else{K.resize=true}ah.height=ay.iDPItemHeight-2+"px"}else{if(F._inputType==ay.TypeString||F._inputType==ay.TypeDate){ah.left=((ay.deviceInputPad?ay.deviceInputPad:d)+D)+"px";if(T||F.bSlider||F._inputType==ay.TypeDate){ah.width=ay.InputLength+"px"}else{K.indent=((ay.deviceInputPad?ay.deviceInputPad:d)+D)+d;K.resize=true}}else{ah.width=ay.InputLength+"px";if(ay.deviceUseNumberType){var r=document.createElement("div");var aG=r.style;r.className="KJELabelBold";aG.position=KJE.InputFieldPosition;aG.display=KJE.InputFieldDisplay;aG.width=ay.deviceInputPad+"px";aG.left=D+"px";aG.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+(ay.iDPInputHeight/4)+ay.iDPInputTop+"px";if(N==ay.FMT_DOLLARS){r.innerHTML=ay.sCP+ay.sCS}else{if(N==ay.FMT_PERCENT){r.innerHTML=ay.sPP+ay.sPS}else{r.innerHTML=""}}aG.height=ay.iDPInputHeight+"px";aw.appendChild(r);d=r.offsetWidth+1}if(ay.deviceUseNumberType&&F._maximum<1000&&!(KJE.bEuropeDecimals&&F._decimals>0)){K.type="number";if(F._decimals>0){K.setAttribute("step","any")}}ah.left=(D+d)+"px"}}}}}}if(I&&ay.TypeRadios!=F._inputType){var j=F._Additional=document.getElementById(I);if(F._Additional){var aA=j.style;aA.position=KJE.InputFieldPosition;aA.display=KJE.InputFieldDisplay;aA.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop+"px";var x=ay.CalculatorWidth-ay.iDPInputPad*2;j.setAttribute("aria-required","true");F._inputTypeAdditional=ay.TypeDropBox;var L=F._AdditionalDiv=document.getElementById(I+"Div");j.name=z;j.className="KJEDropBox";j.setAttribute("aria-label",T);var k=ay.iDPDropHeight-ay.iDPInputTop;var ad=D+(ay.offsetWidth?ay.offsetWidth(K):K.offsetWidth)+5+d*2;var n=ad-d;var Z=x-ad;if(L){var U=L.style;L.className="KJEDropBoxDivModern";j.className="KJEDropBox KJEDropBoxModern";U.position=KJE.InputFieldPosition;U.display=KJE.InputFieldDisplay;U.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop-1+"px";U.height=k+"px";U.left=n+"px";U.width=Z+"px";aA.left=0+"px";aA.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+ay.iDPInputTop+"px"}else{aA.left=n+"px"}aA.width=Z+"px";aA.height=k+"px";j.indent=ad;if(Z<ay.SliderMinLength&&aw.offsetWidth){aA.top=ay.iDPRowHeight+"px";f.height=(ay.iDPRowHeight*2)+"px"}j.addEventListener("change",ay.dataChanged,false)}else{if(T){F._inputTypeAdditional=ay.TypeLabel;F._sTrailingText=T;var u=document.createElement("div");var an=u.style;ax(i,u,I,false,F._sTrailingText,null,(h?true:false));u.className="KJETrailingLabel";an.position=KJE.InputFieldPosition;an.display=KJE.InputFieldDisplay;an.left=((D+(ay.deviceInputPad?ay.deviceInputPad:d)+d)+ay.InputLength+5)+"px";an.top=(ay.TwoLineEntry?ay.iDPRowHeight:0)+((ay.iDPInputHeight/4)+ay.iDPInputTop)+"px";an.height=ay.iDPInputHeight+"px";F._Additional=u;j=F._Additional=u;F._label2=u;aw.appendChild(u)}}}else{if(F.bSlider){var ai=((D+(ay.deviceInputPad?ay.deviceInputPad:d)+d)+ay.InputLength+ay.SliderLeftMargin);var P=ay.iDPItemHeight;var y=F._slider=document.createElement("div");var G=y.style;y.setAttribute("aria-hidden","true");if(!KJE.bPlusMinus){y.labels=F.setLabelSlider(P,aD,y);y.labels.indent=ai;G.position=KJE.InputFieldPosition;G.display=KJE.InputFieldDisplay;G.left=ai+"px";y.className="KJESlider"}else{y.className="KJEIncrementer";G.position=KJE.InputFieldPosition;G.display=KJE.InputFieldDisplay;G.left=ai+d+"px"}if(ay.TwoLineEntry){G.top=ay.iDPRowHeight+"px"}y.indent=ai;y.unselectable="on";G.height=P+"px";y.bMO=true;if(X&&KJE.InputFieldPosition=="static"){X.appendChild(F._slider)}else{aw.appendChild(F._slider)}if(KJE.bPlusMinus){var b=F._plus=document.createElement("div");var aC=F._minus=document.createElement("div");var al=b.style;var w=aC.style;aC.className="KJEIncrementControl KJEIncrementMinus";b.className="KJEIncrementControl KJEIncrementPlus";w.bMouseoutignore=al.bMouseoutignore=true;w.unselectable=al.unselectable="on";w.position=al.position="relative";w.cursor=al.cursor="pointer";y.appendChild(F._minus);y.appendChild(F._plus);F.AddPlusMinusEvents(b,aC)}else{var t=F._line=document.createElement("input");t.setAttribute("type","range");t.setAttribute("aria-hidden","true");t.setAttribute("min","0");t.setAttribute("max","100");t.setAttribute("step",".01");if(KJE.showSliderTitle){t.title=KJE.FTR(F._sLabel+" "+KJE.MSG_SLIDER)}t.tabIndex="-1";t.style.height=(ay.iDPRowHeight/2+2)+"px";t.style.outline="none";t.className="KJERange";var Q=t.style;t.bMouseoutignore=true;t.unselectable="on";Q.position="relative";Q.cursor="pointer";y.appendChild(F._line);var R=ay.SliderKnobSize;F.bSetRange=true;F.AddNativeEvents(t);Q.left="0px";F._posAdjust=0}}}F.vDefault2=(F._inputTypeAdditional!=ay.TypeNone?F._Additional.value:null);ay.InputItem.InputSetValues(F,F.vDefault,F.vDefault2,true);F.AddInputEvents(K);if(aq.get(g+"_HIDE",false)){F.bValidate=false;F.hide()}if(aq.get(g+"_DISABLE",KJE.bLockDown?true:false)){F.disable()}};KJE.InputItem.bDropBoxRequired=function(b,a){var c=true;if(KJE.parameters.get(b+"_HIDE",false)){c=false}else{if(KJE.parameters.get(b+"_DISABLE",KJE.bLockDown?true:false)){c=false}}KJE.InputItem.setRequiredAttribute(a,c);return};KJE.InputItem.prototype.getLabelForInput=function(c,h,f,b,d){var a=this;var i=KJE;var g=a._label=document.createElement("div");var e=g.style;e.position=KJE.InputFieldPosition;e.display=KJE.InputFieldDisplay;if(i.SetLabelLength){e.width=i.LabelLength+"px"}e.left=KJE.LabelLeftMargin+"px";e.top=(i.iDPInputHeight/4)+i.iDPInputTop+"px";i.setLabelWrap(c,g,h,!f,null,a.className);g.className=a.className;if(g._oLabel){g._oLabel.setAttribute("id","KJE-LB-"+a._name);g._oTextSpan=i.appendSpan(g._oLabel,"KJE-RT-"+a._name,a.className,a.bNoLabel?"":a._sLabel);g._oColonSpan=i.appendSpan(g._oLabel,"KJE-RC-"+a._name,a.className,a.bNoLabel?"":i.Colon);g._oRequiredSpan=null;if(a._inputRequired){g._oRequiredSpan=i.appendSpan(d?b.parentNode:g._oLabel,"KJE-RR-"+a._name,"KJERequired",i.InputItem.getRequiredSymbol(a._inputRequired))}g._oRangeSpan=null;if(a._inputType==i.TypeNumber){g._oRangeSpanName="KJE-RG-"+a._name;g._oRangeSpan=i.appendSpan(d?b.parentNode:g._oLabel,g._oRangeSpanName,"KJEAccessibleInLine",i.getKJEReplaced(i.MSG_VALID_RANGE,i.format[a._format](a._minimum/(a._format==i.FMT_PERCENT?100:1),a._decimals),i.format[a._format](a._maximum/(a._format==i.FMT_PERCENT?100:1),a._decimals)))}else{if(a._inputType==i.TypeDate){g._oRangeSpanName="KJE-RG-"+a._name;g._oRangeSpan=i.appendSpan(d?b.parentNode:g._oLabel,g._oRangeSpanName,"KJEAccessibleInLine",i.getKJEReplaced(i.MSG_INVALID_DATE,a._sLabel))}}}return g};KJE.InputItem.prototype.setInputItemRequired=function(b){var a=this;a._inputRequired=b;KJE.InputItem.setRequiredAttribute(a._inputField,b);if(a._label._oRequiredSpan){a._label._oRequiredSpan.innerHTML=KJE.InputItem.getRequiredSymbol(b)}};KJE.InputItem.getRequiredSymbol=function(a){return(a?KJE.MSG_REQUIRED_SYMBOL:KJE.MSG_NOTREQUIRED_SYMBOL)};KJE.InputItem.setRequiredAttribute=function(a,b){if(a){a.setAttribute("aria-required",b?"true":"false")}};KJE.InputItem.InputSetValues=function(e,d,f,a){var c=KJE;var g=d;if(a&&e.bUseStoredForDefault){g=KJE.StorageGet(e._name,g)}switch(e._inputType){case c.TypeRadios:case c.TypeRadio:e._inputField.checked=g;if(e.oAdditional){e._Additional.checked=!e._inputField.checked}break;case c.TypeCheckbox:e._inputField.checked=g;break;case c.TypeDropBox:var b=c.setDropBox(e._inputField,g);e._InComplete=false;if(b==0&&KJE.bFirstNotValid){e._InComplete=true}break;case c.TypeLabel:e._inputField.innerHTML=g;break;case c.TypeDate:e._inputField.value=g;e.setTypedDate(true);break;case c.TypeString:e._inputField.value=g;e.setTypedString(true);break;case c.TypeNumber:e._inputField.value=g;e.setTypedValue(true)}if(e._inputTypeAdditional!=c.TypeNone){var g=f;if(a&&e.bUseStoredForDefault){g=c.StorageGet(e._Additional.name,e.vDefault,e.bUseStoredForDefault)}switch(e._inputTypeAdditional){case c.TypeDropBox:var b=c.setDropBox(e._Additional,g);e._InComplete=false;if(b==0&&KJE.bFirstNotValid){e._InComplete=true}break;case c.TypeDate:e._Additional.value=g;break;case c.TypeString:e._Additional.value=g;break;case c.TypeNumber:e._Additional.value=g;e.setTypedValue(true)}}};KJE.InputItem.AltHelpName=false;KJE.AddDefinitionEvents=function(n,p,j,k,c,e,i,o,g,h){var m=50;var l=KJE.iDPInputHeight-5;var b=document.createElement("div");b.className="KJEGuiDefnPopup"+(o?" "+o:"");b.id="KJE-PODEFN-"+k;if(e){if(!g){e.sDescribedBy=b.id;e.setAttribute("aria-describedby",e.sDescribedBy)}}var d=h;if(d==null){d=document.createElement("button");d.id="KJE-PO-"+k;var a="PO-"+k}d.setAttribute("aria-label",KJE.MSG_DEFINE_PREFIX+j);d.className="KJEDefinitionIcon"+(i?" "+i:"");d.innerHTML=KJE.MSG_DEFINE_HELPICON;d.tabIndex="0";d.setAttribute("type","button");d.id_closebutton="KJE-POCLOSE-"+k;b.innerHTML='<button id="'+d.id_closebutton+'" class="KJECloseButton" type="button" aria-label="'+KJE.MSG_DEFN_CLOSE_LABEL+" "+j+'" tabindex="0">X</button><div class=KJEDefinitionPopup>'+(p.innerHTML?p.innerHTML:p)+"</div>";var c=(c?c:KJE.DefinitionIconPosition);if(c==1){n.appendChild(d)}else{if(c==0){n.insertBefore(d,n.firstChild)}else{if(c==2){n.insertBefore(d,n)}else{if(c==4){n.insertBefore(d,n.firstChild)}else{if(c==3||c==5){KJE.insertAfter(d,n)}}}}}n.parentNode.appendChild(b);b.setAttribute("aria-hidden","true");b.setAttribute("role","dialog");b.setAttribute("aria-label",KJE.MSG_DEFINE_PREFIX+j);if(KJE.WindowsOS){d.addEventListener("mouseover",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint==b){}else{KJE.DefnPointShow(b,m,l,n,60000,k,c)}q.preventDefault()},false);d.addEventListener("mouseout",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint==b){KJE.DefnPointHide()}q.preventDefault()},false)}d.addEventListener("focus",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint!=b){KJE.DefnPointHide()}q.preventDefault()},false);var f=document.getElementById(d.id_closebutton);if(f){f.addEventListener("click",function(q){KJE.DefnPointHide(a)},false)}if(g){d.addEventListener("click",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint==b){KJE.DefnPointHide()}else{KJE.DefnPointShow(b,m,l,n,60000,k,c)}q.preventDefault()},false)}else{if(c<4){n.addEventListener("click",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint==b){KJE.DefnPointHide()}else{KJE.DefnPointShow(b,m,l,n,60000,k,c)}q.preventDefault()},false)}if(c>1){d.addEventListener("click",function(q){if(KJE.DefnPointTimeOut>0&&KJE.DefnPoint==b){KJE.DefnPointHide()}else{KJE.DefnPointShow(b,m,l,n,60000,k,c)}q.preventDefault()},false)}}};KJE.InputItem.prototype.AddPlusMinusEvents=function(c,a){var b=this;c.addEventListener("click",function(d){b.doIncrement(true)},false);a.addEventListener("click",function(d){b.doIncrement(false)},false)};KJE.InputItem.prototype.AddNativeEvents=function(b){var a=this;b.addEventListener("input",function(c){if(a.bSetRange){a.setRangeValue(c)}a.bSetRange=true},false);b.addEventListener("change",function(c){a.setRangeValue(c)},false)};KJE.InputItem.prototype.AddSliderEvents=function(c){var b=this;try{document.createEvent("TouchEvent");c.addEventListener("touchstart",function(d){d.preventDefault();b.doMouseDown(d,true)},false);c.addEventListener("touchmove",function(d){d.preventDefault();b.doMouseMove(d,true)},false);c.addEventListener("touchend",function(d){d.preventDefault();b.doMouseUp(d,true)},false);c.addEventListener("touchcancel",function(d){d.preventDefault();b.doMouseOut(d,true)},false)}catch(a){}c.addEventListener("mousemove",function(d){b.doMouseMove(d)},false);c.addEventListener("mousedown",function(d){b.doMouseDown(d)},false);c.addEventListener("mouseup",function(d){b.doMouseUp(d)},false);c.addEventListener("mouseout",function(d){b.doMouseOut(d)},false)};KJE.InputItem.prototype.AddInputEvents=function(b){var a=this;b.addEventListener("change",function(c){a.doBlur(c)},false);b.addEventListener("focus",function(c){a.doFocus(c)},false);b.addEventListener("keypress",function(c){if(c.keyCode==13){a.doBlur();return KJE.Dropper.stopBubble(c)}},false)};KJE.InputItem.prototype.doFocus=function(){var a=KJE;switch(this._inputType){case a.TypeRadio:case a.TypeRadios:case a.TypeCheckbox:case a.TypeDropBox:case a.TypeLabel:break;case a.TypeDate:case a.TypeString:case a.TypeNumber:this._inputField.select();if(this._inputField.value==this.getName()){this._inputField.value=""}}};KJE.InputItem.prototype.doBlur=function(){var b=KJE;var c=this;switch(c._inputType){case b.TypeRadio:case b.TypeRadios:case b.TypeCheckbox:b.dataChanged();break;case b.TypeDropBox:c._InComplete=false;var a=c._inputField.selectedIndex;if(a==0&&c.bFirstNotValid){c._InComplete=true}c.setSliderPosition(c._inputField.selectedIndex);b.dataChanged();break;case b.TypeDate:c.setTypedDate();break;case b.TypeString:c.setTypedString();break;case b.TypeNumber:c.setTypedValue()}};KJE.InputItem.prototype.doClick=function(b,a){this.setMouseValue(b,a)};KJE.InputItem.prototype.doMouseUp=function(c,a){var b=this;b._mouseDown=false};KJE.InputItem.prototype.doMouseOut=function(g,f){var b=this;var c=window.event;if(b._inputField.disabled){return}if(b._mouseDown){if(!g){var g=c}var d=c?g.srcElement:g.target;if(d.bMouseoutignore){return}var a=(g.relatedTarget)?g.relatedTarget:g.toElement;while(a!=d&&a.nodeName!="BODY"){a=a.parentNode}if(d!=a){b.doMouseUp()}}};KJE.InputItem.prototype.doMouseDown=function(c,b){var a=this;if(a._inputField.disabled){return}a._mouseDown=true;if(c){a.setMouseValue(c,b)}};KJE.InputItem.prototype.doMouseMove=function(c,b){var a=this;if(a._mouseDown){a.setMouseValue(c,b)}};KJE.InputItem.prototype.setRangeValue=function(a){v=this._line.value;this.setChangeValue(v/100)};KJE.InputItem.prototype.setMouseValue=function(h,g){var d=this;var a=KJE.getMouseCoord(h,d._slider,g);if(a.x>=0){var c=d._posAdjust;var f=d._slider.offsetWidth;var b=(a.x-c)/(f-c);this.setChangeValue(b)}};KJE.InputItem.prototype.setChangeValue=function(b){var c=this;var e=c._minimum;var f=c._maximum;var d=c._oScale;if(d){b=KJE.s_Translate(b*100,d._Min,d._Mid1,d._Mid2,d._Max,d._stepMin,d._stepMid,d._stepMax)}else{var a=c._increment;b=b*c._range+e;b=(a==1?Math.round(b):(Math.round(b/a)*a))}c._InComplete=false;c.setValue((b>f?f:(b<e?e:b)),false,true)};KJE.InputItem.prototype.doIncrement=function(d){var c=this;var a=c._format;var e=c._minimum;var f=c._maximum;if(a==KJE.FMT_PERCENT){iIncrement=1}else{if(f<20){iIncrement=0.5}else{if(f<100){iIncrement=1}else{if(f<250){iIncrement=5}else{if(f<1000){iIncrement=10}else{if(f<10000){iIncrement=100}else{iIncrement=1000}}}}}}var b=c.getValue()+(d?1:-1)*iIncrement;c._InComplete=false;c.setValue((b>f?f:(b<e?e:b)),false,true)};KJE.InputItem.prototype.validate=function(){var b=this;if(b.bValidate){if(b._bError){throw b._sError}var a=!(b.bIncompleteCheck&&b._InComplete);if(!a){b.setIncomplete()}return a}else{return true}};KJE.InputItem.prototype.setValue=function(p,b,j){var r=KJE;var l=this;var k=l._inputField;var g=l._format;var f=l._container;var i=l._inputType;var a=false;if(i==r.TypeNone){l._value=p;l._bError=false;return}else{if(i==r.TypeDate){var o=new Date();try{var c=new Array();if(p.indexOf("/")>0){c=p.split("/");c[0]=Math.round(c[0]);c[1]=Math.round(c[1]);c[2]=Math.round(c[2])}else{c[0]=Math.round(p.substring(0,2));c[1]=Math.round(p.substring(2,4));c[2]=Math.round(p.substring(4))}if(c[2]<100){c[2]+=2000}o=KJE.getDate(c[2],c[0],c[1])}catch(m){a=true}if(a){l._sError=r.getKJEReplaced(r.MSG_INVALID_DATE,l._sLabel);l._value=null}else{l._value=o;k.value=r.dateFormat(o)}}else{if(i==r.TypeString){k.value=p}else{if(i==r.TypeDropBox){k.selectedIndex=Math.round(p);l.setSliderPosition(p)}else{if(i==r.TypeLabel){k.innerHTML=p}else{if(i==r.TypeCheckbox){k.checked=p}else{if(l.bValidate){if(p>l._maximum){l._sError=r.getKJEReplaced(this.MSG_EXCEEDS_LIMIT_OF_RANGE?this.MSG_EXCEEDS_LIMIT_OF_RANGE:r.MSG_EXCEEDS_LIMIT_OF_RANGE,l._sLabel,r.format[g]((r.FMT_PERCENT==g?l._maximum/100:l._maximum),l._decimals,l._iPadding));a=true}else{if(p<l._minimum){l._sError=r.getKJEReplaced(this.MSG_UNDER_LIMIT_OF_RANGE?this.MSG_UNDER_LIMIT_OF_RANGE:r.MSG_UNDER_LIMIT_OF_RANGE,l._sLabel,r.format[g]((r.FMT_PERCENT==g?l._minimum/100:l._minimum),l._decimals,l._iPadding));a=true}}}var q=l._value=r.round(p,l._decimals);var h="";if(r.deviceUseNumberType&&(g==r.FMT_DOLLARS||g==r.FMT_PERCENT)){h=r.nbr(q,l._decimals,"","",true,false)}else{h=r.format[g]((g==r.FMT_PERCENT?q/100:q),l._decimals,l._iPadding)}k.value=r.replace("&nbsp;"," ",h);l.setSliderPosition(q)}}}}}}l._bError=a;if(a){l.setError()}else{l.setGoodInput()}if(!b){r.dataChanged(j)}};KJE.InputItem.prototype.setCalculationError=function(a){this.setGoodInput();this.setError(a.err)};KJE.InputItem.prototype.setSliderPosition=function(a){var f=this;if(f.bSlider){var e=f._slider.width;if(e&&(a||a==0)){var g=f._oScale;var d=f._posAdjust;var b=0;if(g){b=KJE.s_Untranslate(a,g._Min,g._Mid1,g._Mid2,g._Max)/100}else{var h=f._maximum;var c=f._minimum;b=((a>h?h:(a<c?c:a))-c)/f._range}f._line.value=b*100}}};KJE.InputItem.prototype.setTypedString=function(c){var b=KJE.replace;var a=this;a.setValue(b("<","",b(">","",b("(","",b(")","",a._inputField.value)))),c)};KJE.InputItem.prototype.setTypedDate=function(f){var a=KJE;var c=this;var e=c._inputField.value;var b=e;c._InComplete=false;if(e=="TODAY"){b=a.dateFormat(new Date())}else{if(e=="NEXT_MONTH"){var g=new Date();g.setMonth(g.getMonth()+1);b=a.dateFormat(g)}else{if(b.substr(10,1)=="T"){b=b.substr(5,2)+"/"+b.substr(8,2)+"/"+b.substr(0,4)}b=a.stripDate(b);if(b==""||b==c._sLabel){c._inputField.value=c.bNoLabel?c._sLabel:"";c._InComplete=true;c._bError=false;if(c.bIncompleteCheck){c.setIncomplete()}if(!f){a.dataChanged()}c._value=null;return}}}c.setValue(b,f)};KJE.InputItem.prototype.setGoodInput=function(){var a=this;if(a._inputType!=KJE.TypeNone){a._container.style.backgroundColor=a._container.backgroundColor;if(a.spanInputRequiredDesc&&KJE.POPUP_REQUIRED_MSG){if(a.spanInputRequiredDescMsg){a.spanInputRequiredDescMsg.className=KJE.REQUIRED_HOVER_CLASS}if(a.spanInputRangeDescInnerHtml){if(a.spanInputRangeDescInnerHtml!=a.spanInputRangeDesc.innerHTML){a.spanInputRangeDesc.innerHTML=a.spanInputRangeDescInnerHtml}}}if(a.spanInputRangeDesc){a.spanInputRangeDesc.className="KJEAccessibleInLine"}a._inputField.setAttribute("aria-invalid","false");if(a._inputField.sDescribedBy){a._inputField.setAttribute("aria-describedby",a._inputField.sDescribedBy)}else{a._inputField.removeAttribute("aria-describedby")}if(a._inputField.classes){a._inputField.className=a._inputField.classes}}};KJE.InputItem.prototype.setError=function(a){var b=this;b._container.style.backgroundColor=KJE.ErrorBackground;if(b.spanInputRangeDesc){b.spanInputRangeDesc.className="KJEGuiErrorPopup";if(a){b.spanInputRangeDesc.innerHTML=a}b._inputField.setAttribute("aria-describedby",b.spanInputRangeID+((b._inputField.sDescribedBy)?" "+b._inputField.sDescribedBy:""))}b._inputField.setAttribute("aria-invalid","true");b._inputField.className=b.preserveClasses(b._inputField)+" KJEInputErrorField"};KJE.InputItem.prototype.setIncomplete=function(){if(KJE.initializing>1||this.bValueBeenSet){var b=this;var a=KJE;b._container.style.backgroundColor=a.IncompleteBackground;if(b.spanInputRequiredDesc&&a.POPUP_REQUIRED_MSG){b.spanInputRequiredDescMsg=b.spanInputRequiredDesc.firstElementChild;if(b.spanInputRequiredDescMsg){b.spanInputRequiredDescMsg.className="KJEGuiErrorPopup"}}b._inputField.setAttribute("aria-invalid","true");b._inputField.className=b.preserveClasses(b._inputField)+" KJEInputErrorField"}};KJE.InputItem.prototype.preserveClasses=function(a){if(a.classes){}else{a.classes=a.className}return a.classes};KJE.InputItem.prototype.setTypedValue=function(e){var a=KJE;var c=this;c._InComplete=false;var d=c._inputField.value;if(d==""||d==c._sLabel){c.setSliderPosition(c._minimum);c._inputField.value=c.bNoLabel?c._sLabel:"";c._InComplete=true;c._bError=false;if(c.bIncompleteCheck){c.setIncomplete()}if(!e){a.dataChanged();this.bValueBeenSet=true}}else{var b=a.round(parseFloat(a.strip(d,c.bAbsoluteValue)),c._decimals);c.bSetRange=false;c.setValue(b,e)}};KJE.InputItem.prototype.getSecondValue=function(){var a=this;return a.getV(a._inputTypeAdditional,a._Additional)};KJE.InputItem.prototype.getValue=function(){var a=this;return a._value=a.getV(a._inputType,a._inputField,a._format)};KJE.InputItem.prototype.setText=function(a){var b=this;return b.setT(b._inputType,b._inputField,a)};KJE.InputItem.prototype.setSecondText=function(a){var b=this;return b.setT(b._inputTypeAdditional,b._Additional,a)};KJE.InputItem.prototype.getSecondFormatted=function(){var a=this;return a.getF(a._inputTypeAdditional,a._Additional)};KJE.InputItem.prototype.getFormatted=function(){var a=this;return(a._InComplete?KJE.sIncomplete:a.getF(a._inputType,a._inputField))};KJE.InputItem.prototype.getF=function(g,f){var b=KJE;var e="";var d=this;var c=d._value;var a=d._format;switch(g){case b.TypeRadio:case b.TypeRadios:case b.TypeCheckbox:e=f.value;break;case b.TypeDropBox:e=(f[f.selectedIndex].text);break;case b.TypeLabel:e=f.innerHTML;break;case b.TypeDate:e=b.dateFormat(c);break;case b.TypeString:e=f.value;break;case b.TypeNumber:e=b.format[a]((a==b.FMT_PERCENT?c/100:c),d._decimals,d._iPadding);break;case b.TypeNone:e=c}return e};KJE.InputItem.prototype.getV=function(f,e,b){var a=KJE;var c=0;var d=this;switch(f){case a.TypeRadio:case a.TypeRadios:case a.TypeCheckbox:c=e.checked;break;case a.TypeDropBox:c=e[e.selectedIndex].value;if(b!=a.FMT_STRING){c=Math.round(c)}break;case a.TypeLabel:c=e.innerHTML;break;case a.TypeDate:c=d._value;break;case a.TypeString:c=e.value;break;case a.TypeNumber:c=a.round(parseFloat(a.strip(e.value,d.bAbsoluteValue)),d._decimals);break;case a.TypeNone:c=d._value}return c};KJE.InputItem.prototype.setT=function(e,d,b){var a=KJE;var c=this;switch(e){case a.TypeRadio:case a.TypeRadios:case a.TypeCheckbox:break;case a.TypeDropBox:break;case a.TypeLabel:d.innerHTML=b;break;case a.TypeDate:d.value=b;c.setTypedDate(true);break;case a.TypeString:d.value=b;c.setTypedString(true);break;case a.TypeNumber:d.value=a.replace("&nbsp;"," ",b);c.setTypedValue(true);break}};KJE.InputItem.prototype.shortDesc=function(){return this._sLabel+KJE.Colon+" "+this.getFormatted()};KJE.InputItem.prototype.newWidth=function(){var j=KJE;var e=this;var d=e._inputField;var a=e._Additional;if(e._inputType==j.TypeNone){return}var c=e.SliderX();if(d.resize){var b=Math.max(c-d.indent,0);if(e._iInputFieldDiv){e._iInputFieldDiv.style.width=b+"px";d.style.width=b+KJE.iDPDropBoxModernPad+"px"}else{d.style.width=b+"px"}}if(a){if(a.indent&&e._inputTypeAdditional!=j.TypeRadios){var b=c+10-a.indent;if(e._AdditionalDiv){e._AdditionalDiv.style.width=b+"px";a.style.width=b+KJE.iDPDropBoxModernPad+"px"}else{a.style.width=b+"px"}}}var f=e._slider;if(f&&!d.disabled){this.showSlider(f)}var h=e._label2;if(h){var g=h.offsetHeight;if(g+6>j.iDPRowHeight){e._container.style.height=g+(j.iDPInputHeight/4)+2+"px"}}};KJE.InputItem.prototype.SliderX=function(){return KJE.CalculatorWidth-KJE.iDPInputPad*2-(this.SliderWidthAdjust?this.SliderWidthAdjust:KJE.SliderWidthAdjust)};KJE.InputItem.prototype.showSlider=function(e){var a=KJE;var d=this;var c=d.SliderX();if(e.indent){if(c-a.InputTotalLength+(a.TwoLineEntry?KJE.LabelLeftMargin+KJE.LabelLength:0)<a.SliderMinLength){e.style.display="none";if(e.labels){e.labels.style.display="none"}}else{e.style.display="inline-block";if(e.labels){e.labels.style.display="inline-block";var b=c-e.indent;e.width=b;e.style.width=b+"px";d._line.style.width=b+"px";e.labels.style.width=c-(e.labels.indent+KJE.iDPSliderPad)+"px";d.setSliderPosition(d._inputType==a.TypeDropBox?d._inputField.selectedIndex:d._value)}}}};KJE.InputItem.prototype.hide=function(){var a=this._container;if(a){this.bShow=false;a.style.display="none"}};KJE.InputItem.prototype.show=function(){var a=this._container;if(a){this.bShow=true;a.style.display="block"}};KJE.InputItem.prototype.setLabelSlider=function(g,h,e){var j=["left","center","center","right"];var d=document.createElement("div");d.className="KJEScale";d.setAttribute("aria-hidden","true");d.className="KJEScale";d.unselectable="on";d.style.position="absolute";d.style.height=g+"px";d.style.cursor="pointer";d.style.top="0";d.style.left=KJE.iDPSliderPad+"px";(e?e:this._container).appendChild(d);var a=KJE.SliderLabelVertAdj;if(h){var c=(h.length>5?5:h.length)-1;for(var b=0;b<=c;b++){var f=document.createElement("div");f.className="KJEScale";f.unselectable="on";f.style.position="absolute";f.style.height=g+"px";f.style.textAlign=j[b==c?3:b];f.style.cursor="pointer";f.style.top=(0+a)+"px";if(c==4){switch(b){case 0:f.style.width="100%";f.style.left=0;break;case 1:f.style.width="55%";f.style.left=0;break;case 2:f.style.width="100%";break;case 3:f.style.width="75%";f.style.left=0;break;case 4:f.style.width="100%";f.style.right=0;break}}else{if(c<2){f.style.width="100%"}else{f.style.width=(c>2?66.66:100)+"%"}if(b>1){f.style.right=0}else{f.style.left=0}}f.innerHTML=h[b];d.appendChild(f)}}return d};KJE.InputItem.prototype.disable=function(a,b){var d=this;var e=d._inputType;var c=d._label2;var f=d._label;if(e==KJE.TypeNone){return false}d.bValidate=false;d._container.style.backgroundColor=d._container.backgroundColor;d._InComplete=false;if(e==KJE.TypeCheckbox){if(c){c.className="KJETrailingLabel KJETrailingLabelDisable"}}if(f&&!a){f.className=d.className+" KJETrailingLabelDisable"}if(d.bSlider){if(d._slider.labels){d._slider.labels.style.display="none"}d._slider.style.display="none"}if(d._inputField&&b){d._inputField.style.display="none"}if(d._inputField){d.setInputItemRequired(false,true);if(d.spanInputRangeDesc){d.spanInputRangeDesc.style.display="none"}}return d._inputField.disabled=true};KJE.InputItem.prototype.enable=function(){var a=KJE;var c=this;var d=c._inputType;var b=c._label2;var e=c._label;if(d==a.TypeNone){return false}c.bValidate=true;if(d==a.TypeCheckbox){if(b){b.className="KJETrailingLabel"}}if(e){e.className=this.className}if(c.bSlider){c.showSlider(c._slider)}if(c._inputField){c._inputField.style.display=KJE.InputFieldDisplay;c.setInputItemRequired(true,true);if(c.spanInputRangeDesc){c.spanInputRangeDesc.style.display="inline"}}if(d==a.TypeDate){c.setTypedDate(true)}if(d==a.TypeNumber){c.setTypedValue(true)}return c._inputField.disabled=false};KJE.InputItem.prototype.getName=function(){return this._sLabel};KJE.shortDesc=function(){var b="";for(var a=0;a<arguments.length;a++){if(arguments[a].shortDesc){b+=arguments[a].shortDesc()+(a==arguments.length-1?"":", ")}else{b+=arguments[a]}}return b};KJE.DataPointTimeOut=-1;KJE.DataPointObject=null;KJE.DataPointShow=function(f,c,b,g,h,d){var j=KJE;if(!d){d=2500}j.DataPoint.style.display="block";var i=j.getScreenCoord(b,g,h);var a=j.DataPointOffset();j.DataPoint.style.left=(i.x+a.x-47+j.DataPointX)+"px";j.DataPoint.style.top=(i.y+a.y-5+j.DataPointY)+"px";j.DataPoint.innerHTML=c;if(j.DataPointTimeOut){clearTimeout(j.DataPointTimeOut)}j.DataPointTimeOut=setTimeout(j.DataPointHide,d);j.DataPointObject=h};KJE.DataPointHide=function(){var a=KJE;a.DataPoint.style.display="none";if(a.DataPointTimeOut){clearTimeout(a.DataPointTimeOut)}a.DataPointTimeOut=-1;a.DataPointObject=null};KJE.DataPointOffset=function(){var a=KJE.DataPoint.offsetParent;if(a){var b=KJE.getScreenCoord(0,0,a);return{x:-b.x,y:-b.y}}else{return{x:0,y:0}}};KJE.DefnPointTimeOut=-1;KJE.DefnPoint=null;KJE.DefnPointX=5;KJE.DefnPointY=19;KJE.DefnPointShow=function(e,h,c,d,g,f,a){var b=KJE;if(b.DefnPointTimeOut){clearTimeout(b.DefnPointTimeOut)}if(b.DefnPoint){b.DefnPointHide()}if(!g){g=2500}b.DefnPoint=e;if(typeof e.pDroppee=="undefined"){e.pDroppee=KJE.isInDroppee(e)}e.style.display="block";if(a!=b.DefinitionIconPositionAsIs){e.style.left=(b.DefnPointX)+"px";e.style.top=(b.DefnPointY)+"px"}e.setAttribute("aria-hidden","false");b.DefnPointTimeOut=setTimeout(b.DefnPointHide,g)};KJE.DefnPointHide=function(d){var a=KJE;var c=a.DefnPoint;c.style.display="none";c.setAttribute("aria-hidden","true");if(a.DefnPointTimeOut){clearTimeout(a.DefnPointTimeOut)}a.DefnPointTimeOut=-1;a.DefnPoint=null;if(d){try{document.getElementById("KJE-"+d).focus()}catch(b){}}};KJE.sDropperTitle="<div class=KJEToggleIcon>**ICON**</div><div class=KJEToggleTitle>**TITLE_TEXT**</div>";KJE.DropperDefined=function(a){return document.getElementById("KJE-P-"+a)};KJE.DivDefined=function(a){return document.getElementById("KJE-D-"+a)};KJE.Dropper=function(f,c,q,o,h,g){var j=this;var r=KJE;r.iDropperCount+=1;var b="DROPPER_OPEN"+r.number(r.iDropperCount);var p=r.parameters.get(b,c);c=p;j.getOpen=(q?q:false);j.getClosed=(o?o:false);var m=j._idDropper=document.getElementById("KJE-P-"+f);m.setAttribute("role","button");m.setAttribute("aria-controls","KJE-E-"+f);if(g){m.style.display="none"}var k=j._idDrop=document.getElementById("KJE-D-"+f);var a=j._idDroppee=document.getElementById("KJE-E-"+f);if(k){k.className=("KJEDrop")}r._idDroppeePadding=0;if(a){a.className=("KJEDroppee");if(!r._idDroppeePadding){try{r._idDroppeePadding=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-top").replace("px",""))}catch(l){}}}m.className="KJEDropper";m.tabIndex="0";a.style.display="block";a.style.width="100%";a.style.transition=r.DropeeTransition;j._iHeight=a.offsetHeight-r._idDroppeePadding;if(!j._iHeight||r.iDPDroppeeForceSize){j._iHeight=0;var n=a.getElementsByTagName("div");for(var d=0;d<n.length;d++){if(n[d].className=="KJEInputContainer"){j._iHeight+=r.iDPRowHeight}}j._iHeight+=10}j.InCalculator=(h?false:true);j._sInnerHTML=m.innerHTML;j._sName=f;j.sExtraClass=(r.DropperColors?(r.DropperColors.length>=r.iDropperCount?r.DropperColors[r.iDropperCount-1]:false):false);j.AddEvents();j.show(c?true:false);if(!c){if(!(KJE.InputFieldPosition=="static")){a.style.height="0px"}a.style.display="none";a.style.visibility="hidden";m.setAttribute(r.sExpand,"false")}else{a.style.display="block";if(KJE.InputFieldPosition=="static"){a.style.height="auto"}else{a.style.height=j._iHeight+"px"}m.setAttribute(r.sExpand,"true")}};KJE.Dropper.prototype.AddEvents=function(){var a=this;var b=a._idDrop;b.addEventListener("click",function(){a.toggle(a)},false);b.addEventListener("keypress",function(c){if(c.keyCode==32||c.keyCode==13){return KJE.Dropper.stopBubble(c)}},false);b.addEventListener("keydown",function(c){if(c.keyCode==32||c.keyCode==13){a.toggle();return KJE.Dropper.stopBubble(c)}},false)};KJE.Dropper.prototype.setHidden=function(b){var a=this;a._idDrop.style.display="none";a._idDroppee.style.display="none"};KJE.Dropper.prototype.setShown=function(b){var a=this;a._idDrop.style.display="block";if(a._bShow){a._idDroppee.style.display="block"}};KJE.Dropper.prototype.setBackground=function(b){var a=this;if(a._idDrop){a._idDrop.style.backgroundColor=b}a._idDroppee.style.backgroundColor=b};KJE.Dropper.prototype.setText=function(b){var c=this;var d=c.getOpen;var a=c.getClosed;var e=c._bShow;if(b){}else{if(e&&d){if("function"==typeof d){b=d()}else{b=d}}else{if(!e&&a){if("function"==typeof a){b=a()}else{b=a}}else{b=c._sInnerHTML}}}c._idDropper.innerHTML=KJE.setToggleTitleText(b,c,KJE)};KJE.Dropper.prototype.show=function(a){var b=this;b._bShow=a;b.setText()};KJE.Dropper.prototype.toggle=function(){if(KJE.inCommandTask(true)){return}var a=this;var b=a._idDroppee;b.style.overflow="hidden";if(a._bShow){a.doClose(500)}else{a.doOpen(500)}};KJE.Dropper.prototype.doClose=function(c){var a=this;if(a._bShow){var b=a._idDroppee;a.show(false);KJE.Calculator.style.height=KJE.Main.offsetHeight-a._iHeight-KJE._idDroppeePadding+"px";if(KJE.InputFieldPosition=="static"){b.style.display="none"}else{b.style.height="0px";b.style.paddingTop="0px"}setTimeout(function(){b.style.visibility="hidden";b.style.display="none";b.style.paddingTop=KJE._idDroppeePadding+"px";a._idDropper.setAttribute(KJE.sExpand,"false");a._idDroppee.style.overflow="hidden";KJE.inCommandTask(false)},c)}};KJE.Dropper.prototype.doOpen=function(c){var a=this;if(!a._bShow){var b=a._idDroppee;a.show(true);b.style.visibility="visible";b.style.display="block";if(KJE.InputFieldPosition=="static"){KJE.Calculator.style.height="auto"}else{KJE.Calculator.style.height=KJE.Main.offsetHeight+a._iHeight+"px"}b.style.height=a._iHeight+"px";setTimeout(function(){a._idDropper.setAttribute(KJE.sExpand,"true");a._idDroppee.style.overflow="visible";KJE.inCommandTask(false)},c)}};KJE.Dropper.stopBubble=function(a){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}return false};KJE.Dropper.prototype.open=function(a,b){return};KJE.addDiv=function(c,b,d){var a=document.getElementById("KJE-D-"+c);if(a){a.className=("KJEInputDiv"+(d?" "+d:""));if(b){a.style.backgroundColor=b}}return a};KJE.addDropper=function(b,a){if(a){b.setBackground(a)}KJE.droppers.set(b._sName,b);return b};KJE.setToggleTitleText=function(e,h,d,g){if(!e){e=""}var f=e.indexOf("<");var k=e.indexOf("|");if(f>0&&k>0){f=(f>k?k:f)}else{f=(f<k?k:f)}var i=(f>0?e.substring(0,f):e).trim();if(i.charAt(i.length-1)=="."){i=i.slice(0,-1)}if(i.charAt(i.length-1)!=KJE.Colon.trim()){i+=KJE.Colon}var l="";var b="";var n="";if(h){l=h._bShow?d.sToggleAltTextOpen:d.sToggleAltTextClose;b=h._bShow?d.sToggleClose:d.sToggleOpen;n=h._bShow?d.sExpanded:d.sCollapse}var m=KJE.sToggleTitle;var c="";var j=e.indexOf("|");var a=(g||!h?"":d.sToggleIcon);if(g||!h){b="";l=""}if(j>-1){m=KJE.sToggleTitle2;c=e.substring(j+1);e=e.substring(0,j)}else{if(!h||g){m=KJE.sToggleTitleH2Only}}if(h!=null){if(h.sExtraClass){m=KJE.replace("**EXTRA_CLASS**",h.sExtraClass,m)}}return m.replace("**IMG_TEXT**",l).replace("**SUMMARY_TEXT**",i).replace("**TITLE_TEXT**",e).replace("**TITLE_TEXT**",e).replace("**TITLE_TEXT2**",c).replace("**ICON**",b).replace("**IMG**",a).replace("**TITLE_CLASS**",d.sToggleTitleClass).replace("**TITLE_CLASS**",d.sToggleTitleClass).replace("**EXPANDED**",n)};KJE.setDropBox=function(c,b){b=b+"";for(var a=0;a<c.options.length;a++){if(c.options[a].value==b){c.options[a].selected=true;break}}return a};KJE.getDropBox=function(f,g,d,h,b){b=(b?' class="'+b+'" ':"");h=(h?h:d);var e=h.length;var a=d.length;var k="<select name="+f+" id=KJE-"+f+b+">";for(var c=0;c<a;c++){var j=(d[c]==g?" selected='selected' ":"");k+="<option value='"+d[c]+"' "+j+">"+(c>=e?d[c]:h[c])}k+="</select>";if(KJE.InputModern){k="<div id=KJE-"+f+b+"Div >"+k+"</div>"}return k};KJE.getTermChoice=function(k,j,e,g,b,l,f,d,m){var p=new Array();var o=new Array();l=(l?l:"");f=(f?f:false);m=(m?m:1);var a=0;var h=KJE.parameters.get("TERM_SHOW_ADDITIONAL",7);for(var c=m;c<=g;c++){if((e&&c<=b)||c%5==0||c==h){if((h==0&&(c==5||c==25||c==35))==false){p[a]=c+" "+(c==1?KJE.MSG_YEAR_LBL:KJE.MSG_YEARS_LBL)+(c>b?l:"");o[a]=c;a++}}}if(d){return KJE.getDropBox(k,j,o,p,f)}else{return{d:p,v:o}}};KJE.getMortgageTermChoice=function(b,c,d){var a=KJE;return a.getTermChoice(b,c,a.parameters.get("MORTGAGE_TERM_MAX",a.Default.MortgageShowAll),a.parameters.get("MORTGAGE_TERM_MAX",a.Default.MortgageTermMax),a.parameters.get("MORTGAGE_SHOW_MAX",a.Default.MortgageShowAllMax),"",false,d,a.parameters.get("MORTGAGE_TERM_MIN",a.Default.MortgageTermMin))};KJE.getMortgageTermDrop=function(a,b){return KJE.getMortgageTermChoice(a,b,true)};KJE.getMortgageTermList=function(){return KJE.getMortgageTermChoice("",0,false)};KJE.insertAfter=function(b,a){a.parentNode.insertBefore(b,a.nextSibling)};KJE.hasClass=function(b,a){return(" "+b.className+" ").indexOf(" "+a+" ")>-1};KJE.isInDroppee=function(b){var a=b.parentNode;if(a){if(KJE.hasClass(a,"KJEDroppee")){}else{a=a.parentNode;if(a){if(KJE.hasClass(a,"KJEDroppee")){return a}}}}return a};KJE.iGraphFixedWidth=0;KJE.gScaleLabel=["","Thousands of ","Millions of ","Billions of "];KJE.gScaleLabelMax=[0,100000,100000000,100000000000];KJE.gScaleLabelFactor=[1,1000,1000000,1000000000];KJE.gFont=["Arial","Arial","Arial","Arial","Arial","Arial"];KJE.gFontStyle=["bold","bold","","","bold",""];KJE.gFontSize=[13,10,10,10,10,9];KJE.g=new Object();KJE.g.sToggleAltTextClose="press spacebar to show graph";KJE.g.sToggleAltTextOpen="press spacebar to hide graph";KJE.g.sNewGraphPleaseComplete="please complete inputs to view graph";KJE.g.sToggleTitleClass="KJEGraphTitle";KJE.g.sToggleIcon="KJEGraphIcon";KJE.g.sToggleOpen="<div class='KJEToggleOpen' aria-hidden='true'></div>";KJE.g.sToggleClose="<div class='KJEToggleClose' aria-hidden='true'></div>";KJE.g.sExpanded="";KJE.g.sCollapse="";KJE.g.sExpand="aria-expanded";KJE.gHeight=250;KJE.gHeightReport=350;KJE.gWidthMax=900;KJE.gWidthReport=600;KJE.gLegendMin=550;KJE.gLegendFontMin=400;KJE.gColorBackground="#FFFFFF";KJE.gColorForeground="#000000";KJE.gColorGrid="#BBBBBB";KJE.gColorGridBackground1="#FFFFFF";KJE.gColorGridBackground2="#CCCCCC";KJE.gColorAxisLine="#666666";KJE.gColorText="#000000";KJE.gColorList=["#000055","#7B68EE","#64A650","#FFF200","#5f007f","#F15A22","#B72467","#6DC8BF","#FF0000","#ff00ff","#ffff00","#00ffff","#7f007f","#7f0000","#007f7f","#0000ff","#00c8ff","#60ffff","#bfffbf","#ffff90","#a0c8ef"];KJE.gPleaseComplete="";KJE.gWidthAdjust=0;KJE.gPIE=0;KJE.gCOLUMN=1;KJE.gCATEGORIES=2;KJE.gSTACKED=3;KJE.gLINE=4;KJE.gGraphDescription=["Pie Chart","Column Graph","Column Graph","Stacked Column Graph","Line Graph"];KJE.gGetFontHeight=function(a){return Math.ceil(a.measureText("m").width+2)};KJE.gDarker=function(d,h){if(d[0]=="#"){d=d.slice(1)}var c=parseInt(d,16);var f=(c>>16)*h;if(f>255){f=255}else{if(f<0){f=0}}var a=((c>>8)&255)*h;if(a>255){a=255}else{if(a<0){a=0}}var e=(c&255)*h;if(e>255){e=255}else{if(e<0){e=0}}return"rgb("+Math.floor(f)+","+Math.floor(a)+","+Math.floor(e)+")"};KJE.MSG_ADA_GRAPH_TEXT="<span class=KJEAccessible id='KJE-F-GRAPH**X**_TITLE'>**FIG_GRAPHTITLE**</span> **FIG_GRAPHTYPE**: Please view the report to see detailed calculation results in tabular form.";KJE.MSG_ADA_REPORTGRAPH_TEXT="**FIG_GRAPHTITLE** **FIG_GRAPHTYPE**: Detailed results available in tabular form below.";KJE.MSG_GRAPH_CANVAS="<div id=KJE-C-GRAPH**X** style='width:100%;'><canvas id=KJE-G-GRAPH**X**></canvas></div>";KJE.MSG_ADA_GRAPH="<figure style='margin:0; padding:0;'><figcaption id='KJE-F-GRAPH**X**' class=KJEAccessible>**MSG_ADA_GRAPH_TEXT**</figcaption>**GRAPH**</figure>";KJE.getGraphCode=function(b){var a=KJE;var c=a.replace(a.MSG_GRAPH,a.MSG_GRAPH_CANVAS,a.MSG_ADA_GRAPH);return a.replace("**X**",b+"",c)};KJE.gTitle=new Object();KJE.gGraphLine=new Object();KJE.gAxis=new Object();KJE.gGraphColumn=new Object();KJE.gGraphPie=new Object();KJE.gTitle.HORIZONTAL=0;KJE.gTitle.VERTICAL=1;KJE.gLegend=new Object();KJE.gLegend.LEFT=0;KJE.gLegend.TOP=3;KJE.gLegend.BOTTOM=4;KJE.gLegend.TOP_LEFT=5;KJE.gLegend.TOP_RIGHT=6;KJE.gLegend.BOTTOM_LEFT=7;KJE.gLegend.BOTTOM_RIGHT=8;KJE.gLegend.GRID_TOP_RIGHT=9;KJE.gLegend.GRID_TOP_LEFT=10;KJE.gLegend.GRID_BOTTOM_RIGHT=11;KJE.gLegend.GRID_BOTTOM_LEFT=12;KJE.gLegend.GRID_TOP=13;KJE.gLegend.GRID_BOTTOM=14;KJE.gLegend.GRID_RIGHT=15;KJE.gLegend.GRID_LEFT=16;KJE.gLegend.TOP_GRID_ALIGN=17;KJE.gLegend.BANDED_LEGEND=0;KJE.gLegend.DATA_SERIES_LEGEND=1;KJE.gLegend.CATEGORY_LEGEND=2;KJE.gLegend.ROUND_LEGEND=0;KJE.gLegend.SQUARE_LEGEND=1;KJE.gLegend._sSHADOW_COLOR="#222222";KJE.gTITLE_FONT=0;KJE.gBOLD_FONT=1;KJE.gPLAIN_FONT=2;KJE.gLEGEND_FONT=3;KJE.gLEGEND_FONT_BOLD=4;KJE.gLEGEND_FONT_TINY=5;KJE.gSCALE=2;KJE.ggetFont=function(b,c){var a=KJE;if(a.gFontStyle.length<=b&&b==a.gLEGEND_FONT_TINY){b-=2}if(a.gFontStyle.length<=b){b-=2}var d=a.gFontSize[b]-(c<KJE.gLegendFontMin?1:0);return(a.gFontStyle[b]+" "+Math.floor(a.gSCALE*d)+"pt "+a.gFont[b]).trim()};KJE.gBORDER_WIDTH=10*KJE.gSCALE;KJE.gLegend._iSIDE_BORDER_WIDTH=10*KJE.gSCALE;KJE.gLegend._iTOPBOTTOM_BORDER_WIDTH=3*KJE.gSCALE;KJE.gLegend._iBOX_SIDE_LENGTH=12*KJE.gSCALE;KJE.gLegend._iCIR_SIDE_LENGTH=7*KJE.gSCALE;KJE.gLegend._iBOX_TO_LABEL_SPACE=10*KJE.gSCALE;KJE.gLegend._sSHADOW_BLUR_X=2*KJE.gSCALE;KJE.gLegend._sSHADOW_BLUR_Y=2*KJE.gSCALE;KJE.gLegend._LINE_WIDTH=KJE.gSCALE;KJE.gLegend._LINE_SPACE=7.5*KJE.gSCALE;KJE.gLegend._PAD=KJE.gSCALE;KJE.gGraphPie._LINE_WIDTH=KJE.gSCALE;KJE.gGraphPie._FLAT=false;KJE.gGraphPie._DROP_SHADOW=true;KJE.gGraphLine._CLICKABLE=7*KJE.gSCALE;KJE.gGraphLine._sSHADOW_BLUR=0;KJE.gGraphLine._LINE_WIDTH=3*KJE.gSCALE;KJE.gGraphLine._sSHADOW_BLUR_X=0;KJE.gGraphLine._sSHADOW_BLUR_Y=0;KJE.gGraphColumn._LINE_WIDTH=KJE.gSCALE;KJE.giGridLineWidth=KJE.gSCALE;KJE.gAxis.TICK_LENGTH=3*KJE.gSCALE;KJE.gAxis.LABEL_SPACE_LENGTH=5*KJE.gSCALE;KJE.gAxis.LINE_WIDTH=KJE.gSCALE;KJE.gAxis.LEFT=0;KJE.gAxis.RIGHT=1;KJE.gAxis.TOP=3;KJE.gAxis.BOTTOM=4;KJE.gGraphColumn.LINE_NONE=0;KJE.gGraphColumn.LINE_ON_FIRST_ONLY=2;KJE.gGraphColumn.LINE_ON_ALL=3;KJE.gGraphColumn._sSHADOW_COLOR="#929292";KJE.gGraphColumn._sSHADOW_BLUR=8;KJE.gGraphColumn._sSHADOW_BLUR_X=3*KJE.gSCALE;KJE.gGraphColumn._sSHADOW_BLUR_Y=2*KJE.gSCALE*-1;KJE.gGraphPie._LINE_JOIN="round";KJE.gGraphPie._LINE_COLOR="#000000";KJE.gGraphLine.AREA_NONE=0;KJE.gGraphLine.AREA_ALL=1;KJE.gGraphLine.AREA_FIRST_ONLY=2;KJE.gGraphLine.AREA_SECOND_ONLY=3;KJE.gGraphLine.AREA_BANDED=4;KJE.gGraphLine._sSHADOW_COLOR="#929292";KJE.sgvStr=function(a){if(a==null){return null}return a.replace(/%%/g,'"').replace(/@@/g,"|").replace(/\^\^/g,",").replace(/!!/,"~")};KJE.spvStr=function(a){if(a==null){return null}if(a.replace){return a.replace(/"/g,"%%").replace(/\|/g,"@@").replace(/,/g,"^^").replace(/~/g,"!!")}else{return a}};KJE.spvColor=function(a){if(!a){return"#000000"}return a};KJE.sgvColor=function(a){if(!a){return"#000000"}return a};KJE.sgv=function(b,a){if(b==null){return a}else{if(b=="null"){return a}else{if(b==" "){return a}else{if(typeof(a)=="string"){return KJE.sgvStr(b)}else{if(typeof(a)=="boolean"){if(b==""){return a}return b.trim()=="true"}else{if(typeof(a)=="number"){return parseFloat(b)}}}}}}};KJE.sgvNumList=function(d){if(d==null){return null}else{if(d=="null"){return null}else{if(d.trim()==""){return null}else{var b=d.split(",");var a=KJE.FloatArray(b.length);for(var c=0;c<b.length;c++){a[c]=parseFloat(b[c])}}}}return a};KJE.sgvStrList2=function(d){var a=[];if(d==null){a=null}else{if(d=="null"){a=null}else{if(d.trim()==""){a=null}else{var c=d.split("~");for(var b=0;b<c.length;b++){a[b]=KJE.sgvStrList(c[b])}}}}return a};KJE.sgvStrList=function(d){var a=[];if(d==null){a=null}else{if(d=="null"){a=null}else{if(d.trim()==""){a=null}else{var c=d.split(",");for(var b=0;b<c.length;b++){a[b]=KJE.sgvStr(c[b])}}}}return a};KJE.spvStringList2=function(d){var a=KJE;if(d==null){return"null"}var c=a.spvStringList(d[0]);for(var b=1;b<d.length;b++){c+="~"+a.spvStringList(d[b])}return c};KJE.spvStringList=function(d){var a=KJE;if(d==null){return"null"}var c=a.spvStr(d[0]);for(var b=1;b<d.length;b++){c+=","+a.spvStr(d[b])}return c};KJE.spvColorList=function(d){var a=KJE;if(d==null){return"null"}var c=a.spvStr(d[0]);for(var b=1;b<d.length;b++){c+=","+a.spvColor(d[b])}return c};KJE.spvFloatList=function(e,d){var a=KJE;if(e==null){return"null"}var c=""+a.input(e[0],d);for(var b=1;b<e.length;b++){c+=","+a.input(e[b],d)}return c};KJE.gNewGraph=function(f,i,a,e,k,g,h,b){var c=document.getElementById("KJE-C-"+i);if(c){var j=KJE;e=!j.parameters.get("GRAPH_OPEN"+Math.floor(j.gGraphs.length+1),!e);var d=j.gGraphs[j.gGraphs.length]=new j.gCanvas(c,f,i,a,e,k,g,h,b);if(f==j.gPIE||f==j.gCATEGORIES){d._bPopDetail=false}return d}else{return null}};KJE.gCanvas=function(c,g,o,b,e,q,j,l,a){var k=this;k.sGraphName=o;k._titleGraphFigure=null;var p=KJE;var n=k.wCanvas=document.getElementById("KJE-G-"+o);k._bPopDetail=true;k._bPopCat=true;k.wContainer=c;k.wContainer.className="KJEGraphContainer";k.wCanvas.className="KJEGraph";k.wContainer.style.transition=p.DropeeTransition;if(KJE.iGraphFixedWidth){k.wContainer.style.width=KJE.iGraphFixedWidth+"px"}else{k.wContainer.style.width="100%"}if(typeof G_vmlCanvasManager!="undefined"){G_vmlCanvasManager.initElement(k.wCanvas)}k._ctx=null;k.sTitle=j;k.TT=j;k.InCalculator=(l?false:true);k.bBorder=(a?false:true);k._sGraphType=g;k._gtGraphType=new p.gType(g);var d=k.fFigureCaption=document.getElementById("KJE-F-"+o);if(d){d.innerHTML=p.replace("GRAPH**X**",o,p.replace("**FIG_GRAPHTYPE**",KJE.gGraphDescription[g],p.MSG_ADA_GRAPH_TEXT))}var h=c.clientWidth;k.FONT_TITLE=p.ggetFont(p.gTITLE_FONT,h);k.FONT_BOLD=p.ggetFont(p.gBOLD_FONT,h);k.FONT_PLAIN=p.ggetFont(p.gPLAIN_FONT,h);k.FONT_LEGEND=p.ggetFont(p.gLEGEND_FONT,h);k.FONT_LEGEND_BOLD=p.ggetFont(p.gLEGEND_FONT_BOLD,h);k.FONT_LEGEND_TINY=p.ggetFont(p.gLEGEND_FONT_TINY,h);k._legend=new p.gGraphLegend(p.gLegend.RIGHT,this);k._grid=new p.gGrid(this);k._axisY=new p.gValueAxis(this);k._axisX=new p.gCategoryAxis(this);k._titleGraph=new p.gGraphTitle(k.sTitle);k._titleXAxis=new p.gGraphTitle("");k._titleYAxis=new p.gGraphTitle(p.sCurrency);k._titleYAxis._iOrientation=p.gTitle.VERTICAL;k._vDataSeries=new Array();k._showItemLabel=false;k._showItemLabelFmt=p.FMT_DOLLARS;k._showItemLabelDecimals=k._iLimit=0;k._showItemLabelOnTop=k._showLabelFactor=true;k._iArea=p.gGraphLine.AREA_NONE;k._cGrid=p.gColorGrid;k._cGridBackground1=p.gColorGridBackground1;k._cGridBackground2=p.gColorGridBackground2;k._cAxisLine=p.gColorAxisLine;k._cTextColor=p.gColorText;k._sGraphCategories=k._sGraphCategoriesBold=k._sValueLabels=k._showItemValues=null;k._colorList=p.gColorList;k._iDataSeriesCount=0;if(b){var m=k.wTitle=document.createElement("DIV");m.className=(k.InCalculator&&k.bBorder?"KJEGraphDropper":"KJEDropperReport");if(k.InCalculator){m.setAttribute("role","button");m.tabIndex="0"}c.insertBefore(m,n)}if(k.wTitle&&!l){k.wTitle.addEventListener("click",function(i){k.toggle()},false);k.wTitle.addEventListener("keypress",function(i){if(i.keyCode==32||i.keyCode==13){return KJE.Dropper.stopBubble(i)}},false);k.wTitle.addEventListener("keydown",function(i){if(i.keyCode==32||i.keyCode==13){k.toggle();return KJE.Dropper.stopBubble(i)}},false)}if(n){var f=k._gtGraphType;n.addEventListener("click",function(s){var i=KJE.getMouseCoord(s,n);var r=f.getWedgeValue(i.x,i.y);if(r){KJE.DataPointShow(s,r.s,r.x,r.y,n)}},false);n.addEventListener("mousemove",function(s){var i=KJE.getMouseCoord(s,n);var r=f.getWedgeValue(i.x,i.y);if(r){KJE.DataPointShow(s,r.s,r.x,r.y,n)}},false)}k.setBackground(q);this.setWidth();k.setHeight(l?p.gHeightReport:p.gHeight);k.show(!e,k.sTitle)};KJE.gCanvas.prototype.setShown=function(b){var a=this;a.wContainer.style.display="block";a.wContainer.style.width="100%";this.setWidth(true)};KJE.gCanvas.prototype.getFigureTitle=function(){return this.titleGraphFigure};KJE.gCanvas.prototype.setAriaRole=function(b){var a=KJE;this.wCanvas.setAttribute("role","img");this.wCanvas.setAttribute("aria-label",a.replace("**FIG_GRAPHTYPE**",a.gGraphDescription[this._sGraphType],a.replace("**FIG_GRAPHTITLE**",(b?b:""),a.MSG_ADA_REPORTGRAPH_TEXT)))};KJE.gCanvas.prototype.setHidden=function(b){var a=this;a.wContainer.style.display="none"};KJE.gCanvas.prototype.setTitle=function(a){this.sTitle=a};KJE.gCanvas.prototype.toggle=function(){if(KJE.Error||KJE.InComplete){return}if(KJE.inCommandTask(true)){return}var b=this;var c=b.wCanvas;var a=0;if(this._bShow){c.style.overflow="hidden";this._bShow=false;this.show(false)}else{this._bShow=true;setTimeout(function(){c.style.overflow="hidden";c.style.display="block";b.show(true);b.paint(null,true)},25)}setTimeout(function(){KJE.inCommandTask(false)},500)};KJE.gCanvas.prototype.show=function(b,a){if(this.wTitle){var c=this;c._bShow=b;var e=c.wTitle;e.innerHTML=KJE.setToggleTitleText((a?a:this._titleGraph.s),c,KJE.g,!this.InCalculator);var d=e.offsetHeight;if(b){if(this.InCalculator){e.setAttribute(KJE.g.sExpand,"true")}this.wContainer.style.height=((d?d:28)+c.iGraphHeight)+"px"}else{if(this.InCalculator){e.setAttribute(KJE.g.sExpand,"false")}this.wContainer.style.height=((d?d:28))+"px"}if(this.InCalculator){if(KJE.IE9||KJE.InputFieldPosition=="static"){setTimeout(function(){KJE.Calculator.style.height=KJE.Main.offsetHeight+"px"},25)}else{KJE.Calculator.style.height=(KJE.Main.offsetHeight+(b?c.iGraphHeight:-c.iGraphHeight))+"px"}}}};KJE.gCanvas.prototype.setProperty=function(d){var b=d.split("|");var a=KJE.sgv;var e=KJE.sgvStrList;var c=this;c.removeAll();for(var f=0;f<b.length;f++){switch(f){case 0:if(b[f]!=c._gtGraphType._iGraphType){this._gtGraphType=new KJE.gType(b[f])}break;case 1:c._showItemLabel=a(b[f],c._showItemLabel);break;case 2:c._showItemLabelFmt=a(b[f],c._showItemLabelFmt);break;case 3:c._showItemLabelDecimals=a(b[f],c._showItemLabelDecimals);break;case 4:c._showItemLabelOnTop=a(b[f],c._showItemLabelOnTop);break;case 5:c._iArea=a(b[f],c._iArea);break;case 6:c._cBackground=a(b[f],c._cBackground);break;case 7:c._cGrid=a(b[f],c._cGrid);break;case 8:c._cGridBackground1=a(b[f],c._cGridBackground1);break;case 9:c._cGridBackground2=a(b[f],c._cGridBackground2);break;case 10:c._cAxisLine=a(b[f],c._cAxisLine);break;case 11:c._cTextColor=a(b[f],c._cTextColor);break;case 12:c._iLimit=a(b[f],c._iLimit);break;case 13:c._sGraphCategories=e(b[f]);break;case 14:c._sGraphCategoriesBold=e(b[f]);break;case 15:c._sValueLabels=e(b[f]);break;case 16:c._colorList=e(b[f]);break;case 17:c._showItemValues=a(b[f],c._showItemValues);break;case 18:c._bPopDetail=a(b[f],c._bPopDetail);break;case 19:c._bPopCat=a(b[f],c._bPopCat);break;case 20:c._showLabelFactor=a(b[f],c._showLabelFactor);break}}};KJE.gCanvas.prototype.getProperty=function(){var c=KJE.spvStringList;var b=this;var a=KJE;return b._gtGraphType._iGraphType+"|"+b._showItemLabel+"|"+b._showItemLabelFmt+"|"+b._showItemLabelDecimals+"|"+b._showItemLabelOnTop+"|"+b._iArea+"|"+a.spvColor(b._cBackground)+"|"+a.spvColor(b._cGrid)+"|"+a.spvColor(b._cGridBackground1)+"|"+a.spvColor(b._cGridBackground2)+"|"+a.spvColor(b._cAxisLine)+"|"+a.spvColor(b._cTextColor)+"|"+b._iLimit+"|"+c(b._sGraphCategories)+"|"+c(b._sGraphCategoriesBold)+"|"+c(b._sValueLabels)+"|"+a.spvColorList(b._colorList)+"|"+a.spvStringList2(b._showItemValues)+"|"+b._bPopDetail+"|"+b._bPopCat+"|"+b._showLabelFactor};KJE.gCanvas.prototype.getColor=function(a){a-=1;a%=this._colorList.length;return this._colorList[a]};KJE.gCanvas.prototype.blank=function(){this.removeAll();this.paint();if(this.wTitle){this.setTitleGraph(KJE.gPleaseComplete)}};KJE.gCanvas.prototype.getDataSeriesCount=function(){return this._iDataSeriesCount};KJE.gCanvas.prototype.getDataProperties=function(){var a="";for(var b=0;b<this._iDataSeriesCount;b++){a+="|"+this._vDataSeries[b].getProperty()}return a.substring(1)};KJE.gCanvas.prototype.getValueCount=function(){var b=this._iDataSeriesCount;var a=this._iLimit;var c=0;while(b){c=this._vDataSeries[b-1].getValueCount();if(a>c||a==0){a=c}b--}return a};KJE.gCanvas.prototype.getMinValue=function(){if(this._vDataSeries==null){return 0}var a=this._vDataSeries[0].getMinValue(this._iLimit);var b=a;for(var c=1;c<this._iDataSeriesCount;c++){b=this._vDataSeries[c].getMinValue(this._iLimit);if(b<a){a=b}}return a};KJE.gCanvas.prototype.getMaxValue=function(){if(this._vDataSeries==null){return 0}var d=0;var f=0;if(this._gtGraphType._iGraphType==KJE.gSTACKED){var c=new Array();for(var a=0;a<this._vDataSeries.length;a++){var b=this._vDataSeries[a]._fValues;for(var e=0;e<b.length;e++){c[e]=b[e]+(c[e]?c[e]:0)}}return Math.max.apply(Math,c)}else{d=this._vDataSeries[0].getMaxValue(this._iLimit);f=d;for(e=1;e<this._iDataSeriesCount;e++){f=this._vDataSeries[e].getMaxValue(this._iLimit);if(f>d){d=f}}return d}};KJE.gCanvas.prototype.add=function(c){if(c==null){}else{if(typeof c=="string"){if(c.trim()==""){}else{var a=c.split("|");for(var b=0;b<a.length;b++){this._vDataSeries[this._iDataSeriesCount]=new KJE.gGraphDataSeries(a[b],null,null,null);this._vDataSeries[this._iDataSeriesCount].gCanvasPointer=this;this._iDataSeriesCount++}}}else{this._vDataSeries[this._iDataSeriesCount]=c;this._vDataSeries[this._iDataSeriesCount].gCanvasPointer=this;this._iDataSeriesCount++}}};KJE.gCanvas.prototype.removeAll=function(){this._vDataSeries=new Array();this._iDataSeriesCount=0;this._iLimit=0;this._gtGraphType.syncSetup(this);this._legend._cBGColor=null};KJE.gCanvas.prototype.paint=function(e,c){if(this.sTitle){this.setTitleGraph(this.sTitle)}if(!this.wCanvas.getContext){return}if(!c){if(!this._bShow){return}}var b=this.wCanvas.getContext("2d");if(b.canvas.width==0||b.canvas.height==0){return}if(b){this._ctx=b}var a=this._ctx.canvas.width;var d=this._ctx.canvas.height;if(this._iDataSeriesCount!=0){b.fillStyle=this._cBackground;b.fillRect(0,0,a,d);this._gtGraphType.paint(this._ctx,a,d)}else{b.fillStyle=(this._cBackground);b.fillRect(0,0,a,d)}};KJE.gCanvas.prototype.setGraphCategories=function(a){this._sGraphCategories=a};KJE.gCanvas.prototype.setBackground=function(a){this.wContainer.style.backgroundColor=a;this._cBackground=a};KJE.gCanvas.prototype.setWidth=function(c,b){var a=0;if(!b){this.wContainer.style.width="100%";a=this.wContainer.clientWidth;if(!a){a=KJE.CalculatorWidth}}else{a=b}if(a>KJE.gWidthMax){a=KJE.gWidthMax}a-=KJE.gWidthAdjust;this.wCanvas.style.width=this.wContainer.style.width=a+"px";this.wCanvas.width=a*KJE.gSCALE;this.iWidth=a;if(c){this.paint()}};KJE.gCanvas.prototype.setHeight=function(a){this.wCanvas.style.height=a+"px";this.iGraphHeight=a;this.wCanvas.height=a*KJE.gSCALE};KJE.gCanvas.prototype.getBackground=function(){return this._cBackground};KJE.gCanvas.prototype.setTitleGraph=function(b){var a=this;if(!(a._titleGraph.s==b)){if(a.wTitle){a.wTitle.innerHTML=KJE.setToggleTitleText(b,a,KJE.g,!a.InCalculator);if(a.InCalculator){KJE.Calculator.style.height=KJE.Main.offsetHeight+"px"}}a._titleGraph.setText(b);if(a._titleGraphFigure==null){a._titleGraphFigure=document.getElementById("KJE-F-"+a.sGraphName+"_TITLE")}if(a._titleGraphFigure){var c=(b.indexOf("<")>0?b.substring(0,b.indexOf("<")):b).trim();if(c.substring(c.length-1,c.length)==="."){c=c.substring(0,c.length-1)}a._titleGraphFigure.innerHTML=a.titleGraphFigure=c}}};KJE.gCanvas.prototype.setTitleTemplate=function(){var b=this.TT;for(var a=0;a<arguments.length;a++){b=b.replace("KJE"+(a+1),arguments[a])}this.sTitle=b};KJE.gCanvas.prototype.getFormat=function(c,g,b){var e="";var d=this;var f=d._showItemLabelFmt;var a=d._showItemValues;if(a==null){e=KJE.format[f](c/(f==KJE.FMT_PERCENT&&d._showLabelFactor?100:1),d._showItemLabelDecimals)}else{if(a.length>g){if(a[g].length>b){e=a[g][b]}}}return e};KJE.gGraphDataSeries=function(i,p,k,l,g,j,d){var h=this;h._iDecimals=(d?d:2);var e=(i instanceof Array);if(!e&&KJE.TypedArray){e=(i instanceof Float64Array)}if(e){h._fValues=i;h._sSeriesTitle=p;h._cColor=k;h._sSeriesTitleBold=(!l?"":l);h._sSeriesPop=(!g?p:g);h._bNoPopDetails=(j?true:false)}else{var m=i.split("~");var o=m.length;var a=KJE.sgv;for(var b=0;b<o;b++){switch(b){case 0:h._cColor=a(m[b],"#0000FF");break;case 1:h._sSeriesTitle=a(m[b],"");break;case 2:h._sSeriesTitleBold=a(m[b],"");break;case 3:h._fValues=KJE.sgvNumList(m[b]);break;case 4:h._sSeriesPop=a(m[b],h._sSeriesTitle);break;case 5:h._bNoPopDetails=a(m[b],false);break;case 6:h._iDecimals=a(m[b],2);break}}}};KJE.gGraphDataSeries.prototype.getProperty=function(){var a=KJE;var b=this._iDecimals+(this.gCanvasPointer._showLabelFactor?0:2);return this._cColor+"~"+a.spvStr(this._sSeriesTitle)+"~"+a.spvStr(this._sSeriesTitleBold)+"~"+a.spvFloatList(this._fValues,b)+"~"+a.spvStr(this._sSeriesPop)+"~"+this._bNoPopDetails+"~"+KJE.number(this._iDecimals)};KJE.gGraphDataSeries.prototype.getValueCount=function(){if(this._fValues==null){return 0}return this._fValues.length};KJE.gGraphDataSeries.prototype.getMinValue=function(c){var a=this._fValues;if(a==null){return 0}var b=a[0];var d=a.length;if(d>c&&c!=0){d=c}for(var e=1;e<d;e++){if(b>a[e]){b=a[e]}}return b};KJE.gGraphDataSeries.prototype.getMaxValue=function(c){var a=this._fValues;if(a==null){return 0}var d=a.length;if(d>c&&c!=0){d=c}var b=a[0];for(var e=d-1;e>0;e--){if(b<a[e]){b=a[e]}}return b};KJE.gGraphTitle=function(a){var b=this;b._iOrientation=KJE.gTitle.HORIZONTAL;b.s=a;b.f="11pt Helvetica";b.c="#000000";b.bShow=true;b.sText=""};KJE.gGraphTitle.prototype.setProperty=function(a){this.setText(KJE.sgv(a,""))};KJE.gGraphTitle.prototype.getProperty=function(){return KJE.spvStr(this.s)};KJE.gGraphTitle.prototype.paint=function(b,a,e,c,d){b.font=this.f;b.fillStyle=this.c;b.shadowBlur="";b.shadowColor="";b.shadowOffsetX="";b.shadowOffsetY="";b.textAlign="center";b.textBaseline="middle";if(this._iWidth!=0){if(this._iOrientation==KJE.gTitle.VERTICAL){b.save();b.rotate(-Math.PI/2);b.fillText(KJE.FTR(this.sText),-e-d/2,a+c/2);b.restore()}else{b.fillText(KJE.FTR(this.sText),a+c/2,e+d/2)}}};KJE.gGraphTitle.prototype.setText=function(a){this.s=a};KJE.gGraphTitle.prototype.setFont=function(a){this.f=a};KJE.gGraphTitle.prototype.setColor=function(a){this.c=a};KJE.gGraphTitle.prototype.setTitle=function(b,d){var a=0;var f=0;var c=d||"";c+=((c==""&&this.s==KJE.sCurrency)?"":(this.s||""));if(c!=""&&this.bShow){b.font=this.f;var e=f=KJE.gGetFontHeight(b)+10;a=b.measureText(KJE.FTR(c)).width;if(this._iOrientation==KJE.gTitle.VERTICAL){f=a;a=e}}this.sText=c;this._iHeight=f;this._iWidth=a};KJE.gGraphLegend=function(c,a){this._gGraph=a;var b=this;b._iShape=KJE.gLegend.SQUARE_LEGEND;b._iOrientation=c;b._legendType=KJE.gLegend.DATA_SERIES_LEGEND;b._border=false;b._cBGColor=null;b._iLegendWidth=0;b.LINE_SPACE=KJE.gLegend._LINE_SPACE;b._bShow=true;b._cColor="#000000";b._iXOffset=0;b._iYOffset=0;b._iWidthOffset=0;b._iHeightOffset=0;b._iMaxLegendLength=0;b._iWidth=0;b._iHeight=0;b._iFontHeight=0;b._iColorBoxYOffset=0;b._iLabelOffset=0;b._iColorBoxOffset=0;b._iBORDER_WIDTH=0};KJE.gGraphLegend.prototype.setProperty=function(d){var b=d.split("|");var a=KJE.sgv;var c=this;for(var e=0;e<b.length;e++){switch(e){case 0:c._cBGColor=a(b[e],c._cBGColor);break;case 1:c._iShape=a(b[e],c._iShape);break;case 2:c._iOrientation=a(b[e],c._iOrientation);break;case 3:c._border=a(b[e],c._border);break;case 4:c._iLegendWidth=a(b[e],c._iLegendWidth);break;case 5:c.LINE_SPACE=a(b[e],c.LINE_SPACE);break;case 6:c._bShow=a(b[e],c._bShow);break}}};KJE.gGraphLegend.prototype.getProperty=function(){var a=this;if(a._cBGColor==null){a._cBGColor=a._gGraph.getBackground()}return a._cBGColor+"|"+a._iShape+"|"+a._iOrientation+"|"+a._border+"|"+a._iLegendWidth+"|"+a.LINE_SPACE+"|"+a._bShow};KJE.gGraphLegend.prototype.setVisible=function(a){this._bShow=a};KJE.gGraphLegend.prototype.useOrientation=function(a){var b=this._iOrientation;this.bLegendSmall=false;if(a/KJE.gSCALE<KJE.gLegendMin){b=KJE.gLegend.BOTTOM}return b};KJE.gGraphLegend.prototype.paint=function(m,j,h,n,f,c,b,r,p){var o=this;var q=o._iHeight;var l=o._iWidth;var e=this._iBORDER_WIDTH;var a=KJE.gLegend._iTOPBOTTOM_BORDER_WIDTH;if(!c){c=0}if(!b){b=0}if(!r){r=0}if(!p){p=0}m.textAlign="left";m.textBaseline="middle";var g=KJE.gLegend;var d=o.useOrientation(m.canvas.width);switch(d){case g.TOP:f=q;break;case g.TOP_GRID_ALIGN:f=q;n=l;j=c;break;case g.BOTTOM:h+=f-q;f=q;break;case g.LEFT:if(b>0){h=b}if(p>0){f=p}n=l;break;case g.RIGHT:if(b>0){h=b}if(p>0){f=p}j+=n-l;n=l;break;case g.TOP_LEFT:f=q;n=l;break;case g.BOTTOM_LEFT:h+=f-q;f=q;n=l;break;case g.TOP_RIGHT:j+=n-l;f=q;n=l;break;case g.BOTTOM_RIGHT:h+=f-q;j+=n-l;f=q;n=l;break;case g.GRID_TOP_RIGHT:j=c-a+r-l;h=b+a;n=l;f=q;break;case g.GRID_TOP_LEFT:j=c+a;h=b+a;n=l;f=q;break;case g.GRID_BOTTOM_RIGHT:j=c-a+r-l;h=b-a+p-q;n=l;f=q;break;case g.GRID_BOTTOM_LEFT:j=c+a;h=b-a+p-q;n=l;f=q;break;case g.GRID_TOP:j=c;h=b+e;n=r;f=q;break;case g.GRID_BOTTOM:j=c;h=b-e+p-q;n=r;f=q;break;case g.GRID_LEFT:j=c+e;h=b;n=l;f=p;break;case g.GRID_RIGHT:j=c-e+r-l;h=b;n=l;f=p;break}if(this._bShow){var k=j+(n/2)-(l/2);var i=h+(f/2)-(q/2);if(this._border){m.fillStyle=this._cBGColor;m.fillRect(k-0.5,i-0.5,l,q);m.strokeStyle=this._gGraph._cTextColor;m.strokeRect(k-0.5,i-0.5,l,q)}if(this._legendType<=g.DATA_SERIES_LEGEND){this.drawDataSeriesLegend(m,k,i);return}this.drawCategoryLegend(m,k,i)}};KJE.gGraphLegend.prototype.drawDataSeriesLegend=function(i,e,d){var f=this._gGraph._vDataSeries.length;var h=new Array(f);var a=new Array(f);var g=new Array(f);var c=this._gGraph._vDataSeries;for(var b=0;b<f;b++){h[b]=c[b]._cColor;a[b]=c[b]._sSeriesTitle;g[b]=c[b]._sSeriesTitleBold}this.drawLegend(i,e,d,h,a,g)};KJE.gGraphLegend.prototype.drawCategoryLegend=function(a,e,d){var b=this._gGraph._sGraphCategories;var c=this._gGraph._sGraphCategoriesBold;this.drawLegend(a,e,d,this._gGraph._colorList,b,c)};KJE.gGraphLegend.prototype.drawLegend=function(s,l,i,y,a,p){var g=KJE.gLegend;var u=i+g._iSIDE_BORDER_WIDTH;var c=(this._iShape==g.SQUARE_LEGEND);var t=0;var d=this.LINE_SPACE+this._iFontHeight;var o=this._iColorBoxOffset;var b=this._iColorBoxYOffset;var h=g._iSIDE_BORDER_WIDTH;var z=g._PAD;var x=(this.bLegendSmall?this._gGraph.FONT_LEGEND_TINY:this._gGraph.FONT_LEGEND_BOLD);var e=(this.bLegendSmall?this._gGraph.FONT_LEGEND_TINY:this._gGraph.FONT_LEGEND);var f=(this._legendType==g.BANDED_LEGEND);var w=a.length;var m=KJE.FTR;s.font=e;s.lineWidth=g._LINE_WIDTH;s.shadowColor=g._sSHADOW_COLOR;s.shadowOffsetX=g._sSHADOW_BLUR_X;s.shadowOffsetY=g._sSHADOW_BLUR_Y;for(var r=0;r<w;r++){s.fillStyle=y[r];if(c){s.fillRect(l+o,u+b,h,h)}else{var q=g._iCIR_SIDE_LENGTH;s.beginPath();s.arc(l+o+q,u+b+q,q,0,Math.PI*2,true);s.closePath();s.fill()}u+=d;if(f){r++}}s.lineWidth=g._LINE_WIDTH;s.shadowBlur="0";s.shadowColor=g._sSHADOW_COLOR;s.shadowOffsetX="0";s.shadowOffsetY="0";s.fillStyle=this._cTextColor;u=i+h+b+h/2+z;var j=l+this._iLabelOffset;for(r=0;r<w;r++){s.fillText(m(a[r]),j,u);if(p&&p[r]){t=s.measureText(m(a[r])).width;s.font=x;s.fillText(m(p[r]),j+t,u);s.font=e}u+=d;if(f){r++}}};KJE.gGraphLegend.prototype.setSize=function(l){var j=KJE.gLegend;var g=this;g._iWidth=0;g._iHeight=0;g._iXOffset=0;g._iYOffset=0;var d=g._iWidthOffset=g._iBORDER_WIDTH=KJE.gBORDER_WIDTH;g._iHeightOffset=0;if(g._bShow){var i=j._iSIDE_BORDER_WIDTH;var c=g._gGraph;var h=g.LINE_SPACE;var f=g._iFontHeight;var e=j._PAD;g._iColorBoxOffset=i+e;g._iLabelOffset=i+i+j._iBOX_TO_LABEL_SPACE+e*2;var k=g._iWidth=g._iLabelOffset+g._iMaxLegendLength+i;var b=g._iHeight=i+(f+h)*(g._legendType==j.CATEGORY_LEGEND?(c._sGraphCategories==null?0:c._sGraphCategories.length):c.getDataSeriesCount())-h+i;g._iColorBoxYOffset=Math.ceil((f-i)/2)+e;var a=g.useOrientation(l.canvas.width);switch(a){case j.TOP:case j.TOP_GRID_ALIGN:g._iYOffset=b+d;case j.BOTTOM:g._iHeightOffset=b+d;break;case j.LEFT:case j.TOP_LEFT:case j.BOTTOM_LEFT:g._iXOffset=k+d;g._iWidthOffset=k+d+d;break;case j.RIGHT:case j.TOP_RIGHT:case j.BOTTOM_RIGHT:g._iWidthOffset=k+d;break}}};KJE.gGraphLegend.prototype.setINF=function(k){oThis=this;oThis._cColor=oThis._gGraph._cTextColor;oThis._cTextColor=oThis._gGraph._cTextColor;if(oThis._cBGColor==null){oThis._cBGColor=oThis._gGraph._cBackground}oThis._iMaxLegendLength=0;oThis._iFontHeight=0;oThis._iFontDescent=0;var b=oThis.useOrientation(k.canvas.width);var c=(oThis.bLegendSmall?oThis._gGraph.FONT_LEGEND_TINY:oThis._gGraph.FONT_LEGEND_BOLD);var d=(oThis.bLegendSmall?oThis._gGraph.FONT_LEGEND_TINY:oThis._gGraph.FONT_LEGEND);if(oThis._bShow){if(oThis._iLegendWidth>0){oThis._iMaxLegendLength=oThis._iLegendWidth}else{k.font=d;var f=0;var j="";var h=oThis._gGraph._vDataSeries.length;var l="";if(oThis._legendType!=KJE.gLegend.CATEGORY_LEGEND){for(var g=0;g<h;g++){l=oThis._gGraph._vDataSeries[g]._sSeriesTitle;j=oThis._gGraph._vDataSeries[g]._sSeriesTitleBold;j=(j?j:"");f=k.measureText(KJE.FTR(l)).width;if(j!=""){k.font=oThis.FONT_LEGEND_BOLD;f+=k.measureText(KJE.FTR(j)).width;k.font=d}if(f>oThis._iMaxLegendLength){oThis._iMaxLegendLength=f}}}else{if(oThis._gGraph._sGraphCategories!=null){var h=oThis._gGraph._sGraphCategories.length;var a=(oThis._gGraph._sGraphCategoriesBold==null?0:oThis._gGraph._sGraphCategoriesBold.length);for(var e=0;e<h;e++){l=oThis._gGraph._sGraphCategories[e];j=(e<a?oThis._gGraph._sGraphCategoriesBold[e]:"");f=k.measureText(KJE.FTR(l)).width;if(e<a){k.font=c;f+=k.measureText(KJE.FTR(j)).width;k.font=d}if(f>oThis._iMaxLegendLength){oThis._iMaxLegendLength=f}}}}}oThis._iFontHeight=KJE.gGetFontHeight(k)}};KJE.gValueAxis=function(a){this._gGraph=a;this._font=a.FONT_PLAIN;this._bShow=true;this._cColor="#FFFFFF";this._cLine="#000000";this._cTextColor="#000000";this._iFormat=KJE.FMT_DOLLARS;this._iXOffset=0;this._iYOffset=0;this._iLabelCount=0;this._iMaxLabelLength=0;this._iMaxLength=0;this._iWidth=0;this._iHeight=0;this._iPixelsPerIncrement=0;this._iDataLength=0;this._fValuePerPixel=0;this._iFontHeight=0;this._iFormat=KJE.FMT_DOLLARS;this._bAutoMaximum=true;this._bAutoMinimum=false;this._axisMinimum=0;this._axisMaximum=100;this._sUnits="";this._iUnitFactor=1;this._fAbsoluteMinValue=0;this._fAbsoluteMaxValue=0;this._fRange=0;this._fMinValue=0;this._fMaxValue=0;this._iIncrement=0;this._iFactor=0;this._fIncrement=0;this._iZeroIntersects=0};KJE.gValueAxis.prototype.setProperty=function(c){var b=c.split("|");var a=KJE.sgv;for(var d=0;d<b.length;d++){switch(d){case 0:this._bShow=a(b[d],this._bShow);break;case 1:this._iFormat=a(b[d],this._iFormat);break;case 2:this._bAutoMaximum=a(b[d],this._bAutoMaximum);break;case 3:this._bAutoMinimum=a(b[d],this._bAutoMinimum);break;case 4:this._axisMaximum=a(b[d],this._axisMaximum);break;case 5:this._axisMinimum=a(b[d],this._axisMinimum);break}}};KJE.gValueAxis.prototype.getProperty=function(){return this._bShow+"|"+this._iFormat+"|"+this._bAutoMaximum+"|"+this._bAutoMinimum+"|"+KJE.number(this._axisMaximum,2)+"|"+KJE.number(this._axisMinimum,2)};KJE.gValueAxis.prototype.getLabel=function(a){if(this._gGraph._sValueLabels==null){return KJE.format[this._iFormat](a/this._iUnitFactor,((this._fAbsoluteMaxValue-this._fAbsoluteMinValue)<=5)?2:0)}else{return this._gGraph._sValueLabels[Math.floor(a)]}};KJE.gValueAxis.prototype.getNextIncrement=function(b){var a=this._iIncrement;return(this._gGraph._sValueLabels==null?(this._fRange>100?(b-(a*this._iFactor)):Math.round((b*this._iFactor)-a)/this._iFactor):(b-1))};KJE.gValueAxis.prototype.paint=function(i,h,g){if(this._bShow){var f=KJE.gAxis;i.font=this._font;var a=(this._iWidth-f.TICK_LENGTH-f.LINE_WIDTH);var c=(f.LABEL_SPACE_LENGTH+f.TICK_LENGTH);var e=0;var d=this.getStartingPlotValue();for(var b=0;b<=this._iLabelCount;b++){i.strokeStyle=this._cTextColor;if(this._iPixelsPerIncrement<this._iFontHeight){if((b%2)!=0){this.drawText(i,h,g,this.getLabel(d),c,e)}}else{this.drawText(i,h,g,this.getLabel(d),c,e)}i.strokeStyle=this._cColor;i.beginPath();this.drawLine(i,h,g,a,e,a+f.TICK_LENGTH,e,this._cLine);e+=this._iPixelsPerIncrement;d=this.getNextIncrement(d)}this.drawLine(i,h,g,a+f.TICK_LENGTH,0,a+f.TICK_LENGTH,this._iDataLength,this._cLine)}};KJE.gValueAxis.prototype.drawLine=function(b,e,f,a,h,c,d,g){b.strokeStyle=g;b.moveTo(a+e+0.5,h+f+0.5);b.lineTo(c+e+0.5,d+f+0.5);b.stroke()};KJE.gValueAxis.prototype.drawText=function(h,e,c,i,g,f){var d=h.measureText(KJE.FTR(i)).width;var a=f+((this._iFontHeight)/2);var b=this._iWidth-g-d;h.textAlign="left";h.textBaseline="bottom";h.font=this._font;h.fillText(KJE.FTR(i),e+b,c+a)};KJE.gValueAxis.prototype.setSize=function(a,b){a.font=this._font;a.fillStyle=this._cColor;this._iPixelsPerIncrement=Math.floor(b/this._iLabelCount);this._iDataLength=this._iPixelsPerIncrement*this._iLabelCount;this._iMaxLength=b;this._iHeight=this._iDataLength;var f=0;var d=this.getStartingPlotValue();for(var e=0;e<=this._iLabelCount;e++){if(d==0){this._iZeroIntersects=f;break}d=this.getNextIncrement(d);f+=this._iPixelsPerIncrement}var c=KJE.gAxis;this._iWidth=this._iMaxLabelLength+c.LABEL_SPACE_LENGTH+c.TICK_LENGTH+c.LINE_WIDTH;this._iYOffset=(this._bShow?this._iHeight:0);this._iXOffset=(this._bShow?this._iWidth:0);this._fValuePerPixel=(this._iDataLength/this._fRange)};KJE.gValueAxis.prototype.setFormat=function(a){this._iFormat=a};KJE.gValueAxis.prototype.setINF=function(j){this._cLine=this._gGraph._cAxisLine;this._cColor=this._gGraph._cTextColor;this._cTextColor=this._gGraph._cTextColor;this._iFontHeight=KJE.gGetFontHeight(j);j.font=this._font;j.strokeStyle=this._cTextColor;this._fAbsoluteMaxValue=(this._bAutoMaximum?this._gGraph.getMaxValue():this._axisMaximum);this._fAbsoluteMinValue=(this._bAutoMinimum?this._gGraph.getMinValue():this._axisMinimum);if(this._fAbsoluteMaxValue<0.00001&&this._fAbsoluteMaxValue>-0.00001&&this._fAbsoluteMinValue<0.00001&&this._fAbsoluteMinValue>-0.00001){this._fAbsoluteMaxValue=25}else{if(this._fAbsoluteMaxValue<1&&this._fAbsoluteMaxValue>-1&&this._fAbsoluteMinValue<1&&this._fAbsoluteMinValue>-1&&this._iFormat==KJE.FMT_DOLLARS){this._fAbsoluteMaxValue=1}}var d=this._fAbsoluteMaxValue-this._fAbsoluteMinValue;this._iFactor=1;this._iIncrement=1;this._fIncrement=1;if(this._gGraph._sValueLabels!=null){}else{var g=d;if(g>100){while(g>200){this._iFactor*=10;g=(d/this._iFactor)}}else{while(g<=20){this._iFactor*=10;g=(d*this._iFactor)}}this._iIncrement=(g>100?20:(g>50?10:5));this._fIncrement=(d>100?(this._iIncrement*this._iFactor):this._iIncrement/this._iFactor)}if(this._fAbsoluteMinValue==0){this._fMinValue=0}else{if((this._fAbsoluteMinValue%this._fIncrement)==0){this._fMinValue=this._fAbsoluteMinValue}else{this._fMinValue=(Math.floor(this._fAbsoluteMinValue/this._fIncrement))*this._fIncrement}}if(this._fAbsoluteMaxValue==0){this._fMaxValue=0}else{if((this._fAbsoluteMaxValue%this._fIncrement)==0){this._fMaxValue=this._fAbsoluteMaxValue}else{this._fMaxValue=Math.ceil(this._fAbsoluteMaxValue/this._fIncrement);this._fMaxValue=Math.round(this._iFactor*this._fMaxValue*this._fIncrement)/this._iFactor}}this._fRange=this._fMaxValue-this._fMinValue;if(this._fRange==0){this.fRange=this._fIncrement}if(this._gGraph._sValueLabels==null){this._iLabelCount=Math.round(this._fRange/this._fIncrement)}else{this._iLabelCount=this._gGraph._sValueLabels.length-1}this.setGraphUnits(this._fMaxValue,this._fMinValue);if(this._bShow){var a=this.getStartingPlotValue();var e=0;var c=0;var f=this._iLabelCount;for(var b=0;b<=f;b++){c=j.measureText(KJE.FTR(this.getLabel(a))).width;e=(c>e?c:e);a=this.getNextIncrement(a)}var h=KJE.gAxis;this._iMaxLabelLength=e;this._iFontHeight=KJE.gGetFontHeight(j);this._iWidth=this._iMaxLabelLength+h.LABEL_SPACE_LENGTH+h.TICK_LENGTH+h.LINE_WIDTH}};KJE.gValueAxis.prototype.getStartingPlotValue=function(){return(this._gGraph._sValueLabels==null?this._fMaxValue:this._gGraph._sValueLabels.length-1)};KJE.gValueAxis.prototype.setVisible=function(a){this._bShow=a};KJE.gValueAxis.prototype.getDataLength=function(){return this._iDataLength};KJE.gValueAxis.prototype.setGraphUnits=function(d,g){var a=KJE;g=g||0;var c=a.gScaleLabelMax;var e=a.gScaleLabelFactor;var f=c.length;for(var b=f-1;b>=0;b--){if(d>=c[b]||g<=(-1)*c[b]){this._sUnits=a.gScaleLabel[b];this._iUnitFactor=e[b];break}}return this._iUnitFactor};KJE.gCategoryAxis=function(a){this._gGraph=a;this._bShow=true;this._cColor="#FFFFFF";this._cLine="#000000";this._cTextColor="#000000";this._fFont="11pt Helvetica";this._iXOffset=0;this._iYOffset=0;this._iLabelCount=0;this._iMaxLabelLength=0;this._iWidth=0;this._iHeight=0;this._iPixelsPerIncrement=0;this._iDataLength=0;this._iFontHeight=0;this._iFontOffset=0;this._fSpacingPercent=0.25;this._fDataGapPercent=0;this._bNoOffset=false;this._sCategories=new Array();this._iCategoryCount;this._iBarCount;this._iBarWidth;this._iSpaceWidth;this._iGapWidth;this._iBarsPerCategory;this._iAxisSegmentLength;this._bVertical=false};KJE.gCategoryAxis.prototype.setProperty=function(c){var b=c.split("|");var a=KJE.sgv;for(var d=0;d<b.length;d++){switch(d){case 0:this._bShow=a(b[d],this._bShow);break;case 1:this._fSpacingPercent=a(b[d],this._fSpacingPercent);break;case 2:this._fDataGapPercent=a(b[d],this._fDataGapPercent);break}d++}};KJE.gCategoryAxis.prototype.getProperty=function(){return this._bShow+"|"+KJE.input(this._fSpacingPercent,2)+"|"+KJE.input(this._fDataGapPercent,2)};KJE.gCategoryAxis.prototype.paint=function(m,j,h,r,t){var p=this;if(p._bShow){var s=KJE.gAxis;h+=t;m.font=p._fFont;var c=s.TICK_LENGTH;var q=s.LABEL_SPACE_LENGTH+s.LINE_WIDTH+s.TICK_LENGTH;var e=c+s.LABEL_SPACE_LENGTH;var a=0;var b=0;var d=1;var i=p._sCategories;var f=p._iCategoryCount;var n=p._bVertical;var o=(n?p._iFontHeight:p._iMaxLabelLength)+q;if(o>p._iAxisSegmentLength&&f>2){d=Math.ceil(f/(p._iDataLength/o))}m.strokeStyle=p._cLine;m.beginPath();for(var g=0;g<f;g++){b=p.getCategoryLeft(g);if(g==0){b-=s.LINE_WIDTH}m.moveTo(b+j+0.5,0+h+0.5);m.lineTo(b+j+0.5,c+h+0.5)}m.moveTo(j+0.5,h+0.5);m.lineTo(p._iWidth+j+0.5,h+0.5);m.stroke();if(i){m.setStyle=p._cTextColor;if(n){m.save();m.rotate(-Math.PI/2);m.textAlign="right";m.textBaseline="middle"}else{m.textAlign="center";m.textBaseline="top"}p.getCatOffset=p._bNoOffset?p.getCategoryLeft:p.getCategoryMid;var l=i.length;var k=KJE.FTR;for(var g=0;g<f;g++){a=p.getCatOffset(g);if((d<2||(g%d)==0&&g<f-(d*0.9)&&g!=f-2||g==f-1)){if(g<l){if(n){m.fillText(k(i[g]),-h-e-0.5,j+a-0.5)}else{m.fillText(k(i[g]),j+a+0.5,h+e+0.5)}}}}if(n){m.restore()}}}};KJE.gCategoryAxis.prototype.drawLine=function(b,e,f,a,h,c,d,g){b.beginPath();b.strokeStyle=g;b.moveTo(a+e+0.5,h+f+0.5);b.lineTo(c+e+0.5,d+f+0.5);b.stroke()};KJE.gCategoryAxis.prototype.setSize=function(k,d){k.font=this._fFont;var e=this._gGraph.getValueCount()-(this._bNoOffset?1:0);var a=this._gGraph.getDataSeriesCount();var h=(a*e);var j=(2*e);var b=((a-1)*e);this._iWidth=d;this._iDataLength=d;var c=Math.floor(this._iWidth/Math.round(((j*this._fSpacingPercent)+h+(b*this._fDataGapPercent))));var i=c*this._fDataGapPercent;var f=Math.floor((this._iDataLength-(c*h)-(i*b))/j);this._iAxisSegmentLength=2*f+(i*(a-1))+(c*a);this._iXOffset=0;this._iYOffset=0;if(this._bShow){var g=KJE.gAxis;if(this._iMaxLabelLength>this._iAxisSegmentLength&&this._iMaxLabelLength>k.measureText("9999").width&&this._iMaxLabelLength<k.measureText("9999999999999999999").width){this._iHeight=this._iMaxLabelLength+g.TICK_LENGTH;this._bVertical=true}else{this._iHeight=this._iFontHeight+g.LABEL_SPACE_LENGTH+g.TICK_LENGTH+g.LINE_WIDTH;this._bVertical=false}}else{this._iHeight=0}this._iBarsPerCategory=a;this._iBarWidth=c;this._iGapWidth=i;this._iSpaceWidth=f};KJE.gCategoryAxis.prototype.setINF=function(a){this._iCategoryCount=this._gGraph.getValueCount();this._sCategories=this._gGraph._sGraphCategories;this._fFont=this._gGraph.FONT_PLAIN;this._cColor=this._gGraph._cTextColor;this._cTextColor=this._gGraph._cTextColor;this._cLine=this._gGraph._cAxisLine;this._iFontHeight=0;this._iMaxLabelLength=0;this._iHeight=0;if(this._bShow){var b=KJE.gAxis;if(this._sCategories){this._iFontHeight=KJE.gGetFontHeight(a)}else{this._iFontHeight=-b.LABEL_SPACE_LENGTH*2}a.font=this._fFont;a.strokeStyle=this._cColor;this._iMaxLabelLength=this.getMaximumCategoryLength(a,this._iCategoryCount,this._sCategories)}};KJE.gCategoryAxis.prototype.getCategoryLeft=function(a){return Math.round(this._iWidth/(this._iCategoryCount-(this._bNoOffset?1:0))*a)};KJE.gCategoryAxis.prototype.getCategoryMid=function(a){return Math.round((this._iWidth/this._iCategoryCount)*a)+Math.round(((this._iBarsPerCategory*this._iBarWidth)+((this._iBarsPerCategory-1)*this._iGapWidth))/2)+this._iSpaceWidth};KJE.gCategoryAxis.prototype.getDataWidth=function(){return this._iGapWidth+this._iBarWidth};KJE.gCategoryAxis.prototype.getMaximumCategoryLength=function(b,e,d){if(d==null){return 0}if(d.length==0){return 0}var a=0;var c=0;for(var f=0;(f<e)&&(f<d.length);f++){c=b.measureText(KJE.FTR(d[f])).width+3;a=(c>a?c:a)}return a};KJE.gCategoryAxis.prototype.setVisible=function(a){this._bShow=a};KJE.gGrid=function(a){this._gGraph=a;this._showYGridLines=true;this._showXGridLines=false;this._lineWidth=KJE.giGridLineWidth};KJE.gGrid.prototype.setProperty=function(c){var b=c.split("|");var a=KJE.sgv;for(var d=0;d<b.length;d++){switch(d){case 0:this._showYGridLines=a(b[d],this._showYGridLines);break;case 1:this._showXGridLines=a(b[d],this._showXGridLines);break;case 2:this._lineWidth=a(b[d],this._lineWidth);break}}};KJE.gGrid.prototype.getProperty=function(){return this._showYGridLines+"|"+this._showXGridLines+"|"+this._lineWidth};KJE.gGrid.prototype.paint=function(q,n,m){var j=this._gGraph._axisX._iDataLength;var p=this._gGraph._axisY._iDataLength;var d=q.createLinearGradient(0,0,0,p);d.addColorStop(0,this._gGraph._cGridBackground1);d.addColorStop(1,this._gGraph._cGridBackground2);q.fillStyle=d;q.fillRect(n,m,j,p+1);q.beginPath();q.strokeStyle=this._gGraph._cGrid;q.lineWidth=this._lineWidth;q.strokeRect(n,m,j+1,p);q.strokeStyle=this._gGraph._cAxisLine;q.beginPath();q.moveTo(n,m+p);q.lineTo(n+j,m+p);q.closePath();q.strokeStyle=this._gGraph._cGrid;var k,i,g;var b=this._gGraph.getValueCount();if(this._showXGridLines){k=0;i=0;g=0;for(var h=0;h<b;h++){g=this._axisX.getCategoryLeft(h);if(h==0){k--}k=n+g;q.moveTo(k+0.5,m);q.lineTo(k+0.5,m+p)}}var f=0;if(this._showYGridLines){i=m;var a=this._gGraph._axisY._iLabelCount;var c=this._gGraph._axisY._iPixelsPerIncrement;var o=this._gGraph._axisY._iZeroIntersects;for(var e=0;e<a;e++){if(o+m==i){f=i}q.moveTo(n,i+0.5);q.lineTo(n+j,i+0.5);i=i+c}}q.strokeStyle=this._gGraph._cGrid;q.stroke();q.closePath();if(f){q.beginPath();q.strokeStyle=this._gGraph._cAxisLine;q.moveTo(n,f+0.5);q.lineTo(n+j,f+0.5);q.stroke();q.closePath()}};KJE.gType=function(a){this._iGraphType=a;this.bTitleHigher=false;this._gGraph=null;this.xPopup=new Array();this.yPopup=new Array();this.xArray=new Array();this.yArray=new Array();this.sItems=new Array()};KJE.gType.prototype.syncSetup=function(a){this._gGraph=a;if(a.wTitle){a.wTitle.style.fontColor=a._cTextColor;a._titleGraph.bShow=false}a._titleGraph.setFont(a.FONT_TITLE);a._titleXAxis.setFont(a.FONT_BOLD);a._titleYAxis.setFont(a.FONT_BOLD);a._titleGraph.setColor(a._cTextColor);a._titleXAxis.setColor(a._cTextColor);a._titleYAxis.setColor(a._cTextColor);switch(this._iGraphType){case KJE.gCOLUMN:a._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND;a._axisX._fDataGapPercent=0.05;this.bTitleHigher=true;break;case KJE.gCATEGORIES:a._legend._legendType=KJE.gLegend.CATEGORY_LEGEND;a._axisX._fDataGapPercent=0.05;this.bTitleHigher=true;break;case KJE.gLINE:a._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND;a._axisX._fDataGapPercent=100;this.bTitleHigher=false;a._axisX._bNoOffset=true;break;case KJE.gPIE:a._legend._legendType=KJE.gLegend.CATEGORY_LEGEND;this.bTitleHigher=false;break;case KJE.gSTACKED:a._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND;a._axisX._fDataGapPercent=-1;this.bTitleHigher=true;break}};KJE.gType.prototype.paint=function(s,q,E){var w=this;var x=w._gGraph;var C=x._legend;var d=x._axisX;var b=x._axisY;var u=x._titleXAxis;var l=x._titleYAxis;var F=x._titleGraph;F.setTitle(s);C.setINF(s);x._axisX.setINF(s);x._axisY.setINF(s);u.setTitle(s,"");l.setTitle(s,x._axisY._sUnits);var G=w.bTitleHigher&&x._showItemLabel&&x._showItemLabelOnTop;var H=KJE.gBORDER_WIDTH;var A=KJE.gBORDER_WIDTH;var J=q-2*KJE.gBORDER_WIDTH;var z=E-2*KJE.gBORDER_WIDTH;var m=F._iHeight;var e=H;var h=A+(G?Math.ceil(m/2):0)+m+KJE.gBORDER_WIDTH;var f=J;var c=z-((G?Math.ceil(m/2):0)+m+KJE.gBORDER_WIDTH);C.setSize(s);var D,i,p,j,K,a,y,o,L,B,k,n,g,I,r,t;switch(w._iGraphType){case KJE.gPIE:D=e;i=h;p=f;j=c;K=f;a=c;y=e;o=h;L=e;B=h;k=f;n=c;g=e+C._iXOffset;I=h+C._iYOffset;r=f-C._iWidthOffset;t=c-C._iHeightOffset;break;default:D=e+C._iXOffset;i=h+C._iYOffset;p=f-C._iWidthOffset;j=c-C._iHeightOffset;K=p-l._iWidth-(KJE.gBORDER_WIDTH);a=j-u._iHeight-(KJE.gBORDER_WIDTH);d.setSize(s,K-b._iWidth);b.setSize(s,a-d._iHeight);y=D+l._iWidth+KJE.gBORDER_WIDTH;o=i+(b._iMaxLength-b._iHeight);L=y+b._iXOffset;B=o+d._iYOffset;k=d._iDataLength;n=b._iDataLength;g=L;I=B;r=k;t=n}switch(w._iGraphType){case KJE.gPIE:break;default:x._grid.paint(s,L,B);u.paint(s,L,b._iDataLength+B+d._iHeight+u._iHeight/2,k,u._iHeight);l.paint(s,D,B,l._iWidth,n);b.paint(s,y,o+d._iXOffset,k,n);d.paint(s,y+b._iXOffset,o,k,n)}switch(w._iGraphType){case KJE.gCATEGORIES:case KJE.gCOLUMN:w.paintDataColumn(s,g,I,r,t);break;case KJE.gLINE:w.paintDataLine(s,g,I,r,t);break;case KJE.gPIE:w.paintDataPie(s,g,I,r,t);break;case KJE.gSTACKED:w.paintDataStacked(s,g,I,r,t);break}F.paint(s,H,A-(G?Math.ceil(m/4):0),J,m);C.paint(s,e,h,f,c,L,B,k,n)};KJE.gType.prototype.paintDataColumn=function(s,m,j,w,f){var r;var K=this._gGraph;var A=KJE.gGraphColumn;var E=this;var c=K._axisX._iBarWidth;var t=K._axisY._fValuePerPixel;var g=K._axisX._iSpaceWidth;var F=K._axisX.getDataWidth();var q=K._axisY._fMinValue;var I=K._axisY._fMaxValue;var b=K._axisY._iZeroIntersects;var B=K.getValueCount();s.shadowColor=A._sSHADOW_COLOR;s.shadowBlur=A._sSHADOW_BLUR;s.shadowOffsetX=(c<A._sSHADOW_BLUR_X*3?0:A._sSHADOW_BLUR_X);var p=s.shadowOffsetY=(c<A._sSHADOW_BLUR_X*3?0:A._sSHADOW_BLUR_Y);s.lineWidth=A._LINE_WIDTH;var M=new Array();var a=new Array();var d=new Array();var L=0;s.font=K.FONT_LEGEND;if(!K._showItemLabelOnTop){L=-KJE.gGetFontHeight(s)}s.textAlign="center";s.textBaseline="bottom";var H=0;var i=0;var z="";var e=(K._legend._legendType!=KJE.gLegend.CATEGORY_LEGEND);var o=(K._sGraphCategoriesBold!=null&&K._legend._legendType==KJE.gLegend.CATEGORY_LEGEND);var h=K._axisX._sCategories;for(var J=0;J<K._vDataSeries.length;J++){if(e){z=K._vDataSeries[J]._sSeriesPop}var D=-9191;var u=-9191;s.fillStyle=K._vDataSeries[J]._cColor;var l=K._vDataSeries[J]._fValues;var C;var k,G;M[J]=new Array();a[J]=new Array();d[J]=new Array();for(var r=0;r<B;r++){C=m+K._axisX.getCategoryLeft(r)+g+(J*F);H=l[r];if(H<0){if(I<0){k=j;G=(-1)*Math.round((H+I)*t)}else{k=j+b;G=(-1)*Math.round(H*t)}}else{if(q>0){G=Math.round((H-q)*t);k=j+f-G}else{G=Math.round(H*t);k=j+b-G}}s.beginPath();if(K._legend._legendType==KJE.gLegend.CATEGORY_LEGEND){s.fillStyle=K.getColor(r+1)}else{s.fillStyle=K._vDataSeries[J]._cColor}s.strokeStyle=s.fillStyle;s.shadowOffsetY=p;s.fillRect(C,k,c,G);s.shadowOffsetY="0";s.fillRect(C,k,c,G);if(K._iArea==KJE.gGraphColumn.LINE_ON_ALL||(K._iArea==KJE.gGraphColumn.LINE_ON_FIRST_ONLY&&J==0)){s.lineWidth=KJE.gGraphLine._LINE_WIDTH;s.shadowOffsetY=KJE.gGraphLine._sSHADOW_BLUR_Y;if(u!=-9191){s.beginPath();s.moveTo(D+c/2,u);s.lineTo(C+c/2,k);s.stroke()}D=C;u=k}s.closePath();M[J][r]=K.getFormat(l[r],J,r);E.xPopup[i]=(C+c/2)/KJE.gSCALE;E.yPopup[i]=(k+G)/KJE.gSCALE;E.xArray[i]=new Array(4);E.yArray[i]=new Array(4);E.xArray[i][0]=C/KJE.gSCALE;E.yArray[i][0]=k/KJE.gSCALE;E.xArray[i][1]=(C+c)/KJE.gSCALE;E.yArray[i][1]=E.yArray[i][0];E.xArray[i][2]=E.xArray[i][1];E.yArray[i][2]=(k+G)/KJE.gSCALE;E.xArray[i][3]=E.xArray[i][0];E.yArray[i][3]=E.yArray[i][2];E.sItems[i++]=z+" "+(h?h[r]:"")+(o?(K._sGraphCategoriesBold[r]?K._sGraphCategoriesBold[r]:""):"")+(K._bPopDetail?KJE.Colon+" "+M[J][r]:"");a[J][r]=C+c/2;d[J][r]=k-L}}E.xArray.length=i;E.yArray.length=i;E.sItems.length=i;s.shadowBlur="0";s.shadowOffsetX="0";s.shadowOffsetY="0";s.fillStyle=K._cTextColor;if(K._showItemLabel){for(J=0;J<M.length;J++){if(!(M[J].length>3&&w<600)){for(r=0;r<M[J].length;r++){s.beginPath();s.fillText(KJE.FTR(M[J][r]),a[J][r],d[J][r]);s.closePath()}}}}};KJE.gType.prototype.paintDataLine=function(p,j,g,t,d){var b=KJE;var k=b.gGraphLine;var c=KJE.gSCALE;var E=this._gGraph;var B=this;var q=E._axisY._fValuePerPixel;var o=E._axisY._fMinValue;var C=E._axisY._fMaxValue;var a=E._axisY._iZeroIntersects;var w=E.getValueCount();var f=0;var r=k._CLICKABLE;p.shadowBlur=k._sSHADOW_BLUR;p.shadowColor=k._sSHADOW_COLOR;p.shadowOffsetX=k._sSHADOW_BLUR_X;p.lineWidth=k._LINE_WIDTH;p.shadowOffsetY=k._sSHADOW_BLUR_Y;var e=E._axisX._sCategories;for(var D=0;D<E._vDataSeries.length;D++){var u=E._vDataSeries[D]._sSeriesPop;var l=E._vDataSeries[D]._bNoPopDetails;p.fillStyle=E._vDataSeries[D]._cColor;p.strokeStyle=E._vDataSeries[D]._cColor;var i=E._vDataSeries[D]._fValues;var A;var h;var z=-9191;var s=-9191;for(var m=0;m<w;m++){A=j+E._axisX.getCategoryLeft(m)-0.5;h=a-Math.round(i[m]*q)+0.5;if(C<0){h=(-1)*Math.round((i[m]+C)*q)}else{if(o>0){h=d-(Math.round((i[m]-o)*q))}}h+=g;if(s!=-9191){p.beginPath();p.strokeStyle=E._vDataSeries[D]._cColor;p.fillStyle=E._vDataSeries[D]._cColor;if(E._iArea==k.AREA_ALL||(E._iArea==k.AREA_FIRST_ONLY&&D==0)||(E._iArea==k.AREA_SECOND_ONLY&&D==1)){p.moveTo(z,g+d);p.lineTo(z,s);p.lineTo(A+0.5,h);p.lineTo(A+0.5,g+d);p.lineTo(z,g+d);p.fill()}else{p.moveTo(A+0.5,h);p.lineTo(z,s);p.stroke()}}B.xPopup[f]=(A-5)/c;B.yPopup[f]=(h+5)/c;B.xArray[f]=KJE.IntArray(4);B.yArray[f]=KJE.IntArray(4);B.xArray[f][0]=(A-r)/c;B.yArray[f][0]=(h-r)/c;B.xArray[f][1]=(A+r)/c;B.yArray[f][1]=B.yArray[f][0];B.xArray[f][2]=B.xArray[f][1];B.yArray[f][2]=(h+r)/c;B.xArray[f][3]=B.xArray[f][0];B.yArray[f][3]=B.yArray[f][2];B.sItems[f++]=u+(l?"":" "+(e?e[m]:"")+(E._bPopDetail?b.Colon+" "+E.getFormat(i[m],D,m):""));z=A;s=h}}B.xArray.length=f;B.yArray.length=f;B.sItems.length=f};KJE.gType.prototype.paintDataPie=function(r,b,a,B,d){var F=0;var D=this._gGraph;var A=this;var l=D._vDataSeries[0]._fValues;for(var q=0;q<l.length;q++){F+=l[q]}var k=Math.round(B/2+b);var j=Math.round(d/2+a);var E=0;if(B/d){E=Math.floor(d/24);j-=Math.ceil(E/2)+1;d-=Math.ceil(E)+1}r.save();var g=1;var f=1;if(!KJE.gGraphPie._FLAT){var g=(B>d?B/d:1);var f=(B>d?1:d/B)}k=k/g;j=j/f;r.scale(g,f);var c=Math.round(Math.min(B/2,d/2));var s=0;var z=0;r.shadowBlur=10;r.shadowOffsetX=E;r.shadowOffsetY=E;r.lineWidth=KJE.gGraphPie._LINE_WIDTH;r.lineJoin=KJE.gGraphPie._LINE_JOIN;r.fillStyle=KJE.gGraphPie._LINE_COLOR;var h=D._axisX._sCategories;if(F<=0){r.fillStyle=KJE.gDarker(D.getColor(1),0.5);r.shadowColor=r.fillStyle;r.beginPath();r.moveTo(k,j);r.arc(k,j,c,0,Math.PI*2,true);r.lineTo(k,j);r.closePath();r.stroke();r.fill();r.fillStyle=D.getColor(1);r.strokeStyle=KJE.gDarker(D.getColor(1),0.6);r.beginPath();r.moveTo(k,j);r.arc(k,j,c,0,Math.PI*2,true);r.lineTo(k,j);r.closePath();r.stroke();r.fill()}if(F>0){if(KJE.gGraphPie._DROP_SHADOW){for(var u=(l.length-1);u>=0;u--){if(l[u]!=0){z=(l[u]/F);r.fillStyle=KJE.gDarker(D.getColor(u+1),0.5);r.shadowColor=r.fillStyle;r.beginPath();r.moveTo(k,j);var w=s*Math.PI*2;var t=((u==0&&l[u]>0)?0:(s+z)*Math.PI*2);r.arc(k,j,c,w,t,false);r.lineTo(k,j);r.closePath();r.fill();s+=z}}}s=0;r.shadowBlur=0;r.shadowOffsetX=0;r.shadowOffsetY=0;var m=0;for(u=(l.length-1);u>=0;u--){if(l[u]!=0){z=(l[u]/F);if(z<0){z=0}r.fillStyle=D.getColor(u+1);r.strokeStyle=KJE.gDarker(D.getColor(u+1),0.6);r.beginPath();r.moveTo(k,j);var w=s*Math.PI*2;var t=((u==0&&l[u]>0)?0:(s+z)*Math.PI*2);r.arc(k,j,c,w,t,false);r.lineTo(k,j);r.closePath();r.stroke();r.fill();var e=Math.ceil(z*20+0.01);A.xArray[m]=KJE.IntArray(e+2);A.yArray[m]=KJE.IntArray(e+2);A.xArray[m][0]=(k*g)/KJE.gSCALE;A.yArray[m][0]=(j*f)/KJE.gSCALE;var C=(z/e);for(var o=0;o<e;o++){A.xArray[m][o+1]=((k+c*Math.cos((s+C*o)*Math.PI*2))*g)/KJE.gSCALE;A.yArray[m][o+1]=((j+c*Math.sin((s+C*o)*Math.PI*2))*f)/KJE.gSCALE;if(o==Math.floor(e/2)){A.xPopup[m]=((k+(c*0.75)*Math.cos((s+C*o)*Math.PI*2))*g)/KJE.gSCALE-5;A.yPopup[m]=((j+(c*0.75)*Math.sin((s+C*o)*Math.PI*2))*f)/KJE.gSCALE+10}}A.xArray[m][e+1]=((k+c*Math.cos((s+z)*Math.PI*2))*g)/KJE.gSCALE;A.yArray[m][e+1]=((j+c*Math.sin((s+z)*Math.PI*2))*f)/KJE.gSCALE;A.sItems[m]=(h?h[u]:"")+(D._bPopDetail?KJE.Colon+" "+D.getFormat(l[u],0,u):"");s+=z;m++}}A.xArray.length=m;A.yArray.length=m;A.sItems.length=m;A.xPopup.length=m;A.yPopup.length=m}r.restore()};KJE.gType.prototype.paintDataStacked=function(p,F,E,Q,M){var C=this._gGraph;var d=C._axisY;var e=C._axisX;var J=KJE.gGraphColumn;var A=this;var G=e._iBarWidth;var a=d._fValuePerPixel;var z=e._iSpaceWidth;var r=e.getDataWidth();var c=d._fMinValue;var g=d._fMaxValue;var h=d._iZeroIntersects;var s=C.getValueCount();var m=new Array();var u=new Array();var k=new Array();var I=new Array();var N=A.xArray;var o=A.yArray;var t=A.sItems;var l=A.xPopup;var K=A.yPopup;var j=e._sCategories;p.shadowColor=J._sSHADOW_COLOR;p.shadowBlur=J._sSHADOW_BLUR;p.shadowOffsetX=(G<J._sSHADOW_BLUR_X*3?0:J._sSHADOW_BLUR_X);var b=p.shadowOffsetY=(G<J._sSHADOW_BLUR_X*3?0:J._sSHADOW_BLUR_Y);p.lineWidth=J._LINE_WIDTH;p.font=C.FONT_LEGEND;p.textAlign="center";p.textBaseline="bottom";var i=5;if(!C._showItemLabelOnTop){i=-KJE.gGetFontHeight(p)}var D=null;for(var H=0;H<C._vDataSeries.length;H++){D=C._vDataSeries[H]._fValues;for(var O=0;O<D.length;O++){m[O]=D[O]+(m[O]?m[O]:0)}}for(O=0;O<m.length;O++){u[O]=C.getFormat(m[O],H-1,O)}var R=0;var q=0;for(H=0;H<C._vDataSeries.length;H++){var w=C._vDataSeries[H]._sSeriesPop;var P=0;var B=0;var f=0;D=C._vDataSeries[H]._fValues;for(O=0;O<s;O++){P=F+e.getCategoryLeft(O)+z+(H*r);R=(m[O]);m[O]-=D[O];if(R<0){if(g<0){B=E;f=(-1)*Math.round((R+g)*a)}else{B=E+h;f=(-1)*Math.round(R*a)}}else{if(c>0){f=Math.round((R-c)*a);B=E+M-f}else{f=Math.round(R*a);B=E+h-f}}p.beginPath();p.fillStyle=C._vDataSeries[H]._cColor;if(H==0){p.shadowOffsetY=b;p.fillRect(P,B,G,f);k[O]=P+G/2;I[O]=B-i}p.shadowOffsetY="0";p.fillRect(P,B,G,f);var L=B+Math.floor(D[O]*a);l[q]=(P+G/2)/KJE.gSCALE;K[q]=L/KJE.gSCALE;N[q]=new Array(4);o[q]=new Array(4);N[q][0]=P/KJE.gSCALE;o[q][0]=B/KJE.gSCALE;N[q][1]=(P+G)/KJE.gSCALE;o[q][1]=o[q][0];N[q][2]=N[q][1];o[q][2]=L/KJE.gSCALE;N[q][3]=N[q][0];o[q][3]=o[q][2];t[q++]=w+(C._bPopCat&&j?" "+e._sCategories[O]:"")+(C._bPopDetail?KJE.Colon+" "+C.getFormat(D[O],H,O):"")}}N.length=q;o.length=q;t.length=q;p.shadowBlur="0";p.shadowOffsetX="0";p.shadowOffsetY="0";p.fillStyle=C._cTextColor;if(C._showItemLabel){for(O=0;O<m.length;O++){p.beginPath();p.fillText(KJE.FTR(u[O]),k[O],I[O]);p.closePath()}}};KJE.gType.prototype.poly=function(e,f,a,k){var d,b,h=0;if(e){var g=e.length;for(d=0,b=g-1;d<g;b=d++){if((((f[d]<=k)&&(k<f[b]))||((f[b]<=k)&&(k<f[d])))&&(a<(e[b]-e[d])*(k-f[d])/(f[b]-f[d])+e[d])){h=!h}}}return h};KJE.gType.prototype.getWedgeValue=function(a,i){var e=this;var g=e.xArray;var f=e.yArray;var d=e.sItems.length;for(var b=d;b>-1;b--){var h=e.poly(g[b],f[b],a,i);if(h){return{x:e.xPopup[b],y:e.yPopup[b],s:e.sItems[b]}}}return null};KJE.FTR=function(a){return a};KJE.bHT=false;KJE.getDate=function(b,c,a){var e=null;if((c+a+b)>=0){if((c>=1&&c<=12)&&(a>=1&&a<=31)&&(b>=1&&b<=9999)){var e=new Date(b,c-1,a)}}if(e==null){throw KJE.getKJEReplaced(KJE.MSG_INVALID_DATE)}return e};KJE.getAge=function(c,a){if(c){var d=new Date();var b=d.getFullYear()-c.getFullYear();if(!a){if((d.getMonth()<c.getMonth())||(d.getMonth()==c.getMonth()&&d.getDate()<c.getDate())){b--}}}else{throw KJE.getKJEReplaced(KJE.MSG_INVALID_DATE)}return Math.floor(b)};KJE.SUM_ARRAY=function(a){var c=a.length;var b=0;for(var d=0;d<c;d++){b+=a[d]}return b};KJE.ROR_MONTH=function(a){return Math.pow(1+(a),1/12)-1};KJE.ROR_PERIOD=function(a,b){return Math.pow(1+(a),1/b)-1};KJE.APY_MONTH=function(a){return KJE.FV_AMT(a,12,1)-1};KJE.NPV_AMT=function(b,c,a){if(b==-1){return 0}return(a/Math.pow((1+b),c))};KJE.FV_AMT=function(b,c,a){if(b==0){return a}return(a/Math.pow((1+b),((-1)*c)))};KJE.FV_BEGIN=function(a,c,b){if(a==0){return c*b}return(b/a)*(Math.pow((1+a),c+1)-1)-b};KJE.FV=function(a,c,b){if(a==0){return c*b}return(b/a)*(Math.pow((1+a),c)-1)};KJE.PV=function(a,c,b){return KJE.NPV_AMT(a,c,KJE.FV(a,c,b))};KJE.PV_BEGIN=function(a,c,b){return KJE.NPV_AMT(a,c,KJE.FV_BEGIN(a,c,b))};KJE.RATE=function(h,c,b){var a=0;var g=1;var e=c;var d=KJE.PMT;for(var f=1;f<50;f++){e=d(a,h,b);if(e==c){return a}else{if(e<c){a+=g}else{a-=g}}g=g/2}return a};KJE.PERIODS=function(b,c,a){if(b==0&&c!=0){return a/c}var f=3120;var h=1560;var e=c;var d=KJE.PMT;for(var g=1;g<50;g++){e=d(b,f,a);if(e==c){return f}else{if(e<c){f-=h}else{f+=h}}h=h/2}return f};KJE.PERIODS_FV=function(h,i,a){var f=720;var g=360;var e=i;var d=KJE.PMT;var c=KJE.NPV_AMT;for(var b=1;b<50;b++){e=d(h,f,c(h,f,a));if(e==i){return f}else{if(e<i){f-=g}else{f+=g}}g=g/2}return f};KJE.APR=function(f,c,b,a,e){var d=KJE.PMT(b,f,a+e);return KJE.RATE(f,d,a)};KJE.PMT=function(a,c,b){if(c<=0){return b}if(c<=1){return b*(1+a)}if(a==0){return b/c}return(b*a)/(1-Math.pow((1+a),(c*(-1))))};KJE.PMT_BEGIN=function(a,h,e){var c=KJE.PMT;if(h<=1){return e}var b=c(a,h,e);var g=b/2;var d=0;for(var f=1;f<50;f++){d=c(a,h-1,e-b);if(d==b){return b}else{if(d<b){b-=g}else{b+=g}}g=g/2}return b};KJE.showCode=function(e,h,d,b){var g=b;if(!d){var c=g.indexOf(e);var a=g.indexOf(h);var f="";while(c>0&&a>c){f=g.substring(0,c);f+=g.substring(a+h.length);c=f.indexOf(e);a=f.indexOf(h);g=f}g=(f==""?b:f)}g=KJE.replace(e,"",g);g=KJE.replace(h,"",g);return g};KJE.ScheduleTableTitle="Periodic Schedule";KJE._sTableHeader="<p class='KJEFooter KJEScheduleNote'>**ROTATE_MESSAGE**</p><table class='KJEScheduleTable KJEReportTableShrink' summary='**TITLE_TAG**'>";KJE._sTableFooter="</table>";KJE._sFooterRow="<tr class='KJEScheduleFooterRow' >";KJE._sTopRow="<tr class='KJEScheduleHeaderRow' >";KJE._sEvenRow="<tr class='KJEScheduleEvenRow' >";KJE._sOddRow="<tr class='KJEScheduleOddRow' >";KJE._sRowFooter="</tr>";KJE._sHeading="<th class='KJEScheduleHeading' >";KJE._sHeadingUnderline="<th class='KJEScheduleHeading' >";KJE._sHeadingFooter="</th>";KJE._sCell="<td class='KJEScheduleCell' >";KJE._sCellStrong="<td class='KJEScheduleCellStrong' >";KJE._sCellSpecial="<td class='KJEScheduleCellSpecial' >";KJE._sCellFooter="</td>";KJE._sScheduleRotate="(Rotate device or make window larger to view schedule.)";KJE._sScheduleHeader="<thead class='KJEScheduleTHeader'>";KJE._sScheduleHeaderEnd="</thead>";KJE._sScheduleFooter="<tfoot class='KJEScheduleTFooter'>";KJE._sScheduleFooterEnd="</tfoot>";KJE._sScheduleBody="<tbody class='KJEScheduleTBody'>";KJE._sScheduleBodyEnd="</tbody>";KJE._sCellBorderClass="KJECellBorder";KJE.ScheduleGroupingNotStarted=0;KJE.ScheduleGroupingStarted=1;KJE.ScheduleGroupingEnded=2;KJE.Repeating=function(a){a=(!a?"MSG_REPORT_COL":a);this.sRepeating="";this.nRepeatingCount=0;this.bScheduleHeader=KJE.ScheduleGroupingNotStarted;this.bScheduleFooter=KJE.ScheduleGroupingNotStarted;this.bScheduleBody=KJE.ScheduleGroupingNotStarted;this.sReportCols=new Array(15);this.bReportRequired=new Array(15);for(var b=0;b<15;b++){this.sReportCols[b]=KJE.parameters.get(a+(b+1),"");this.bReportRequired[b]=KJE.parameters.get("MSG_REPORT_REQ"+(b+1),true)}};KJE.Repeating.prototype.sReportCol=function(a,b){var c="";if(b<1||b>this.sReportCols.length){c=a}else{if(!this.sReportCols[b-1]||this.sReportCols[b-1]==""){c=a}else{c=this.sReportCols[b-1]}}return c};KJE.Repeating.prototype.getRepeat=function(d){var a=KJE;var c=a._sTableHeader.replace("**ROTATE_MESSAGE**",KJE._sScheduleRotate);var b=a._sScheduleBodyEnd+a._sTableFooter;return c.replace("**TITLE_TAG**",d?d.replace("'","&#39;"):a.parameters.get("MSG_REPEAT_TITLE",a.ScheduleTableTitle))+this.sRepeating+b};KJE.Repeating.prototype.clearRepeat=function(){this.sRepeating="";this.bScheduleHeader=KJE.ScheduleGroupingNotStarted;this.bScheduleFooter=KJE.ScheduleGroupingNotStarted;this.bScheduleBody=KJE.ScheduleGroupingNotStarted;this.nRepeatingCount=0};KJE.Repeating.prototype.add=function(o,n,c,b,k,m,d,l){var p="";if(arguments.length==0){return p}var f=this.bReportRequired;var a="";var j="";for(var h=m.length;h>1;h--){if(m[h-1]!=null){break}}var g=0;d=(d?true:false);for(var e=0;e<h;e++){if(m[e]!=null){if(m[e]!=""&&f[e]){if(m[e].sContent){j=m[e].sContent;a=(m[e].sCell?m[e].sCell:o);if(m[e].sFormat){a=a.replace(">"," "+m[e].sFormat+">")}d=false}else{a=o;if(d){a=a.replace("' >","' scope='col' >")}j=m[e]}if(e<h-1){a=a.replace("class='","class='"+k+" ")}g++;p+=a+j+n}}}if(g>0&&d){p=KJE.replace("' >","' width="+KJE.number(Math.floor(100/g),0)+"% >",p)}this.sRepeating+=c+(!l?p.replace("<td","<th scope='row' ").replace("</td>","</th>"):p)+b};KJE.Repeating.prototype.addHeader=function(){var a=KJE;if(this.bScheduleHeader==KJE.ScheduleGroupingNotStarted){this.bScheduleHeader=KJE.ScheduleGroupingStarted;this.sRepeating+=KJE._sScheduleHeader}this.add(a._sHeading,a._sHeadingFooter,a._sTopRow,a._sRowFooter,"",arguments,true,true)};KJE.Repeating.prototype.addFooter=function(){var a=KJE;if(this.bScheduleHeader==KJE.ScheduleGroupingStarted){this.bScheduleHeader=KJE.ScheduleGroupingEnded;this.sRepeating+=KJE._sScheduleHeaderEnd}if(this.bScheduleFooter==KJE.ScheduleGroupingNotStarted){this.bScheduleFooter=KJE.ScheduleGroupingStarted;this.sRepeating+=KJE._sScheduleFooter}this.add(a._sCellStrong,a._sHeadingFooter,a._sFooterRow,a._sRowFooter,a._sCellBorderClass,arguments,true,true)};KJE.Repeating.prototype.addRepeat=function(){var a=KJE;if(this.bScheduleHeader==KJE.ScheduleGroupingStarted){this.bScheduleHeader=KJE.ScheduleGroupingEnded;this.sRepeating+=KJE._sScheduleHeaderEnd}if(this.bScheduleFooter==KJE.ScheduleGroupingStarted){this.bScheduleFooter=KJE.ScheduleGroupingEnded;this.sRepeating+=KJE._sScheduleFooterEnd}if(this.bScheduleBody==KJE.ScheduleGroupingNotStarted){this.bScheduleBody=KJE.ScheduleGroupingEnded;this.sRepeating+=KJE._sScheduleBody}this.add(a._sCell,a._sCellFooter,(this.nRepeatingCount%2==0?a._sOddRow:a._sEvenRow),a._sRowFooter,a._sCellBorderClass,arguments,false,false);this.nRepeatingCount++};KJE.lang="EN";KJE.definitions.set("**INFLATION_DEFINITION**","This is what you expect for the average long-term inflation rate. A common measure of inflation in the U.S. is the Consumer Price Index (CPI).  From 1925 through 2019 the CPI has a long-term average of 2.9% annually. Over the last 40 years highest CPI recorded was 13.5% in 1980. For 2019, the last full year available, the CPI was 1.8% annually as reported by the Minneapolis Federal Reserve.");KJE.definitions.set("**ROR_DEFINITION**","The actual rate of return is largely dependent on the types of investments you select.  The Standard & Poor's 500&reg; (S&P 500&reg;) for the 10 years ending December 31<sup>st</sup> 2019, had an annual compounded rate of return of 13.2%, including reinvestment of dividends. From January 1, 1970 to December 31<sup>st</sup> 2019, the average annual compounded rate of return for the S&P 500&reg;, including reinvestment of dividends, was approximately 10.7% (source: www.standardandpoors.com). Since 1970, the highest 12-month return was 61% (June 1982 through June 1983). The lowest 12-month return was -43% (March 2008 to March 2009). Savings accounts at a financial institution may pay as little as 0.25% or less but carry significantly lower risk of loss of principal balances.<p>It is important to remember that these scenarios are hypothetical and that future rates of return can't be predicted with certainty and that investments that pay higher rates of return are generally subject to higher risk and volatility. The actual rate of return on investments can vary widely over time, especially for long-term investments. This includes the potential loss of principal on your investment. It is not possible to invest directly in an index and the compounded rate of return noted above does not reflect sales charges and other fees that investment funds and/or investment companies may charge.");KJE.definitions.set("**ROR_SHORT_DEFINITION**","It is important to remember that these scenarios are hypothetical and that future interest rates can't be predicted with certainty.");KJE.sEmailBody=KJE.parameters.get("MSG_MENU_EMAIL_BODY","Your results for the **TITLE**: **MENU_NAME**\n\n**SUMMARY**\n\nClick the link below to view details: **LINK** **FOOTER**");KJE.sEmailFooter=KJE.parameters.get("MSG_MENU_EMAIL_FOOTER","\n\n-------------------------------------------------------------\nFor the best financial calculators anywhere visit:\n<http://www.dinkytown.net>\n-------------------------------------------------------------");KJE.sEmailDefault=KJE.parameters.get("MSG_MENU_EMAIL_DEFAULT","someone@somewhere.net");KJE.sMenuEMAIL="<div class='KJEMenuGroupRow'><div class='KJEMenuNormalRow'><input id='KJEEmailInput' class=KJEMenuInputItem type='text' value='**EMAIL_DEFAULT**'></div><input type=button class='KJEMenuButton KJEMenuButtonWide'  id=KJEEmail value='"+KJE.parameters.get("MSG_MENU_EMAIL","Email")+"' /></div>";KJE.sMenuHTMLAuto="**RESET****EMAIL**";KJE.emailpage=function(){KJE.results();if(!KJE.Error&&!KJE.InComplete){var e=KJE.ReportText.indexOf("<h2");if(e>0){var c=KJE.ReportText.indexOf("**GRAPH**");if(c<0){c=KJE.ReportText.indexOf("</h2>")}var b=KJE.ReportText.substring(e+3,c);c=b.indexOf(">");if(c<0){c=0}b=KJE.replace("</h2>"," ",b.substring(c+1))}b=KJE.replace("**","",KJE.replace("</p>","",KJE.replace("<p>","\n",KJE.CalcControl.formatReport(b.trim()))));var a=KJE.formatEmailData();var d=KJE.replace("**LINK**",a,KJE.replace("**TITLE**",document.title,KJE.replace("**MENU_NAME**",(KJE.MenuSelectedRow>0?KJE.MenuGetSelectedName():""),KJE.replace("**SUMMARY**",b,KJE.replace("**FOOTER**",KJE.sEmailFooter,KJE.sEmailBody)))));d=encodeURIComponent(d);if(d.length>1950){d=encodeURIComponent('Your results for the "'+document.title+'":\n\n'+a)}window.location="mailto:"+encodeURIComponent(document.getElementById("KJEEmailInput").value)+"?subject="+encodeURIComponent(document.title)+"&body="+d}};KJE.formatEmailData=function(){return KJE.formatHref()+"?"+KJE.URLValueParm+"="+KJE.bStorageSet()};KJE.getURLValueParam=function(){var g={};var f=window.location.href;var a=f.indexOf(KJE.URLValueParm);if(a>0){var c=f.substring(a+KJE.URLValueParm.length+1);if(c){var b=KJE.LZString.decompressFromEncodedURIComponent(c);try{b=JSON.parse(b)}catch(d){b=null}if(b==null){try{b="{"+KJE.replace("*",'"',KJE.replace("(","",KJE.replace(")","",KJE.replace(";","",KJE.replace("EMPTY",'""',c)))))+"}";b=JSON.parse(b)}catch(d){b=null}}if(b==""||b==null){alert("There was an error in the data sent to this calculator. This can be caused by editing or changing a calculator link. We were unable to populate the calculator with the sent values. Calculator will appear with default values.");return false}return b}}return false};KJE.LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(c){var k=KJE.LZString;if(c==null){return""}var a="";var l,h,f,j,g,e,d;var b=0;c=k.compress(c);while(b<c.length*2){if(b%2==0){l=c.charCodeAt(b/2)>>8;h=c.charCodeAt(b/2)&255;if(b/2+1<c.length){f=c.charCodeAt(b/2+1)>>8}else{f=NaN}}else{l=c.charCodeAt((b-1)/2)&255;if((b+1)/2<c.length){h=c.charCodeAt((b+1)/2)>>8;f=c.charCodeAt((b+1)/2)&255}else{h=f=NaN}}b+=3;j=l>>2;g=((l&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+k._keyStr.charAt(j)+k._keyStr.charAt(g)+k._keyStr.charAt(e)+k._keyStr.charAt(d)}return a},decompressFromBase64:function(g){var o=KJE.LZString;if(g==null){return""}var a="",d=0,e,p,m,k,n,l,j,h,b=0,c=o._f;g=g.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<g.length){n=o._keyStr.indexOf(g.charAt(b++));l=o._keyStr.indexOf(g.charAt(b++));j=o._keyStr.indexOf(g.charAt(b++));h=o._keyStr.indexOf(g.charAt(b++));p=(n<<2)|(l>>4);m=((l&15)<<4)|(j>>2);k=((j&3)<<6)|h;if(d%2==0){e=p<<8;if(j!=64){a+=c(e|m)}if(h!=64){e=k<<8}}else{a=a+c(e|p);if(j!=64){e=m<<8}if(h!=64){a+=c(e|k)}}d+=3}return o.decompress(a)},compressToEncodedURIComponent:function(a){var b=KJE.LZString;return b.compressToBase64(a).replace(/=/g,"$").replace(/\//g,"-")},decompressFromEncodedURIComponent:function(a){var b=KJE.LZString;if(a){a=a.replace(/$/g,"=").replace(/-/g,"/")}return b.decompressFromBase64(a)},compress:function(e){var s=KJE.LZString;if(e==null){return""}var h,l,n={},m={},o="",c="",r="",d=2,g=3,b=2,q="",a=0,j=0,p,k=s._f;for(p=0;p<e.length;p+=1){o=e.charAt(p);if(!Object.prototype.hasOwnProperty.call(n,o)){n[o]=g++;m[o]=true}c=r+o;if(Object.prototype.hasOwnProperty.call(n,c)){r=c}else{if(Object.prototype.hasOwnProperty.call(m,r)){if(r.charCodeAt(0)<256){for(h=0;h<b;h++){a=(a<<1);if(j==15){j=0;q+=k(a);a=0}else{j++}}l=r.charCodeAt(0);for(h=0;h<8;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}else{l=1;for(h=0;h<b;h++){a=(a<<1)|l;if(j==15){j=0;q+=k(a);a=0}else{j++}l=0}l=r.charCodeAt(0);for(h=0;h<16;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}d--;if(d==0){d=Math.pow(2,b);b++}delete m[r]}else{l=n[r];for(h=0;h<b;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}d--;if(d==0){d=Math.pow(2,b);b++}n[c]=g++;r=String(o)}}if(r!==""){if(Object.prototype.hasOwnProperty.call(m,r)){if(r.charCodeAt(0)<256){for(h=0;h<b;h++){a=(a<<1);if(j==15){j=0;q+=k(a);a=0}else{j++}}l=r.charCodeAt(0);for(h=0;h<8;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}else{l=1;for(h=0;h<b;h++){a=(a<<1)|l;if(j==15){j=0;q+=k(a);a=0}else{j++}l=0}l=r.charCodeAt(0);for(h=0;h<16;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}d--;if(d==0){d=Math.pow(2,b);b++}delete m[r]}else{l=n[r];for(h=0;h<b;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}}d--;if(d==0){d=Math.pow(2,b);b++}}l=2;for(h=0;h<b;h++){a=(a<<1)|(l&1);if(j==15){j=0;q+=k(a);a=0}else{j++}l=l>>1}while(true){a=(a<<1);if(j==15){q+=k(a);break}else{j++}}return q},decompress:function(d){var m=KJE.LZString;if(d==null){return""}if(d==""){return null}var k=[],n,e=4,o=4,l=3,a="",h="",q,j,p,t,b,g,s,r=m._f,u={string:d,val:d.charCodeAt(0),position:32768,index:1};for(q=0;q<3;q+=1){k[q]=q}p=0;b=Math.pow(2,2);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}switch(n=p){case 0:p=0;b=Math.pow(2,8);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}s=r(p);break;case 1:p=0;b=Math.pow(2,16);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}s=r(p);break;case 2:return""}k[3]=s;j=h=s;while(true){if(u.index>u.string.length){return""}p=0;b=Math.pow(2,l);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}switch(s=p){case 0:p=0;b=Math.pow(2,8);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}k[o++]=r(p);s=o-1;e--;break;case 1:p=0;b=Math.pow(2,16);g=1;while(g!=b){t=u.val&u.position;u.position>>=1;if(u.position==0){u.position=32768;u.val=u.string.charCodeAt(u.index++)}p|=(t>0?1:0)*g;g<<=1}k[o++]=r(p);s=o-1;e--;break;case 2:return h}if(e==0){e=Math.pow(2,l);l++}if(k[s]){a=k[s]}else{if(s===o){a=j+j.charAt(0)}else{return null}}h+=a;k[o++]=j+a.charAt(0);e--;j=a;if(e==0){e=Math.pow(2,l);l++}}}};KJE.STORAGE_MULTI_MAX=10;KJE.STORAGE_MULTI=2;KJE.STORAGE_ROW_CSS="KJEMenuSavedRow";KJE.STORAGE_ROW_SELECTED_CSS="KJEMenuSelectedRow KJEMenuSavedRow";KJE.MSG_MENU_YOUR_VALUES=KJE.parameters.get("MSG_MENU_YOUR_VALUES","Your Values");KJE.MSG_MENU_TITLE_ALL=KJE.parameters.get("MSG_MENU_TITLE_ALL","Additional Functions");KJE.sMenuCURRENT="<div class='KJEMenuNewRow'><input class=KJEMenuInputItem type='hidden' id='KJESaveName' value='MSG_MENU_YOUR_VALUES ##'><input type=button class='KJEMenuButton KJEMenuButtonWide' id=KJESave value='"+KJE.parameters.get("MSG_MENU_CREATE","Save a copy")+"'/></div>";KJE.sMenuSAVEDITEMS="**SAVE_ITEMS**";KJE.sMenuHTMLMulti="**RESET****CALCCLEAR****EMAIL**<div class=KJEMenuGroupRow>**CURRENT**</div><div class='KJEMenuHeader'><span id='KJEMenuWindowTitle'>**MSG_MENU_SAVETITLE**</span></div>**SAVE**";KJE.sMenuSavedHTML="<div id=KJESavedRow## class=KJEMenuSavedEntrySection><div class=KJEMenuSaveRow><input class='KJEMenuInputItem' type='text' id='KJEGetName##' value=''></div><div class=KJEMenuSaveRow><input type=button class=KJEMenuButton id=KJEUpdate## value='"+KJE.parameters.get("MSG_MENU_SAVE","save")+"' /><input type=button class=KJEMenuButton id=KJEGet## value='"+KJE.parameters.get("MSG_MENU_GET","load")+"'/><input type=button class=KJEMenuButton id=KJEDelete## value='"+KJE.parameters.get("MSG_MENU_DELETE","delete")+"' /></div></div>";KJE.MENU_SHOW_SAVE=true;KJE.MENU_SHOW_EMAIL=true;KJE.MENU_SHOW_RESET=true;KJE.MENU_SHOW_CLEAR=true;KJE.parseMenuDefn=function(b){var a=KJE;if(!a.parameters.get("MENU_SHOW_EMAIL",a.MENU_SHOW_EMAIL)){b=a.replace("MENU_SHOW_EMAIL_START-->","",b);b=a.replace("<!--MENU_SHOW_EMAIL_END","",b)}return b};KJE.initMenuMulti=function(){var j=KJE;if(j.bUseStorage==j.STORAGE_MULTI){var c=j.sMenuHTMLMulti;var e=j.MENU_SHOW_SAVE=j.parameters.get("MENU_SHOW_SAVE",j.MENU_SHOW_SAVE);var g=j.MENU_SHOW_EMAIL=j.parameters.get("MENU_SHOW_EMAIL",j.MENU_SHOW_EMAIL);var f=j.MENU_SHOW_RESET=j.parameters.get("MENU_SHOW_RESET",j.MENU_SHOW_RESET);var d=j.MENU_SHOW_CLEAR=j.parameters.get("MENU_SHOW_CLEAR",j.MENU_SHOW_CLEAR);c=j.replace("**RESET**",(f?j.sMenuRESET:""),c);c=j.replace("**CALCCLEAR**",(d?j.sMenuCLEAR:""),c);c=j.replace("**EMAIL**",(g?j.replace("**EMAIL_DEFAULT**",j.sEmailDefault,j.sMenuEMAIL):""),c);if(e){var h="";for(var b=0;b<j.STORAGE_MULTI_MAX;b++){h+=j.replace("##",(b+1)+"",j.sMenuSavedHTML)}c=j.replace("**SAVE**",j.replace("**SAVE_ITEMS**",h,j.sMenuSAVEDITEMS),c);c=j.replace("**CURRENT**",j.sMenuCURRENT,c);c=j.replace("**MSG_MENU_SAVETITLE**",j.parameters.get("MSG_MENU_SAVETITLE","Saved data"),c)}else{c=j.replace("**SAVE**","",j.replace("**CURRENT**","",c));c=j.replace("**MSG_MENU_SAVETITLE**","",c)}j.MenuHeader=j.replace("**MSG_MENU_TITLE**",KJE.MSG_MENU_TITLE_ALL,KJE.MenuHeader);j.MenuWindow.innerHTML=KJE.MenuHeader+c;j.KJESaveName=document.getElementById("KJESaveName");j.KJESave=document.getElementById("KJESave");if(window.addEventListener){j.KJESave.addEventListener("click",function(i){KJE.MenuUpdateSaved()},false)}if(j.KJESaveName){j.MenuColorRows(-1);if(window.addEventListener){for(var b=j.STORAGE_MULTI_MAX;b>0;b--){j.MenuMultiEvents(b);var a=localStorage.getItem(j.sStorageKey+"#"+b+"_name");if(a!=null){document.getElementById("KJEGetName"+b).value=a;document.getElementById("KJESavedRow"+b).style.display="block"}}}}return true}return false};KJE.MenuMultiEvents=function(a){document.getElementById("KJEUpdate"+a).addEventListener("click",function(b){KJE.MenuUpdateSaved(a)},false);document.getElementById("KJEDelete"+a).addEventListener("click",function(b){KJE.MenuDeleteSaved(a)},false);document.getElementById("KJEGet"+a).addEventListener("click",function(b){KJE.MenuGetSaved(a)},false)};KJE.MenuUpdateSaved=function(f){var c=KJE;if(f){KJE.bStorageSet(f,document.getElementById("KJEGetName"+f).value)}else{var b=KJE.KJESaveName.value;var a=new Array();f=c.STORAGE_MULTI_MAX+1;for(var e=c.STORAGE_MULTI_MAX;e>0;e--){a[e]=localStorage.getItem(KJE.sStorageKey+"#"+e+"_name");if(a[e]==null){f=e}}for(var e=c.STORAGE_MULTI_MAX;e>0;e--){if(a[e]==null){f=e}}if(f>c.STORAGE_MULTI_MAX){alert("Maximum of "+c.STORAGE_MULTI_MAX+" Saved spaces have been filled, please delete an entry before adding another.");return}b=KJE.replace("##","#"+f,KJE.replace("MSG_MENU_YOUR_VALUES",KJE.MSG_MENU_YOUR_VALUES,b));if(c.CalcControl.EXTRA_CLIENTNAME){if(c.CalcControl.EXTRA_CLIENTNAME.trim!=""){b=c.CalcControl.EXTRA_CLIENTNAME}}KJE.bStorageSet(f,b.trim());var d=document.getElementById("KJEGetName"+f);d.value=b;var g=document.getElementById("KJESavedRow"+f);g.style.display="block"}KJE.MenuColorRows(f)};KJE.MenuGetSaved=function(c){var b=localStorage.getItem(KJE.sStorageKey+"#"+c+"_name");var a=null;try{a=JSON.parse(KJE.LZString.decompressFromEncodedURIComponent(localStorage.getItem(KJE.sStorageKey+"#"+c)))}catch(d){a=null}if(a==null){a={}}KJE.bStoragePopulate(a);KJE.MenuColorRows(c)};KJE.MenuDeleteSaved=function(a){localStorage.removeItem(KJE.sStorageKey+"#"+a);localStorage.removeItem(KJE.sStorageKey+"#"+a+"_name");document.getElementById("KJEGetName"+a).value="";document.getElementById("KJESavedRow"+a).style.display="none";KJE.MenuColorRows(-1)};KJE.MenuColorRows=function(b){KJE.STORAGE_ROW_CSS="KJEMenuGroupRow";KJE.STORAGE_ROW_SELECTED_CSS="KJEMenuSelectedRow KJEMenuGroupRow";for(var a=1;a<=KJE.STORAGE_MULTI_MAX;a++){if(a==b){document.getElementById("KJESavedRow"+a).className=KJE.STORAGE_ROW_SELECTED_CSS}else{document.getElementById("KJESavedRow"+a).className=KJE.STORAGE_ROW_CSS}}KJE.MenuSelectedRow=b};KJE.MenuGetSelectedName=function(){if(document.getElementById("KJEGetName"+KJE.MenuSelectedRow)){return document.getElementById("KJEGetName"+KJE.MenuSelectedRow).value}else{return""}};KJE.parameters.getSet("LOCAL_STORAGE",KJE.STORAGE_MULTI);KJE.parameters.getSet("SHOW_MENU",true);